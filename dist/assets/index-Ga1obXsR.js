var uR=Object.defineProperty;var mb=n=>{throw TypeError(n)};var hR=(n,e,t)=>e in n?uR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var j=(n,e,t)=>hR(n,typeof e!="symbol"?e+"":e,t),Qg=(n,e,t)=>e.has(n)||mb("Cannot "+t);var c=(n,e,t)=>(Qg(n,e,"read from private field"),t?t.call(n):e.get(n)),S=(n,e,t)=>e.has(n)?mb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),x=(n,e,t,s)=>(Qg(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),A=(n,e,t)=>(Qg(n,e,"access private method"),t);var Gt=(n,e,t,s)=>({set _(i){x(n,e,i,t)},get _(){return c(n,e,s)}});function dR(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function H1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var U1={exports:{}},gg={},W1={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qd=Symbol.for("react.element"),fR=Symbol.for("react.portal"),pR=Symbol.for("react.fragment"),mR=Symbol.for("react.strict_mode"),gR=Symbol.for("react.profiler"),yR=Symbol.for("react.provider"),vR=Symbol.for("react.context"),wR=Symbol.for("react.forward_ref"),xR=Symbol.for("react.suspense"),bR=Symbol.for("react.memo"),_R=Symbol.for("react.lazy"),gb=Symbol.iterator;function AR(n){return n===null||typeof n!="object"?null:(n=gb&&n[gb]||n["@@iterator"],typeof n=="function"?n:null)}var V1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q1=Object.assign,G1={};function Vc(n,e,t){this.props=n,this.context=e,this.refs=G1,this.updater=t||V1}Vc.prototype.isReactComponent={};Vc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Vc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function X1(){}X1.prototype=Vc.prototype;function Mw(n,e,t){this.props=n,this.context=e,this.refs=G1,this.updater=t||V1}var Nw=Mw.prototype=new X1;Nw.constructor=Mw;q1(Nw,Vc.prototype);Nw.isPureReactComponent=!0;var yb=Array.isArray,K1=Object.prototype.hasOwnProperty,Iw={current:null},Q1={key:!0,ref:!0,__self:!0,__source:!0};function Y1(n,e,t){var s,i={},r=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)K1.call(e,s)&&!Q1.hasOwnProperty(s)&&(i[s]=e[s]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(s in o=n.defaultProps,o)i[s]===void 0&&(i[s]=o[s]);return{$$typeof:qd,type:n,key:r,ref:a,props:i,_owner:Iw.current}}function SR(n,e){return{$$typeof:qd,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Lw(n){return typeof n=="object"&&n!==null&&n.$$typeof===qd}function ER(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var vb=/\/+/g;function Yg(n,e){return typeof n=="object"&&n!==null&&n.key!=null?ER(""+n.key):e.toString(36)}function Hf(n,e,t,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case qd:case fR:a=!0}}if(a)return a=n,i=i(a),n=s===""?"."+Yg(a,0):s,yb(i)?(t="",n!=null&&(t=n.replace(vb,"$&/")+"/"),Hf(i,e,t,"",function(u){return u})):i!=null&&(Lw(i)&&(i=SR(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(vb,"$&/")+"/")+n)),e.push(i)),1;if(a=0,s=s===""?".":s+":",yb(n))for(var o=0;o<n.length;o++){r=n[o];var l=s+Yg(r,o);a+=Hf(r,e,t,l,i)}else if(l=AR(n),typeof l=="function")for(n=l.call(n),o=0;!(r=n.next()).done;)r=r.value,l=s+Yg(r,o++),a+=Hf(r,e,t,l,i);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function of(n,e,t){if(n==null)return n;var s=[],i=0;return Hf(n,s,"","",function(r){return e.call(t,r,i++)}),s}function kR(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var tn={current:null},Uf={transition:null},CR={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:Uf,ReactCurrentOwner:Iw};function J1(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:of,forEach:function(n,e,t){of(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return of(n,function(){e++}),e},toArray:function(n){return of(n,function(e){return e})||[]},only:function(n){if(!Lw(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ie.Component=Vc;ie.Fragment=pR;ie.Profiler=gR;ie.PureComponent=Mw;ie.StrictMode=mR;ie.Suspense=xR;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CR;ie.act=J1;ie.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=q1({},n.props),i=n.key,r=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=Iw.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)K1.call(e,l)&&!Q1.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];s.children=o}return{$$typeof:qd,type:n.type,key:i,ref:r,props:s,_owner:a}};ie.createContext=function(n){return n={$$typeof:vR,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:yR,_context:n},n.Consumer=n};ie.createElement=Y1;ie.createFactory=function(n){var e=Y1.bind(null,n);return e.type=n,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(n){return{$$typeof:wR,render:n}};ie.isValidElement=Lw;ie.lazy=function(n){return{$$typeof:_R,_payload:{_status:-1,_result:n},_init:kR}};ie.memo=function(n,e){return{$$typeof:bR,type:n,compare:e===void 0?null:e}};ie.startTransition=function(n){var e=Uf.transition;Uf.transition={};try{n()}finally{Uf.transition=e}};ie.unstable_act=J1;ie.useCallback=function(n,e){return tn.current.useCallback(n,e)};ie.useContext=function(n){return tn.current.useContext(n)};ie.useDebugValue=function(){};ie.useDeferredValue=function(n){return tn.current.useDeferredValue(n)};ie.useEffect=function(n,e){return tn.current.useEffect(n,e)};ie.useId=function(){return tn.current.useId()};ie.useImperativeHandle=function(n,e,t){return tn.current.useImperativeHandle(n,e,t)};ie.useInsertionEffect=function(n,e){return tn.current.useInsertionEffect(n,e)};ie.useLayoutEffect=function(n,e){return tn.current.useLayoutEffect(n,e)};ie.useMemo=function(n,e){return tn.current.useMemo(n,e)};ie.useReducer=function(n,e,t){return tn.current.useReducer(n,e,t)};ie.useRef=function(n){return tn.current.useRef(n)};ie.useState=function(n){return tn.current.useState(n)};ie.useSyncExternalStore=function(n,e,t){return tn.current.useSyncExternalStore(n,e,t)};ie.useTransition=function(){return tn.current.useTransition()};ie.version="18.3.1";W1.exports=ie;var I=W1.exports;const Fw=H1(I),TR=dR({__proto__:null,default:Fw},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RR=I,PR=Symbol.for("react.element"),MR=Symbol.for("react.fragment"),NR=Object.prototype.hasOwnProperty,IR=RR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LR={key:!0,ref:!0,__self:!0,__source:!0};function Z1(n,e,t){var s,i={},r=null,a=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)NR.call(e,s)&&!LR.hasOwnProperty(s)&&(i[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:PR,type:n,key:r,ref:a,props:i,_owner:IR.current}}gg.Fragment=MR;gg.jsx=Z1;gg.jsxs=Z1;U1.exports=gg;var w=U1.exports,eA={exports:{}},Bn={},tA={exports:{}},nA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(M,W){var q=M.length;M.push(W);e:for(;0<q;){var J=q-1>>>1,ce=M[J];if(0<i(ce,W))M[J]=W,M[q]=ce,q=J;else break e}}function t(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var W=M[0],q=M.pop();if(q!==W){M[0]=q;e:for(var J=0,ce=M.length,Le=ce>>>1;J<Le;){var sn=2*(J+1)-1,_n=M[sn],Ye=sn+1,me=M[Ye];if(0>i(_n,q))Ye<ce&&0>i(me,_n)?(M[J]=me,M[Ye]=q,J=Ye):(M[J]=_n,M[sn]=q,J=sn);else if(Ye<ce&&0>i(me,q))M[J]=me,M[Ye]=q,J=Ye;else break e}}return W}function i(M,W){var q=M.sortIndex-W.sortIndex;return q!==0?q:M.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(M){for(var W=t(u);W!==null;){if(W.callback===null)s(u);else if(W.startTime<=M)s(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(u)}}function E(M){if(v=!1,_(M),!m)if(t(l)!==null)m=!0,de(C);else{var W=t(u);W!==null&&G(E,W.startTime-M)}}function C(M,W){m=!1,v&&(v=!1,y(R),R=-1),p=!0;var q=f;try{for(_(W),d=t(l);d!==null&&(!(d.expirationTime>W)||M&&!L());){var J=d.callback;if(typeof J=="function"){d.callback=null,f=d.priorityLevel;var ce=J(d.expirationTime<=W);W=n.unstable_now(),typeof ce=="function"?d.callback=ce:d===t(l)&&s(l),_(W)}else s(l);d=t(l)}if(d!==null)var Le=!0;else{var sn=t(u);sn!==null&&G(E,sn.startTime-W),Le=!1}return Le}finally{d=null,f=q,p=!1}}var k=!1,T=null,R=-1,N=5,P=-1;function L(){return!(n.unstable_now()-P<N)}function z(){if(T!==null){var M=n.unstable_now();P=M;var W=!0;try{W=T(!0,M)}finally{W?Q():(k=!1,T=null)}}else k=!1}var Q;if(typeof g=="function")Q=function(){g(z)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,re=ne.port2;ne.port1.onmessage=z,Q=function(){re.postMessage(null)}}else Q=function(){b(z,0)};function de(M){T=M,k||(k=!0,Q())}function G(M,W){R=b(function(){M(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(M){M.callback=null},n.unstable_continueExecution=function(){m||p||(m=!0,de(C))},n.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<M?Math.floor(1e3/M):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(M){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var q=f;f=W;try{return M()}finally{f=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(M,W){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var q=f;f=M;try{return W()}finally{f=q}},n.unstable_scheduleCallback=function(M,W,q){var J=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?J+q:J):q=J,M){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=q+ce,M={id:h++,callback:W,priorityLevel:M,startTime:q,expirationTime:ce,sortIndex:-1},q>J?(M.sortIndex=q,e(u,M),t(l)===null&&M===t(u)&&(v?(y(R),R=-1):v=!0,G(E,q-J))):(M.sortIndex=ce,e(l,M),m||p||(m=!0,de(C))),M},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(M){var W=f;return function(){var q=f;f=W;try{return M.apply(this,arguments)}finally{f=q}}}})(nA);tA.exports=nA;var FR=tA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DR=I,zn=FR;function F(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sA=new Set,ih={};function Wo(n,e){Dc(n,e),Dc(n+"Capture",e)}function Dc(n,e){for(ih[n]=e,n=0;n<e.length;n++)sA.add(e[n])}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jy=Object.prototype.hasOwnProperty,OR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wb={},xb={};function jR(n){return Jy.call(xb,n)?!0:Jy.call(wb,n)?!1:OR.test(n)?xb[n]=!0:(wb[n]=!0,!1)}function $R(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function zR(n,e,t,s){if(e===null||typeof e>"u"||$R(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(n,e,t,s,i,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){It[n]=new nn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];It[e]=new nn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){It[n]=new nn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){It[n]=new nn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){It[n]=new nn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){It[n]=new nn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){It[n]=new nn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){It[n]=new nn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){It[n]=new nn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Dw=/[\-:]([a-z])/g;function Ow(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Dw,Ow);It[e]=new nn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Dw,Ow);It[e]=new nn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Dw,Ow);It[e]=new nn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){It[n]=new nn(n,1,!1,n.toLowerCase(),null,!1,!1)});It.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){It[n]=new nn(n,1,!1,n.toLowerCase(),null,!0,!0)});function jw(n,e,t,s){var i=It.hasOwnProperty(e)?It[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zR(e,t,i,s)&&(t=null),s||i===null?jR(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,s=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var ar=DR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lf=Symbol.for("react.element"),hl=Symbol.for("react.portal"),dl=Symbol.for("react.fragment"),$w=Symbol.for("react.strict_mode"),Zy=Symbol.for("react.profiler"),iA=Symbol.for("react.provider"),rA=Symbol.for("react.context"),zw=Symbol.for("react.forward_ref"),e0=Symbol.for("react.suspense"),t0=Symbol.for("react.suspense_list"),Bw=Symbol.for("react.memo"),mr=Symbol.for("react.lazy"),aA=Symbol.for("react.offscreen"),bb=Symbol.iterator;function Jc(n){return n===null||typeof n!="object"?null:(n=bb&&n[bb]||n["@@iterator"],typeof n=="function"?n:null)}var We=Object.assign,Jg;function gu(n){if(Jg===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Jg=e&&e[1]||""}return`
`+Jg+n}var Zg=!1;function ey(n,e){if(!n||Zg)return"";Zg=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=s.stack.split(`
`),a=i.length-1,o=r.length-1;1<=a&&0<=o&&i[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==r[o]){var l=`
`+i[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{Zg=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?gu(n):""}function BR(n){switch(n.tag){case 5:return gu(n.type);case 16:return gu("Lazy");case 13:return gu("Suspense");case 19:return gu("SuspenseList");case 0:case 2:case 15:return n=ey(n.type,!1),n;case 11:return n=ey(n.type.render,!1),n;case 1:return n=ey(n.type,!0),n;default:return""}}function n0(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case dl:return"Fragment";case hl:return"Portal";case Zy:return"Profiler";case $w:return"StrictMode";case e0:return"Suspense";case t0:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case rA:return(n.displayName||"Context")+".Consumer";case iA:return(n._context.displayName||"Context")+".Provider";case zw:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Bw:return e=n.displayName||null,e!==null?e:n0(n.type)||"Memo";case mr:e=n._payload,n=n._init;try{return n0(n(e))}catch{}}return null}function HR(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return n0(e);case 8:return e===$w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ia(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function oA(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function UR(n){var e=oA(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){s=""+a,r.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function cf(n){n._valueTracker||(n._valueTracker=UR(n))}function lA(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=oA(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function jp(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function s0(n,e){var t=e.checked;return We({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function _b(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=ia(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cA(n,e){e=e.checked,e!=null&&jw(n,"checked",e,!1)}function i0(n,e){cA(n,e);var t=ia(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?r0(n,e.type,t):e.hasOwnProperty("defaultValue")&&r0(n,e.type,ia(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Ab(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function r0(n,e,t){(e!=="number"||jp(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var yu=Array.isArray;function El(n,e,t,s){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&s&&(n[t].defaultSelected=!0)}else{for(t=""+ia(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function a0(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return We({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Sb(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(F(92));if(yu(t)){if(1<t.length)throw Error(F(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ia(t)}}function uA(n,e){var t=ia(e.value),s=ia(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function Eb(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function hA(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function o0(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?hA(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var uf,dA=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(uf=uf||document.createElement("div"),uf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uf.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function rh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Bu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WR=["Webkit","ms","Moz","O"];Object.keys(Bu).forEach(function(n){WR.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Bu[e]=Bu[n]})});function fA(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Bu.hasOwnProperty(n)&&Bu[n]?(""+e).trim():e+"px"}function pA(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,i=fA(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,i):n[t]=i}}var VR=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function l0(n,e){if(e){if(VR[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function c0(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var u0=null;function Hw(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var h0=null,kl=null,Cl=null;function kb(n){if(n=Kd(n)){if(typeof h0!="function")throw Error(F(280));var e=n.stateNode;e&&(e=bg(e),h0(n.stateNode,n.type,e))}}function mA(n){kl?Cl?Cl.push(n):Cl=[n]:kl=n}function gA(){if(kl){var n=kl,e=Cl;if(Cl=kl=null,kb(n),e)for(n=0;n<e.length;n++)kb(e[n])}}function yA(n,e){return n(e)}function vA(){}var ty=!1;function wA(n,e,t){if(ty)return n(e,t);ty=!0;try{return yA(n,e,t)}finally{ty=!1,(kl!==null||Cl!==null)&&(vA(),gA())}}function ah(n,e){var t=n.stateNode;if(t===null)return null;var s=bg(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(F(231,e,typeof t));return t}var d0=!1;if(Ji)try{var Zc={};Object.defineProperty(Zc,"passive",{get:function(){d0=!0}}),window.addEventListener("test",Zc,Zc),window.removeEventListener("test",Zc,Zc)}catch{d0=!1}function qR(n,e,t,s,i,r,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Hu=!1,$p=null,zp=!1,f0=null,GR={onError:function(n){Hu=!0,$p=n}};function XR(n,e,t,s,i,r,a,o,l){Hu=!1,$p=null,qR.apply(GR,arguments)}function KR(n,e,t,s,i,r,a,o,l){if(XR.apply(this,arguments),Hu){if(Hu){var u=$p;Hu=!1,$p=null}else throw Error(F(198));zp||(zp=!0,f0=u)}}function Vo(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function xA(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Cb(n){if(Vo(n)!==n)throw Error(F(188))}function QR(n){var e=n.alternate;if(!e){if(e=Vo(n),e===null)throw Error(F(188));return e!==n?null:n}for(var t=n,s=e;;){var i=t.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){t=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===t)return Cb(i),n;if(r===s)return Cb(i),e;r=r.sibling}throw Error(F(188))}if(t.return!==s.return)t=i,s=r;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,s=r;break}if(o===s){a=!0,s=i,t=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===t){a=!0,t=r,s=i;break}if(o===s){a=!0,s=r,t=i;break}o=o.sibling}if(!a)throw Error(F(189))}}if(t.alternate!==s)throw Error(F(190))}if(t.tag!==3)throw Error(F(188));return t.stateNode.current===t?n:e}function bA(n){return n=QR(n),n!==null?_A(n):null}function _A(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=_A(n);if(e!==null)return e;n=n.sibling}return null}var AA=zn.unstable_scheduleCallback,Tb=zn.unstable_cancelCallback,YR=zn.unstable_shouldYield,JR=zn.unstable_requestPaint,Ke=zn.unstable_now,ZR=zn.unstable_getCurrentPriorityLevel,Uw=zn.unstable_ImmediatePriority,SA=zn.unstable_UserBlockingPriority,Bp=zn.unstable_NormalPriority,eP=zn.unstable_LowPriority,EA=zn.unstable_IdlePriority,yg=null,oi=null;function tP(n){if(oi&&typeof oi.onCommitFiberRoot=="function")try{oi.onCommitFiberRoot(yg,n,void 0,(n.current.flags&128)===128)}catch{}}var Ts=Math.clz32?Math.clz32:iP,nP=Math.log,sP=Math.LN2;function iP(n){return n>>>=0,n===0?32:31-(nP(n)/sP|0)|0}var hf=64,df=4194304;function vu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Hp(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?s=vu(o):(r&=a,r!==0&&(s=vu(r)))}else a=t&~i,a!==0?s=vu(a):r!==0&&(s=vu(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-Ts(e),i=1<<t,s|=n[t],e&=~i;return s}function rP(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aP(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var a=31-Ts(r),o=1<<a,l=i[a];l===-1?(!(o&t)||o&s)&&(i[a]=rP(o,e)):l<=e&&(n.expiredLanes|=o),r&=~o}}function p0(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function kA(){var n=hf;return hf<<=1,!(hf&4194240)&&(hf=64),n}function ny(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Gd(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ts(e),n[e]=t}function oP(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ts(t),r=1<<i;e[i]=0,s[i]=-1,n[i]=-1,t&=~r}}function Ww(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-Ts(t),i=1<<s;i&e|n[s]&e&&(n[s]|=e),t&=~i}}var be=0;function CA(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var TA,Vw,RA,PA,MA,m0=!1,ff=[],Qr=null,Yr=null,Jr=null,oh=new Map,lh=new Map,yr=[],lP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rb(n,e){switch(n){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":oh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lh.delete(e.pointerId)}}function eu(n,e,t,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=Kd(e),e!==null&&Vw(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function cP(n,e,t,s,i){switch(e){case"focusin":return Qr=eu(Qr,n,e,t,s,i),!0;case"dragenter":return Yr=eu(Yr,n,e,t,s,i),!0;case"mouseover":return Jr=eu(Jr,n,e,t,s,i),!0;case"pointerover":var r=i.pointerId;return oh.set(r,eu(oh.get(r)||null,n,e,t,s,i)),!0;case"gotpointercapture":return r=i.pointerId,lh.set(r,eu(lh.get(r)||null,n,e,t,s,i)),!0}return!1}function NA(n){var e=Ea(n.target);if(e!==null){var t=Vo(e);if(t!==null){if(e=t.tag,e===13){if(e=xA(t),e!==null){n.blockedOn=e,MA(n.priority,function(){RA(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Wf(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=g0(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);u0=s,t.target.dispatchEvent(s),u0=null}else return e=Kd(t),e!==null&&Vw(e),n.blockedOn=t,!1;e.shift()}return!0}function Pb(n,e,t){Wf(n)&&t.delete(e)}function uP(){m0=!1,Qr!==null&&Wf(Qr)&&(Qr=null),Yr!==null&&Wf(Yr)&&(Yr=null),Jr!==null&&Wf(Jr)&&(Jr=null),oh.forEach(Pb),lh.forEach(Pb)}function tu(n,e){n.blockedOn===e&&(n.blockedOn=null,m0||(m0=!0,zn.unstable_scheduleCallback(zn.unstable_NormalPriority,uP)))}function ch(n){function e(i){return tu(i,n)}if(0<ff.length){tu(ff[0],n);for(var t=1;t<ff.length;t++){var s=ff[t];s.blockedOn===n&&(s.blockedOn=null)}}for(Qr!==null&&tu(Qr,n),Yr!==null&&tu(Yr,n),Jr!==null&&tu(Jr,n),oh.forEach(e),lh.forEach(e),t=0;t<yr.length;t++)s=yr[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<yr.length&&(t=yr[0],t.blockedOn===null);)NA(t),t.blockedOn===null&&yr.shift()}var Tl=ar.ReactCurrentBatchConfig,Up=!0;function hP(n,e,t,s){var i=be,r=Tl.transition;Tl.transition=null;try{be=1,qw(n,e,t,s)}finally{be=i,Tl.transition=r}}function dP(n,e,t,s){var i=be,r=Tl.transition;Tl.transition=null;try{be=4,qw(n,e,t,s)}finally{be=i,Tl.transition=r}}function qw(n,e,t,s){if(Up){var i=g0(n,e,t,s);if(i===null)dy(n,e,s,Wp,t),Rb(n,s);else if(cP(i,n,e,t,s))s.stopPropagation();else if(Rb(n,s),e&4&&-1<lP.indexOf(n)){for(;i!==null;){var r=Kd(i);if(r!==null&&TA(r),r=g0(n,e,t,s),r===null&&dy(n,e,s,Wp,t),r===i)break;i=r}i!==null&&s.stopPropagation()}else dy(n,e,s,null,t)}}var Wp=null;function g0(n,e,t,s){if(Wp=null,n=Hw(s),n=Ea(n),n!==null)if(e=Vo(n),e===null)n=null;else if(t=e.tag,t===13){if(n=xA(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Wp=n,null}function IA(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZR()){case Uw:return 1;case SA:return 4;case Bp:case eP:return 16;case EA:return 536870912;default:return 16}default:return 16}}var qr=null,Gw=null,Vf=null;function LA(){if(Vf)return Vf;var n,e=Gw,t=e.length,s,i="value"in qr?qr.value:qr.textContent,r=i.length;for(n=0;n<t&&e[n]===i[n];n++);var a=t-n;for(s=1;s<=a&&e[t-s]===i[r-s];s++);return Vf=i.slice(n,1<s?1-s:void 0)}function qf(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function pf(){return!0}function Mb(){return!1}function Hn(n){function e(t,s,i,r,a){this._reactName=t,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?pf:Mb,this.isPropagationStopped=Mb,this}return We(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=pf)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=pf)},persist:function(){},isPersistent:pf}),e}var qc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xw=Hn(qc),Xd=We({},qc,{view:0,detail:0}),fP=Hn(Xd),sy,iy,nu,vg=We({},Xd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kw,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==nu&&(nu&&n.type==="mousemove"?(sy=n.screenX-nu.screenX,iy=n.screenY-nu.screenY):iy=sy=0,nu=n),sy)},movementY:function(n){return"movementY"in n?n.movementY:iy}}),Nb=Hn(vg),pP=We({},vg,{dataTransfer:0}),mP=Hn(pP),gP=We({},Xd,{relatedTarget:0}),ry=Hn(gP),yP=We({},qc,{animationName:0,elapsedTime:0,pseudoElement:0}),vP=Hn(yP),wP=We({},qc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xP=Hn(wP),bP=We({},qc,{data:0}),Ib=Hn(bP),_P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EP(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=SP[n])?!!e[n]:!1}function Kw(){return EP}var kP=We({},Xd,{key:function(n){if(n.key){var e=_P[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=qf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?AP[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kw,charCode:function(n){return n.type==="keypress"?qf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),CP=Hn(kP),TP=We({},vg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lb=Hn(TP),RP=We({},Xd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kw}),PP=Hn(RP),MP=We({},qc,{propertyName:0,elapsedTime:0,pseudoElement:0}),NP=Hn(MP),IP=We({},vg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),LP=Hn(IP),FP=[9,13,27,32],Qw=Ji&&"CompositionEvent"in window,Uu=null;Ji&&"documentMode"in document&&(Uu=document.documentMode);var DP=Ji&&"TextEvent"in window&&!Uu,FA=Ji&&(!Qw||Uu&&8<Uu&&11>=Uu),Fb=" ",Db=!1;function DA(n,e){switch(n){case"keyup":return FP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fl=!1;function OP(n,e){switch(n){case"compositionend":return OA(e);case"keypress":return e.which!==32?null:(Db=!0,Fb);case"textInput":return n=e.data,n===Fb&&Db?null:n;default:return null}}function jP(n,e){if(fl)return n==="compositionend"||!Qw&&DA(n,e)?(n=LA(),Vf=Gw=qr=null,fl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return FA&&e.locale!=="ko"?null:e.data;default:return null}}var $P={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ob(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!$P[n.type]:e==="textarea"}function jA(n,e,t,s){mA(s),e=Vp(e,"onChange"),0<e.length&&(t=new Xw("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Wu=null,uh=null;function zP(n){KA(n,0)}function wg(n){var e=gl(n);if(lA(e))return n}function BP(n,e){if(n==="change")return e}var $A=!1;if(Ji){var ay;if(Ji){var oy="oninput"in document;if(!oy){var jb=document.createElement("div");jb.setAttribute("oninput","return;"),oy=typeof jb.oninput=="function"}ay=oy}else ay=!1;$A=ay&&(!document.documentMode||9<document.documentMode)}function $b(){Wu&&(Wu.detachEvent("onpropertychange",zA),uh=Wu=null)}function zA(n){if(n.propertyName==="value"&&wg(uh)){var e=[];jA(e,uh,n,Hw(n)),wA(zP,e)}}function HP(n,e,t){n==="focusin"?($b(),Wu=e,uh=t,Wu.attachEvent("onpropertychange",zA)):n==="focusout"&&$b()}function UP(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return wg(uh)}function WP(n,e){if(n==="click")return wg(e)}function VP(n,e){if(n==="input"||n==="change")return wg(e)}function qP(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ps=typeof Object.is=="function"?Object.is:qP;function hh(n,e){if(Ps(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var i=t[s];if(!Jy.call(e,i)||!Ps(n[i],e[i]))return!1}return!0}function zb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Bb(n,e){var t=zb(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=zb(t)}}function BA(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?BA(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function HA(){for(var n=window,e=jp();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=jp(n.document)}return e}function Yw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function GP(n){var e=HA(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&BA(t.ownerDocument.documentElement,t)){if(s!==null&&Yw(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=Bb(t,r);var a=Bb(t,s);i&&a&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var XP=Ji&&"documentMode"in document&&11>=document.documentMode,pl=null,y0=null,Vu=null,v0=!1;function Hb(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;v0||pl==null||pl!==jp(s)||(s=pl,"selectionStart"in s&&Yw(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Vu&&hh(Vu,s)||(Vu=s,s=Vp(y0,"onSelect"),0<s.length&&(e=new Xw("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=pl)))}function mf(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ml={animationend:mf("Animation","AnimationEnd"),animationiteration:mf("Animation","AnimationIteration"),animationstart:mf("Animation","AnimationStart"),transitionend:mf("Transition","TransitionEnd")},ly={},UA={};Ji&&(UA=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function xg(n){if(ly[n])return ly[n];if(!ml[n])return n;var e=ml[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in UA)return ly[n]=e[t];return n}var WA=xg("animationend"),VA=xg("animationiteration"),qA=xg("animationstart"),GA=xg("transitionend"),XA=new Map,Ub="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ua(n,e){XA.set(n,e),Wo(e,[n])}for(var cy=0;cy<Ub.length;cy++){var uy=Ub[cy],KP=uy.toLowerCase(),QP=uy[0].toUpperCase()+uy.slice(1);ua(KP,"on"+QP)}ua(WA,"onAnimationEnd");ua(VA,"onAnimationIteration");ua(qA,"onAnimationStart");ua("dblclick","onDoubleClick");ua("focusin","onFocus");ua("focusout","onBlur");ua(GA,"onTransitionEnd");Dc("onMouseEnter",["mouseout","mouseover"]);Dc("onMouseLeave",["mouseout","mouseover"]);Dc("onPointerEnter",["pointerout","pointerover"]);Dc("onPointerLeave",["pointerout","pointerover"]);Wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YP=new Set("cancel close invalid load scroll toggle".split(" ").concat(wu));function Wb(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,KR(s,e,void 0,n),n.currentTarget=null}function KA(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var a=s.length-1;0<=a;a--){var o=s[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==r&&i.isPropagationStopped())break e;Wb(i,o,u),r=l}else for(a=0;a<s.length;a++){if(o=s[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==r&&i.isPropagationStopped())break e;Wb(i,o,u),r=l}}}if(zp)throw n=f0,zp=!1,f0=null,n}function Ne(n,e){var t=e[A0];t===void 0&&(t=e[A0]=new Set);var s=n+"__bubble";t.has(s)||(QA(e,n,2,!1),t.add(s))}function hy(n,e,t){var s=0;e&&(s|=4),QA(t,n,s,e)}var gf="_reactListening"+Math.random().toString(36).slice(2);function dh(n){if(!n[gf]){n[gf]=!0,sA.forEach(function(t){t!=="selectionchange"&&(YP.has(t)||hy(t,!1,n),hy(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[gf]||(e[gf]=!0,hy("selectionchange",!1,e))}}function QA(n,e,t,s){switch(IA(e)){case 1:var i=hP;break;case 4:i=dP;break;default:i=qw}t=i.bind(null,e,t,n),i=void 0,!d0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function dy(n,e,t,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var o=s.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=s.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Ea(o),a===null)return;if(l=a.tag,l===5||l===6){s=r=a;continue e}o=o.parentNode}}s=s.return}wA(function(){var u=r,h=Hw(t),d=[];e:{var f=XA.get(n);if(f!==void 0){var p=Xw,m=n;switch(n){case"keypress":if(qf(t)===0)break e;case"keydown":case"keyup":p=CP;break;case"focusin":m="focus",p=ry;break;case"focusout":m="blur",p=ry;break;case"beforeblur":case"afterblur":p=ry;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Nb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=mP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=PP;break;case WA:case VA:case qA:p=vP;break;case GA:p=NP;break;case"scroll":p=fP;break;case"wheel":p=LP;break;case"copy":case"cut":case"paste":p=xP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Lb}var v=(e&4)!==0,b=!v&&n==="scroll",y=v?f!==null?f+"Capture":null:f;v=[];for(var g=u,_;g!==null;){_=g;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,y!==null&&(E=ah(g,y),E!=null&&v.push(fh(g,E,_)))),b)break;g=g.return}0<v.length&&(f=new p(f,m,null,t,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==u0&&(m=t.relatedTarget||t.fromElement)&&(Ea(m)||m[Zi]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=t.relatedTarget||t.toElement,p=u,m=m?Ea(m):null,m!==null&&(b=Vo(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=Nb,E="onMouseLeave",y="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(v=Lb,E="onPointerLeave",y="onPointerEnter",g="pointer"),b=p==null?f:gl(p),_=m==null?f:gl(m),f=new v(E,g+"leave",p,t,h),f.target=b,f.relatedTarget=_,E=null,Ea(h)===u&&(v=new v(y,g+"enter",m,t,h),v.target=_,v.relatedTarget=b,E=v),b=E,p&&m)t:{for(v=p,y=m,g=0,_=v;_;_=Qo(_))g++;for(_=0,E=y;E;E=Qo(E))_++;for(;0<g-_;)v=Qo(v),g--;for(;0<_-g;)y=Qo(y),_--;for(;g--;){if(v===y||y!==null&&v===y.alternate)break t;v=Qo(v),y=Qo(y)}v=null}else v=null;p!==null&&Vb(d,f,p,v,!1),m!==null&&b!==null&&Vb(d,b,m,v,!0)}}e:{if(f=u?gl(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=BP;else if(Ob(f))if($A)C=VP;else{C=UP;var k=HP}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=WP);if(C&&(C=C(n,u))){jA(d,C,t,h);break e}k&&k(n,f,u),n==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&r0(f,"number",f.value)}switch(k=u?gl(u):window,n){case"focusin":(Ob(k)||k.contentEditable==="true")&&(pl=k,y0=u,Vu=null);break;case"focusout":Vu=y0=pl=null;break;case"mousedown":v0=!0;break;case"contextmenu":case"mouseup":case"dragend":v0=!1,Hb(d,t,h);break;case"selectionchange":if(XP)break;case"keydown":case"keyup":Hb(d,t,h)}var T;if(Qw)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else fl?DA(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(FA&&t.locale!=="ko"&&(fl||R!=="onCompositionStart"?R==="onCompositionEnd"&&fl&&(T=LA()):(qr=h,Gw="value"in qr?qr.value:qr.textContent,fl=!0)),k=Vp(u,R),0<k.length&&(R=new Ib(R,n,null,t,h),d.push({event:R,listeners:k}),T?R.data=T:(T=OA(t),T!==null&&(R.data=T)))),(T=DP?OP(n,t):jP(n,t))&&(u=Vp(u,"onBeforeInput"),0<u.length&&(h=new Ib("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=T))}KA(d,e)})}function fh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Vp(n,e){for(var t=e+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=ah(n,t),r!=null&&s.unshift(fh(n,r,i)),r=ah(n,e),r!=null&&s.push(fh(n,r,i))),n=n.return}return s}function Qo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Vb(n,e,t,s,i){for(var r=e._reactName,a=[];t!==null&&t!==s;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===s)break;o.tag===5&&u!==null&&(o=u,i?(l=ah(t,r),l!=null&&a.unshift(fh(t,l,o))):i||(l=ah(t,r),l!=null&&a.push(fh(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var JP=/\r\n?/g,ZP=/\u0000|\uFFFD/g;function qb(n){return(typeof n=="string"?n:""+n).replace(JP,`
`).replace(ZP,"")}function yf(n,e,t){if(e=qb(e),qb(n)!==e&&t)throw Error(F(425))}function qp(){}var w0=null,x0=null;function b0(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _0=typeof setTimeout=="function"?setTimeout:void 0,eM=typeof clearTimeout=="function"?clearTimeout:void 0,Gb=typeof Promise=="function"?Promise:void 0,tM=typeof queueMicrotask=="function"?queueMicrotask:typeof Gb<"u"?function(n){return Gb.resolve(null).then(n).catch(nM)}:_0;function nM(n){setTimeout(function(){throw n})}function fy(n,e){var t=e,s=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(s===0){n.removeChild(i),ch(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=i}while(t);ch(e)}function Zr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Xb(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Gc=Math.random().toString(36).slice(2),ii="__reactFiber$"+Gc,ph="__reactProps$"+Gc,Zi="__reactContainer$"+Gc,A0="__reactEvents$"+Gc,sM="__reactListeners$"+Gc,iM="__reactHandles$"+Gc;function Ea(n){var e=n[ii];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Zi]||t[ii]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Xb(n);n!==null;){if(t=n[ii])return t;n=Xb(n)}return e}n=t,t=n.parentNode}return null}function Kd(n){return n=n[ii]||n[Zi],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function gl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(F(33))}function bg(n){return n[ph]||null}var S0=[],yl=-1;function ha(n){return{current:n}}function Ie(n){0>yl||(n.current=S0[yl],S0[yl]=null,yl--)}function Pe(n,e){yl++,S0[yl]=n.current,n.current=e}var ra={},Vt=ha(ra),gn=ha(!1),Mo=ra;function Oc(n,e){var t=n.type.contextTypes;if(!t)return ra;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in t)i[r]=e[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function yn(n){return n=n.childContextTypes,n!=null}function Gp(){Ie(gn),Ie(Vt)}function Kb(n,e,t){if(Vt.current!==ra)throw Error(F(168));Pe(Vt,e),Pe(gn,t)}function YA(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(F(108,HR(n)||"Unknown",i));return We({},t,s)}function Xp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ra,Mo=Vt.current,Pe(Vt,n),Pe(gn,gn.current),!0}function Qb(n,e,t){var s=n.stateNode;if(!s)throw Error(F(169));t?(n=YA(n,e,Mo),s.__reactInternalMemoizedMergedChildContext=n,Ie(gn),Ie(Vt),Pe(Vt,n)):Ie(gn),Pe(gn,t)}var bi=null,_g=!1,py=!1;function JA(n){bi===null?bi=[n]:bi.push(n)}function rM(n){_g=!0,JA(n)}function da(){if(!py&&bi!==null){py=!0;var n=0,e=be;try{var t=bi;for(be=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}bi=null,_g=!1}catch(i){throw bi!==null&&(bi=bi.slice(n+1)),AA(Uw,da),i}finally{be=e,py=!1}}return null}var vl=[],wl=0,Kp=null,Qp=0,Qn=[],Yn=0,No=null,qi=1,Gi="";function ga(n,e){vl[wl++]=Qp,vl[wl++]=Kp,Kp=n,Qp=e}function ZA(n,e,t){Qn[Yn++]=qi,Qn[Yn++]=Gi,Qn[Yn++]=No,No=n;var s=qi;n=Gi;var i=32-Ts(s)-1;s&=~(1<<i),t+=1;var r=32-Ts(e)+i;if(30<r){var a=i-i%5;r=(s&(1<<a)-1).toString(32),s>>=a,i-=a,qi=1<<32-Ts(e)+i|t<<i|s,Gi=r+n}else qi=1<<r|t<<i|s,Gi=n}function Jw(n){n.return!==null&&(ga(n,1),ZA(n,1,0))}function Zw(n){for(;n===Kp;)Kp=vl[--wl],vl[wl]=null,Qp=vl[--wl],vl[wl]=null;for(;n===No;)No=Qn[--Yn],Qn[Yn]=null,Gi=Qn[--Yn],Qn[Yn]=null,qi=Qn[--Yn],Qn[Yn]=null}var jn=null,On=null,De=!1,Es=null;function eS(n,e){var t=es(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Yb(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,jn=n,On=Zr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,jn=n,On=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=No!==null?{id:qi,overflow:Gi}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=es(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,jn=n,On=null,!0):!1;default:return!1}}function E0(n){return(n.mode&1)!==0&&(n.flags&128)===0}function k0(n){if(De){var e=On;if(e){var t=e;if(!Yb(n,e)){if(E0(n))throw Error(F(418));e=Zr(t.nextSibling);var s=jn;e&&Yb(n,e)?eS(s,t):(n.flags=n.flags&-4097|2,De=!1,jn=n)}}else{if(E0(n))throw Error(F(418));n.flags=n.flags&-4097|2,De=!1,jn=n}}}function Jb(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;jn=n}function vf(n){if(n!==jn)return!1;if(!De)return Jb(n),De=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!b0(n.type,n.memoizedProps)),e&&(e=On)){if(E0(n))throw tS(),Error(F(418));for(;e;)eS(n,e),e=Zr(e.nextSibling)}if(Jb(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(F(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){On=Zr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}On=null}}else On=jn?Zr(n.stateNode.nextSibling):null;return!0}function tS(){for(var n=On;n;)n=Zr(n.nextSibling)}function jc(){On=jn=null,De=!1}function ex(n){Es===null?Es=[n]:Es.push(n)}var aM=ar.ReactCurrentBatchConfig;function su(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(F(309));var s=t.stateNode}if(!s)throw Error(F(147,n));var i=s,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=i.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof n!="string")throw Error(F(284));if(!t._owner)throw Error(F(290,n))}return n}function wf(n,e){throw n=Object.prototype.toString.call(e),Error(F(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Zb(n){var e=n._init;return e(n._payload)}function nS(n){function e(y,g){if(n){var _=y.deletions;_===null?(y.deletions=[g],y.flags|=16):_.push(g)}}function t(y,g){if(!n)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function s(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=sa(y,g),y.index=0,y.sibling=null,y}function r(y,g,_){return y.index=_,n?(_=y.alternate,_!==null?(_=_.index,_<g?(y.flags|=2,g):_):(y.flags|=2,g)):(y.flags|=1048576,g)}function a(y){return n&&y.alternate===null&&(y.flags|=2),y}function o(y,g,_,E){return g===null||g.tag!==6?(g=by(_,y.mode,E),g.return=y,g):(g=i(g,_),g.return=y,g)}function l(y,g,_,E){var C=_.type;return C===dl?h(y,g,_.props.children,E,_.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===mr&&Zb(C)===g.type)?(E=i(g,_.props),E.ref=su(y,g,_),E.return=y,E):(E=Zf(_.type,_.key,_.props,null,y.mode,E),E.ref=su(y,g,_),E.return=y,E)}function u(y,g,_,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=_y(_,y.mode,E),g.return=y,g):(g=i(g,_.children||[]),g.return=y,g)}function h(y,g,_,E,C){return g===null||g.tag!==7?(g=Ro(_,y.mode,E,C),g.return=y,g):(g=i(g,_),g.return=y,g)}function d(y,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=by(""+g,y.mode,_),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case lf:return _=Zf(g.type,g.key,g.props,null,y.mode,_),_.ref=su(y,null,g),_.return=y,_;case hl:return g=_y(g,y.mode,_),g.return=y,g;case mr:var E=g._init;return d(y,E(g._payload),_)}if(yu(g)||Jc(g))return g=Ro(g,y.mode,_,null),g.return=y,g;wf(y,g)}return null}function f(y,g,_,E){var C=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return C!==null?null:o(y,g,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case lf:return _.key===C?l(y,g,_,E):null;case hl:return _.key===C?u(y,g,_,E):null;case mr:return C=_._init,f(y,g,C(_._payload),E)}if(yu(_)||Jc(_))return C!==null?null:h(y,g,_,E,null);wf(y,_)}return null}function p(y,g,_,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(_)||null,o(g,y,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case lf:return y=y.get(E.key===null?_:E.key)||null,l(g,y,E,C);case hl:return y=y.get(E.key===null?_:E.key)||null,u(g,y,E,C);case mr:var k=E._init;return p(y,g,_,k(E._payload),C)}if(yu(E)||Jc(E))return y=y.get(_)||null,h(g,y,E,C,null);wf(g,E)}return null}function m(y,g,_,E){for(var C=null,k=null,T=g,R=g=0,N=null;T!==null&&R<_.length;R++){T.index>R?(N=T,T=null):N=T.sibling;var P=f(y,T,_[R],E);if(P===null){T===null&&(T=N);break}n&&T&&P.alternate===null&&e(y,T),g=r(P,g,R),k===null?C=P:k.sibling=P,k=P,T=N}if(R===_.length)return t(y,T),De&&ga(y,R),C;if(T===null){for(;R<_.length;R++)T=d(y,_[R],E),T!==null&&(g=r(T,g,R),k===null?C=T:k.sibling=T,k=T);return De&&ga(y,R),C}for(T=s(y,T);R<_.length;R++)N=p(T,y,R,_[R],E),N!==null&&(n&&N.alternate!==null&&T.delete(N.key===null?R:N.key),g=r(N,g,R),k===null?C=N:k.sibling=N,k=N);return n&&T.forEach(function(L){return e(y,L)}),De&&ga(y,R),C}function v(y,g,_,E){var C=Jc(_);if(typeof C!="function")throw Error(F(150));if(_=C.call(_),_==null)throw Error(F(151));for(var k=C=null,T=g,R=g=0,N=null,P=_.next();T!==null&&!P.done;R++,P=_.next()){T.index>R?(N=T,T=null):N=T.sibling;var L=f(y,T,P.value,E);if(L===null){T===null&&(T=N);break}n&&T&&L.alternate===null&&e(y,T),g=r(L,g,R),k===null?C=L:k.sibling=L,k=L,T=N}if(P.done)return t(y,T),De&&ga(y,R),C;if(T===null){for(;!P.done;R++,P=_.next())P=d(y,P.value,E),P!==null&&(g=r(P,g,R),k===null?C=P:k.sibling=P,k=P);return De&&ga(y,R),C}for(T=s(y,T);!P.done;R++,P=_.next())P=p(T,y,R,P.value,E),P!==null&&(n&&P.alternate!==null&&T.delete(P.key===null?R:P.key),g=r(P,g,R),k===null?C=P:k.sibling=P,k=P);return n&&T.forEach(function(z){return e(y,z)}),De&&ga(y,R),C}function b(y,g,_,E){if(typeof _=="object"&&_!==null&&_.type===dl&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case lf:e:{for(var C=_.key,k=g;k!==null;){if(k.key===C){if(C=_.type,C===dl){if(k.tag===7){t(y,k.sibling),g=i(k,_.props.children),g.return=y,y=g;break e}}else if(k.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===mr&&Zb(C)===k.type){t(y,k.sibling),g=i(k,_.props),g.ref=su(y,k,_),g.return=y,y=g;break e}t(y,k);break}else e(y,k);k=k.sibling}_.type===dl?(g=Ro(_.props.children,y.mode,E,_.key),g.return=y,y=g):(E=Zf(_.type,_.key,_.props,null,y.mode,E),E.ref=su(y,g,_),E.return=y,y=E)}return a(y);case hl:e:{for(k=_.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){t(y,g.sibling),g=i(g,_.children||[]),g.return=y,y=g;break e}else{t(y,g);break}else e(y,g);g=g.sibling}g=_y(_,y.mode,E),g.return=y,y=g}return a(y);case mr:return k=_._init,b(y,g,k(_._payload),E)}if(yu(_))return m(y,g,_,E);if(Jc(_))return v(y,g,_,E);wf(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(t(y,g.sibling),g=i(g,_),g.return=y,y=g):(t(y,g),g=by(_,y.mode,E),g.return=y,y=g),a(y)):t(y,g)}return b}var $c=nS(!0),sS=nS(!1),Yp=ha(null),Jp=null,xl=null,tx=null;function nx(){tx=xl=Jp=null}function sx(n){var e=Yp.current;Ie(Yp),n._currentValue=e}function C0(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function Rl(n,e){Jp=n,tx=xl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(pn=!0),n.firstContext=null)}function ss(n){var e=n._currentValue;if(tx!==n)if(n={context:n,memoizedValue:e,next:null},xl===null){if(Jp===null)throw Error(F(308));xl=n,Jp.dependencies={lanes:0,firstContext:n}}else xl=xl.next=n;return e}var ka=null;function ix(n){ka===null?ka=[n]:ka.push(n)}function iS(n,e,t,s){var i=e.interleaved;return i===null?(t.next=t,ix(e)):(t.next=i.next,i.next=t),e.interleaved=t,er(n,s)}function er(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var gr=!1;function rx(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rS(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Xi(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ea(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,fe&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,er(n,t)}return i=s.interleaved,i===null?(e.next=e,ix(s)):(e.next=i.next,i.next=e),s.interleaved=e,er(n,t)}function Gf(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,Ww(n,t)}}function e_(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var i=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?i=r=a:r=r.next=a,t=t.next}while(t!==null);r===null?i=r=e:r=r.next=e}else i=r=e;t={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Zp(n,e,t,s){var i=n.updateQueue;gr=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?r=u:a.next=u,a=l;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=l))}if(r!==null){var d=i.baseState;a=0,h=u=l=null,o=r;do{var f=o.lane,p=o.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=n,v=o;switch(f=e,p=t,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=We({},d,f);break e;case 2:gr=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=p,l=d):h=h.next=p,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);Lo|=a,n.lanes=a,n.memoizedState=d}}function t_(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],i=s.callback;if(i!==null){if(s.callback=null,s=t,typeof i!="function")throw Error(F(191,i));i.call(s)}}}var Qd={},li=ha(Qd),mh=ha(Qd),gh=ha(Qd);function Ca(n){if(n===Qd)throw Error(F(174));return n}function ax(n,e){switch(Pe(gh,e),Pe(mh,n),Pe(li,Qd),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:o0(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=o0(e,n)}Ie(li),Pe(li,e)}function zc(){Ie(li),Ie(mh),Ie(gh)}function aS(n){Ca(gh.current);var e=Ca(li.current),t=o0(e,n.type);e!==t&&(Pe(mh,n),Pe(li,t))}function ox(n){mh.current===n&&(Ie(li),Ie(mh))}var He=ha(0);function em(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var my=[];function lx(){for(var n=0;n<my.length;n++)my[n]._workInProgressVersionPrimary=null;my.length=0}var Xf=ar.ReactCurrentDispatcher,gy=ar.ReactCurrentBatchConfig,Io=0,Ue=null,ft=null,At=null,tm=!1,qu=!1,yh=0,oM=0;function Lt(){throw Error(F(321))}function cx(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ps(n[t],e[t]))return!1;return!0}function ux(n,e,t,s,i,r){if(Io=r,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xf.current=n===null||n.memoizedState===null?hM:dM,n=t(s,i),qu){r=0;do{if(qu=!1,yh=0,25<=r)throw Error(F(301));r+=1,At=ft=null,e.updateQueue=null,Xf.current=fM,n=t(s,i)}while(qu)}if(Xf.current=nm,e=ft!==null&&ft.next!==null,Io=0,At=ft=Ue=null,tm=!1,e)throw Error(F(300));return n}function hx(){var n=yh!==0;return yh=0,n}function Ds(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Ue.memoizedState=At=n:At=At.next=n,At}function is(){if(ft===null){var n=Ue.alternate;n=n!==null?n.memoizedState:null}else n=ft.next;var e=At===null?Ue.memoizedState:At.next;if(e!==null)At=e,ft=n;else{if(n===null)throw Error(F(310));ft=n,n={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},At===null?Ue.memoizedState=At=n:At=At.next=n}return At}function vh(n,e){return typeof e=="function"?e(n):e}function yy(n){var e=is(),t=e.queue;if(t===null)throw Error(F(311));t.lastRenderedReducer=n;var s=ft,i=s.baseQueue,r=t.pending;if(r!==null){if(i!==null){var a=i.next;i.next=r.next,r.next=a}s.baseQueue=i=r,t.pending=null}if(i!==null){r=i.next,s=s.baseState;var o=a=null,l=null,u=r;do{var h=u.lane;if((Io&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,a=s):l=l.next=d,Ue.lanes|=h,Lo|=h}u=u.next}while(u!==null&&u!==r);l===null?a=s:l.next=o,Ps(s,e.memoizedState)||(pn=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=l,t.lastRenderedState=s}if(n=t.interleaved,n!==null){i=n;do r=i.lane,Ue.lanes|=r,Lo|=r,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function vy(n){var e=is(),t=e.queue;if(t===null)throw Error(F(311));t.lastRenderedReducer=n;var s=t.dispatch,i=t.pending,r=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do r=n(r,a.action),a=a.next;while(a!==i);Ps(r,e.memoizedState)||(pn=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,s]}function oS(){}function lS(n,e){var t=Ue,s=is(),i=e(),r=!Ps(s.memoizedState,i);if(r&&(s.memoizedState=i,pn=!0),s=s.queue,dx(hS.bind(null,t,s,n),[n]),s.getSnapshot!==e||r||At!==null&&At.memoizedState.tag&1){if(t.flags|=2048,wh(9,uS.bind(null,t,s,i,e),void 0,null),St===null)throw Error(F(349));Io&30||cS(t,e,i)}return i}function cS(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function uS(n,e,t,s){e.value=t,e.getSnapshot=s,dS(e)&&fS(n)}function hS(n,e,t){return t(function(){dS(e)&&fS(n)})}function dS(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ps(n,t)}catch{return!0}}function fS(n){var e=er(n,1);e!==null&&Rs(e,n,1,-1)}function n_(n){var e=Ds();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vh,lastRenderedState:n},e.queue=n,n=n.dispatch=uM.bind(null,Ue,n),[e.memoizedState,n]}function wh(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function pS(){return is().memoizedState}function Kf(n,e,t,s){var i=Ds();Ue.flags|=n,i.memoizedState=wh(1|e,t,void 0,s===void 0?null:s)}function Ag(n,e,t,s){var i=is();s=s===void 0?null:s;var r=void 0;if(ft!==null){var a=ft.memoizedState;if(r=a.destroy,s!==null&&cx(s,a.deps)){i.memoizedState=wh(e,t,r,s);return}}Ue.flags|=n,i.memoizedState=wh(1|e,t,r,s)}function s_(n,e){return Kf(8390656,8,n,e)}function dx(n,e){return Ag(2048,8,n,e)}function mS(n,e){return Ag(4,2,n,e)}function gS(n,e){return Ag(4,4,n,e)}function yS(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function vS(n,e,t){return t=t!=null?t.concat([n]):null,Ag(4,4,yS.bind(null,e,n),t)}function fx(){}function wS(n,e){var t=is();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&cx(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function xS(n,e){var t=is();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&cx(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function bS(n,e,t){return Io&21?(Ps(t,e)||(t=kA(),Ue.lanes|=t,Lo|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,pn=!0),n.memoizedState=t)}function lM(n,e){var t=be;be=t!==0&&4>t?t:4,n(!0);var s=gy.transition;gy.transition={};try{n(!1),e()}finally{be=t,gy.transition=s}}function _S(){return is().memoizedState}function cM(n,e,t){var s=na(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},AS(n))SS(e,t);else if(t=iS(n,e,t,s),t!==null){var i=Yt();Rs(t,n,s,i),ES(t,e,s)}}function uM(n,e,t){var s=na(n),i={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(AS(n))SS(e,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,t);if(i.hasEagerState=!0,i.eagerState=o,Ps(o,a)){var l=e.interleaved;l===null?(i.next=i,ix(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=iS(n,e,i,s),t!==null&&(i=Yt(),Rs(t,n,s,i),ES(t,e,s))}}function AS(n){var e=n.alternate;return n===Ue||e!==null&&e===Ue}function SS(n,e){qu=tm=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function ES(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,Ww(n,t)}}var nm={readContext:ss,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},hM={readContext:ss,useCallback:function(n,e){return Ds().memoizedState=[n,e===void 0?null:e],n},useContext:ss,useEffect:s_,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Kf(4194308,4,yS.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Kf(4194308,4,n,e)},useInsertionEffect:function(n,e){return Kf(4,2,n,e)},useMemo:function(n,e){var t=Ds();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=Ds();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=cM.bind(null,Ue,n),[s.memoizedState,n]},useRef:function(n){var e=Ds();return n={current:n},e.memoizedState=n},useState:n_,useDebugValue:fx,useDeferredValue:function(n){return Ds().memoizedState=n},useTransition:function(){var n=n_(!1),e=n[0];return n=lM.bind(null,n[1]),Ds().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=Ue,i=Ds();if(De){if(t===void 0)throw Error(F(407));t=t()}else{if(t=e(),St===null)throw Error(F(349));Io&30||cS(s,e,t)}i.memoizedState=t;var r={value:t,getSnapshot:e};return i.queue=r,s_(hS.bind(null,s,r,n),[n]),s.flags|=2048,wh(9,uS.bind(null,s,r,t,e),void 0,null),t},useId:function(){var n=Ds(),e=St.identifierPrefix;if(De){var t=Gi,s=qi;t=(s&~(1<<32-Ts(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=yh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=oM++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},dM={readContext:ss,useCallback:wS,useContext:ss,useEffect:dx,useImperativeHandle:vS,useInsertionEffect:mS,useLayoutEffect:gS,useMemo:xS,useReducer:yy,useRef:pS,useState:function(){return yy(vh)},useDebugValue:fx,useDeferredValue:function(n){var e=is();return bS(e,ft.memoizedState,n)},useTransition:function(){var n=yy(vh)[0],e=is().memoizedState;return[n,e]},useMutableSource:oS,useSyncExternalStore:lS,useId:_S,unstable_isNewReconciler:!1},fM={readContext:ss,useCallback:wS,useContext:ss,useEffect:dx,useImperativeHandle:vS,useInsertionEffect:mS,useLayoutEffect:gS,useMemo:xS,useReducer:vy,useRef:pS,useState:function(){return vy(vh)},useDebugValue:fx,useDeferredValue:function(n){var e=is();return ft===null?e.memoizedState=n:bS(e,ft.memoizedState,n)},useTransition:function(){var n=vy(vh)[0],e=is().memoizedState;return[n,e]},useMutableSource:oS,useSyncExternalStore:lS,useId:_S,unstable_isNewReconciler:!1};function cs(n,e){if(n&&n.defaultProps){e=We({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function T0(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:We({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Sg={isMounted:function(n){return(n=n._reactInternals)?Vo(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=Yt(),i=na(n),r=Xi(s,i);r.payload=e,t!=null&&(r.callback=t),e=ea(n,r,i),e!==null&&(Rs(e,n,i,s),Gf(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=Yt(),i=na(n),r=Xi(s,i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=ea(n,r,i),e!==null&&(Rs(e,n,i,s),Gf(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Yt(),s=na(n),i=Xi(t,s);i.tag=2,e!=null&&(i.callback=e),e=ea(n,i,s),e!==null&&(Rs(e,n,s,t),Gf(e,n,s))}};function i_(n,e,t,s,i,r,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,a):e.prototype&&e.prototype.isPureReactComponent?!hh(t,s)||!hh(i,r):!0}function kS(n,e,t){var s=!1,i=ra,r=e.contextType;return typeof r=="object"&&r!==null?r=ss(r):(i=yn(e)?Mo:Vt.current,s=e.contextTypes,r=(s=s!=null)?Oc(n,i):ra),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sg,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),e}function r_(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&Sg.enqueueReplaceState(e,e.state,null)}function R0(n,e,t,s){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},rx(n);var r=e.contextType;typeof r=="object"&&r!==null?i.context=ss(r):(r=yn(e)?Mo:Vt.current,i.context=Oc(n,r)),i.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(T0(n,e,r,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Sg.enqueueReplaceState(i,i.state,null),Zp(n,t,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Bc(n,e){try{var t="",s=e;do t+=BR(s),s=s.return;while(s);var i=t}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:i,digest:null}}function wy(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function P0(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var pM=typeof WeakMap=="function"?WeakMap:Map;function CS(n,e,t){t=Xi(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){im||(im=!0,z0=s),P0(n,e)},t}function TS(n,e,t){t=Xi(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;t.payload=function(){return s(i)},t.callback=function(){P0(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){P0(n,e),typeof s!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function a_(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new pM;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(t)||(i.add(t),n=TM.bind(null,n,e,t),e.then(n,n))}function o_(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function l_(n,e,t,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Xi(-1,1),e.tag=2,ea(t,e,1))),t.lanes|=1),n)}var mM=ar.ReactCurrentOwner,pn=!1;function Kt(n,e,t,s){e.child=n===null?sS(e,null,t,s):$c(e,n.child,t,s)}function c_(n,e,t,s,i){t=t.render;var r=e.ref;return Rl(e,i),s=ux(n,e,t,s,r,i),t=hx(),n!==null&&!pn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,tr(n,e,i)):(De&&t&&Jw(e),e.flags|=1,Kt(n,e,s,i),e.child)}function u_(n,e,t,s,i){if(n===null){var r=t.type;return typeof r=="function"&&!bx(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,RS(n,e,r,s,i)):(n=Zf(t.type,null,s,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&i)){var a=r.memoizedProps;if(t=t.compare,t=t!==null?t:hh,t(a,s)&&n.ref===e.ref)return tr(n,e,i)}return e.flags|=1,n=sa(r,s),n.ref=e.ref,n.return=e,e.child=n}function RS(n,e,t,s,i){if(n!==null){var r=n.memoizedProps;if(hh(r,s)&&n.ref===e.ref)if(pn=!1,e.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&(pn=!0);else return e.lanes=n.lanes,tr(n,e,i)}return M0(n,e,t,s,i)}function PS(n,e,t){var s=e.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(_l,Ln),Ln|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Pe(_l,Ln),Ln|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:t,Pe(_l,Ln),Ln|=s}else r!==null?(s=r.baseLanes|t,e.memoizedState=null):s=t,Pe(_l,Ln),Ln|=s;return Kt(n,e,i,t),e.child}function MS(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function M0(n,e,t,s,i){var r=yn(t)?Mo:Vt.current;return r=Oc(e,r),Rl(e,i),t=ux(n,e,t,s,r,i),s=hx(),n!==null&&!pn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,tr(n,e,i)):(De&&s&&Jw(e),e.flags|=1,Kt(n,e,t,i),e.child)}function h_(n,e,t,s,i){if(yn(t)){var r=!0;Xp(e)}else r=!1;if(Rl(e,i),e.stateNode===null)Qf(n,e),kS(e,t,s),R0(e,t,s,i),s=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=ss(u):(u=yn(t)?Mo:Vt.current,u=Oc(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==s||l!==u)&&r_(e,a,s,u),gr=!1;var f=e.memoizedState;a.state=f,Zp(e,s,a,i),l=e.memoizedState,o!==s||f!==l||gn.current||gr?(typeof h=="function"&&(T0(e,t,h,s),l=e.memoizedState),(o=gr||i_(e,t,o,s,f,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),a.props=s,a.state=l,a.context=u,s=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,rS(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:cs(e.type,o),a.props=u,d=e.pendingProps,f=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=ss(l):(l=yn(t)?Mo:Vt.current,l=Oc(e,l));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==l)&&r_(e,a,s,l),gr=!1,f=e.memoizedState,a.state=f,Zp(e,s,a,i);var m=e.memoizedState;o!==d||f!==m||gn.current||gr?(typeof p=="function"&&(T0(e,t,p,s),m=e.memoizedState),(u=gr||i_(e,t,u,s,f,m,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),a.props=s,a.state=m,a.context=l,s=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),s=!1)}return N0(n,e,t,s,r,i)}function N0(n,e,t,s,i,r){MS(n,e);var a=(e.flags&128)!==0;if(!s&&!a)return i&&Qb(e,t,!1),tr(n,e,r);s=e.stateNode,mM.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&a?(e.child=$c(e,n.child,null,r),e.child=$c(e,null,o,r)):Kt(n,e,o,r),e.memoizedState=s.state,i&&Qb(e,t,!0),e.child}function NS(n){var e=n.stateNode;e.pendingContext?Kb(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Kb(n,e.context,!1),ax(n,e.containerInfo)}function d_(n,e,t,s,i){return jc(),ex(i),e.flags|=256,Kt(n,e,t,s),e.child}var I0={dehydrated:null,treeContext:null,retryLane:0};function L0(n){return{baseLanes:n,cachePool:null,transitions:null}}function IS(n,e,t){var s=e.pendingProps,i=He.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Pe(He,i&1),n===null)return k0(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,n=s.fallback,r?(s=e.mode,r=e.child,a={mode:"hidden",children:a},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=Cg(a,s,0,null),n=Ro(n,s,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=L0(t),e.memoizedState=I0,n):px(e,a));if(i=n.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return gM(n,e,a,s,o,i,t);if(r){r=s.fallback,a=e.mode,i=n.child,o=i.sibling;var l={mode:"hidden",children:s.children};return!(a&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=sa(i,l),s.subtreeFlags=i.subtreeFlags&14680064),o!==null?r=sa(o,r):(r=Ro(r,a,t,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,a=n.child.memoizedState,a=a===null?L0(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=n.childLanes&~t,e.memoizedState=I0,s}return r=n.child,n=r.sibling,s=sa(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function px(n,e){return e=Cg({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function xf(n,e,t,s){return s!==null&&ex(s),$c(e,n.child,null,t),n=px(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function gM(n,e,t,s,i,r,a){if(t)return e.flags&256?(e.flags&=-257,s=wy(Error(F(422))),xf(n,e,a,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=s.fallback,i=e.mode,s=Cg({mode:"visible",children:s.children},i,0,null),r=Ro(r,i,a,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&$c(e,n.child,null,a),e.child.memoizedState=L0(a),e.memoizedState=I0,r);if(!(e.mode&1))return xf(n,e,a,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var o=s.dgst;return s=o,r=Error(F(419)),s=wy(r,s,void 0),xf(n,e,a,s)}if(o=(a&n.childLanes)!==0,pn||o){if(s=St,s!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|a)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,er(n,i),Rs(s,n,i,-1))}return xx(),s=wy(Error(F(421))),xf(n,e,a,s)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=RM.bind(null,n),i._reactRetry=e,null):(n=r.treeContext,On=Zr(i.nextSibling),jn=e,De=!0,Es=null,n!==null&&(Qn[Yn++]=qi,Qn[Yn++]=Gi,Qn[Yn++]=No,qi=n.id,Gi=n.overflow,No=e),e=px(e,s.children),e.flags|=4096,e)}function f_(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),C0(n.return,e,t)}function xy(n,e,t,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=t,r.tailMode=i)}function LS(n,e,t){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if(Kt(n,e,s.children,t),s=He.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&f_(n,t,e);else if(n.tag===19)f_(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(Pe(He,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&em(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),xy(e,!1,i,t,r);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&em(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}xy(e,!0,t,null,r);break;case"together":xy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qf(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function tr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Lo|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(F(153));if(e.child!==null){for(n=e.child,t=sa(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=sa(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function yM(n,e,t){switch(e.tag){case 3:NS(e),jc();break;case 5:aS(e);break;case 1:yn(e.type)&&Xp(e);break;case 4:ax(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;Pe(Yp,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Pe(He,He.current&1),e.flags|=128,null):t&e.child.childLanes?IS(n,e,t):(Pe(He,He.current&1),n=tr(n,e,t),n!==null?n.sibling:null);Pe(He,He.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return LS(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(He,He.current),s)break;return null;case 22:case 23:return e.lanes=0,PS(n,e,t)}return tr(n,e,t)}var FS,F0,DS,OS;FS=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};F0=function(){};DS=function(n,e,t,s){var i=n.memoizedProps;if(i!==s){n=e.stateNode,Ca(li.current);var r=null;switch(t){case"input":i=s0(n,i),s=s0(n,s),r=[];break;case"select":i=We({},i,{value:void 0}),s=We({},s,{value:void 0}),r=[];break;case"textarea":i=a0(n,i),s=a0(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=qp)}l0(t,s);var a;t=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ih.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var l=s[u];if(o=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(r||(r=[]),r.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ih.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ne("scroll",n),r||o===l||(r=[])):(r=r||[]).push(u,l))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};OS=function(n,e,t,s){t!==s&&(e.flags|=4)};function iu(n,e){if(!De)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function Ft(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function vM(n,e,t){var s=e.pendingProps;switch(Zw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return yn(e.type)&&Gp(),Ft(e),null;case 3:return s=e.stateNode,zc(),Ie(gn),Ie(Vt),lx(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(vf(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Es!==null&&(U0(Es),Es=null))),F0(n,e),Ft(e),null;case 5:ox(e);var i=Ca(gh.current);if(t=e.type,n!==null&&e.stateNode!=null)DS(n,e,t,s,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(F(166));return Ft(e),null}if(n=Ca(li.current),vf(e)){s=e.stateNode,t=e.type;var r=e.memoizedProps;switch(s[ii]=e,s[ph]=r,n=(e.mode&1)!==0,t){case"dialog":Ne("cancel",s),Ne("close",s);break;case"iframe":case"object":case"embed":Ne("load",s);break;case"video":case"audio":for(i=0;i<wu.length;i++)Ne(wu[i],s);break;case"source":Ne("error",s);break;case"img":case"image":case"link":Ne("error",s),Ne("load",s);break;case"details":Ne("toggle",s);break;case"input":_b(s,r),Ne("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Ne("invalid",s);break;case"textarea":Sb(s,r),Ne("invalid",s)}l0(t,r),i=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?s.textContent!==o&&(r.suppressHydrationWarning!==!0&&yf(s.textContent,o,n),i=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&yf(s.textContent,o,n),i=["children",""+o]):ih.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Ne("scroll",s)}switch(t){case"input":cf(s),Ab(s,r,!0);break;case"textarea":cf(s),Eb(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=qp)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=hA(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=a.createElement(t,{is:s.is}):(n=a.createElement(t),t==="select"&&(a=n,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):n=a.createElementNS(n,t),n[ii]=e,n[ph]=s,FS(n,e,!1,!1),e.stateNode=n;e:{switch(a=c0(t,s),t){case"dialog":Ne("cancel",n),Ne("close",n),i=s;break;case"iframe":case"object":case"embed":Ne("load",n),i=s;break;case"video":case"audio":for(i=0;i<wu.length;i++)Ne(wu[i],n);i=s;break;case"source":Ne("error",n),i=s;break;case"img":case"image":case"link":Ne("error",n),Ne("load",n),i=s;break;case"details":Ne("toggle",n),i=s;break;case"input":_b(n,s),i=s0(n,s),Ne("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=We({},s,{value:void 0}),Ne("invalid",n);break;case"textarea":Sb(n,s),i=a0(n,s),Ne("invalid",n);break;default:i=s}l0(t,i),o=i;for(r in o)if(o.hasOwnProperty(r)){var l=o[r];r==="style"?pA(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&dA(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&rh(n,l):typeof l=="number"&&rh(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(ih.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Ne("scroll",n):l!=null&&jw(n,r,l,a))}switch(t){case"input":cf(n),Ab(n,s,!1);break;case"textarea":cf(n),Eb(n);break;case"option":s.value!=null&&n.setAttribute("value",""+ia(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?El(n,!!s.multiple,r,!1):s.defaultValue!=null&&El(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=qp)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(n&&e.stateNode!=null)OS(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(F(166));if(t=Ca(gh.current),Ca(li.current),vf(e)){if(s=e.stateNode,t=e.memoizedProps,s[ii]=e,(r=s.nodeValue!==t)&&(n=jn,n!==null))switch(n.tag){case 3:yf(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&yf(s.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[ii]=e,e.stateNode=s}return Ft(e),null;case 13:if(Ie(He),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(De&&On!==null&&e.mode&1&&!(e.flags&128))tS(),jc(),e.flags|=98560,r=!1;else if(r=vf(e),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(F(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(F(317));r[ii]=e}else jc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),r=!1}else Es!==null&&(U0(Es),Es=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||He.current&1?mt===0&&(mt=3):xx())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return zc(),F0(n,e),n===null&&dh(e.stateNode.containerInfo),Ft(e),null;case 10:return sx(e.type._context),Ft(e),null;case 17:return yn(e.type)&&Gp(),Ft(e),null;case 19:if(Ie(He),r=e.memoizedState,r===null)return Ft(e),null;if(s=(e.flags&128)!==0,a=r.rendering,a===null)if(s)iu(r,!1);else{if(mt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=em(n),a!==null){for(e.flags|=128,iu(r,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)r=t,n=s,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,n=a.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Pe(He,He.current&1|2),e.child}n=n.sibling}r.tail!==null&&Ke()>Hc&&(e.flags|=128,s=!0,iu(r,!1),e.lanes=4194304)}else{if(!s)if(n=em(a),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),iu(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!De)return Ft(e),null}else 2*Ke()-r.renderingStartTime>Hc&&t!==1073741824&&(e.flags|=128,s=!0,iu(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Ke(),e.sibling=null,t=He.current,Pe(He,s?t&1|2:t&1),e):(Ft(e),null);case 22:case 23:return wx(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Ln&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function wM(n,e){switch(Zw(e),e.tag){case 1:return yn(e.type)&&Gp(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return zc(),Ie(gn),Ie(Vt),lx(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return ox(e),null;case 13:if(Ie(He),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(F(340));jc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ie(He),null;case 4:return zc(),null;case 10:return sx(e.type._context),null;case 22:case 23:return wx(),null;case 24:return null;default:return null}}var bf=!1,Ut=!1,xM=typeof WeakSet=="function"?WeakSet:Set,B=null;function bl(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){qe(n,e,s)}else t.current=null}function D0(n,e,t){try{t()}catch(s){qe(n,e,s)}}var p_=!1;function bM(n,e){if(w0=Up,n=HA(),Yw(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var p;d!==t||i!==0&&d.nodeType!==3||(o=a+i),d!==r||s!==0&&d.nodeType!==3||(l=a+s),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===t&&++u===i&&(o=a),f===r&&++h===s&&(l=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(x0={focusedElem:n,selectionRange:t},Up=!1,B=e;B!==null;)if(e=B,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,B=n;else for(;B!==null;){e=B;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,b=m.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:cs(e.type,v),b);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(E){qe(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}return m=p_,p_=!1,m}function Gu(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&D0(e,t,r)}i=i.next}while(i!==s)}}function Eg(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function O0(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function jS(n){var e=n.alternate;e!==null&&(n.alternate=null,jS(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ii],delete e[ph],delete e[A0],delete e[sM],delete e[iM])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function $S(n){return n.tag===5||n.tag===3||n.tag===4}function m_(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||$S(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function j0(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=qp));else if(s!==4&&(n=n.child,n!==null))for(j0(n,e,t),n=n.sibling;n!==null;)j0(n,e,t),n=n.sibling}function $0(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for($0(n,e,t),n=n.sibling;n!==null;)$0(n,e,t),n=n.sibling}var Rt=null,Ss=!1;function or(n,e,t){for(t=t.child;t!==null;)zS(n,e,t),t=t.sibling}function zS(n,e,t){if(oi&&typeof oi.onCommitFiberUnmount=="function")try{oi.onCommitFiberUnmount(yg,t)}catch{}switch(t.tag){case 5:Ut||bl(t,e);case 6:var s=Rt,i=Ss;Rt=null,or(n,e,t),Rt=s,Ss=i,Rt!==null&&(Ss?(n=Rt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Rt.removeChild(t.stateNode));break;case 18:Rt!==null&&(Ss?(n=Rt,t=t.stateNode,n.nodeType===8?fy(n.parentNode,t):n.nodeType===1&&fy(n,t),ch(n)):fy(Rt,t.stateNode));break;case 4:s=Rt,i=Ss,Rt=t.stateNode.containerInfo,Ss=!0,or(n,e,t),Rt=s,Ss=i;break;case 0:case 11:case 14:case 15:if(!Ut&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&D0(t,e,a),i=i.next}while(i!==s)}or(n,e,t);break;case 1:if(!Ut&&(bl(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(o){qe(t,e,o)}or(n,e,t);break;case 21:or(n,e,t);break;case 22:t.mode&1?(Ut=(s=Ut)||t.memoizedState!==null,or(n,e,t),Ut=s):or(n,e,t);break;default:or(n,e,t)}}function g_(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new xM),e.forEach(function(s){var i=PM.bind(null,n,s);t.has(s)||(t.add(s),s.then(i,i))})}}function as(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];try{var r=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Rt=o.stateNode,Ss=!1;break e;case 3:Rt=o.stateNode.containerInfo,Ss=!0;break e;case 4:Rt=o.stateNode.containerInfo,Ss=!0;break e}o=o.return}if(Rt===null)throw Error(F(160));zS(r,a,i),Rt=null,Ss=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){qe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)BS(e,n),e=e.sibling}function BS(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(as(e,n),Ns(n),s&4){try{Gu(3,n,n.return),Eg(3,n)}catch(v){qe(n,n.return,v)}try{Gu(5,n,n.return)}catch(v){qe(n,n.return,v)}}break;case 1:as(e,n),Ns(n),s&512&&t!==null&&bl(t,t.return);break;case 5:if(as(e,n),Ns(n),s&512&&t!==null&&bl(t,t.return),n.flags&32){var i=n.stateNode;try{rh(i,"")}catch(v){qe(n,n.return,v)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,a=t!==null?t.memoizedProps:r,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&cA(i,r),c0(o,a);var u=c0(o,r);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];h==="style"?pA(i,d):h==="dangerouslySetInnerHTML"?dA(i,d):h==="children"?rh(i,d):jw(i,h,d,u)}switch(o){case"input":i0(i,r);break;case"textarea":uA(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?El(i,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?El(i,!!r.multiple,r.defaultValue,!0):El(i,!!r.multiple,r.multiple?[]:"",!1))}i[ph]=r}catch(v){qe(n,n.return,v)}}break;case 6:if(as(e,n),Ns(n),s&4){if(n.stateNode===null)throw Error(F(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(v){qe(n,n.return,v)}}break;case 3:if(as(e,n),Ns(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{ch(e.containerInfo)}catch(v){qe(n,n.return,v)}break;case 4:as(e,n),Ns(n);break;case 13:as(e,n),Ns(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(yx=Ke())),s&4&&g_(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Ut=(u=Ut)||h,as(e,n),Ut=u):as(e,n),Ns(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(B=n,h=n.child;h!==null;){for(d=B=h;B!==null;){switch(f=B,p=f.child,f.tag){case 0:case 11:case 14:case 15:Gu(4,f,f.return);break;case 1:bl(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){s=f,t=f.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){qe(s,t,v)}}break;case 5:bl(f,f.return);break;case 22:if(f.memoizedState!==null){v_(d);continue}}p!==null?(p.return=f,B=p):v_(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=fA("display",a))}catch(v){qe(n,n.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){qe(n,n.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:as(e,n),Ns(n),s&4&&g_(n);break;case 21:break;default:as(e,n),Ns(n)}}function Ns(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if($S(t)){var s=t;break e}t=t.return}throw Error(F(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(rh(i,""),s.flags&=-33);var r=m_(n);$0(n,r,i);break;case 3:case 4:var a=s.stateNode.containerInfo,o=m_(n);j0(n,o,a);break;default:throw Error(F(161))}}catch(l){qe(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function _M(n,e,t){B=n,HS(n)}function HS(n,e,t){for(var s=(n.mode&1)!==0;B!==null;){var i=B,r=i.child;if(i.tag===22&&s){var a=i.memoizedState!==null||bf;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Ut;o=bf;var u=Ut;if(bf=a,(Ut=l)&&!u)for(B=i;B!==null;)a=B,l=a.child,a.tag===22&&a.memoizedState!==null?w_(i):l!==null?(l.return=a,B=l):w_(i);for(;r!==null;)B=r,HS(r),r=r.sibling;B=i,bf=o,Ut=u}y_(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,B=r):y_(n)}}function y_(n){for(;B!==null;){var e=B;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||Eg(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Ut)if(t===null)s.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:cs(e.type,t.memoizedProps);s.componentDidUpdate(i,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&t_(e,r,s);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}t_(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ch(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Ut||e.flags&512&&O0(e)}catch(f){qe(e,e.return,f)}}if(e===n){B=null;break}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}}function v_(n){for(;B!==null;){var e=B;if(e===n){B=null;break}var t=e.sibling;if(t!==null){t.return=e.return,B=t;break}B=e.return}}function w_(n){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Eg(4,e)}catch(l){qe(e,t,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(l){qe(e,i,l)}}var r=e.return;try{O0(e)}catch(l){qe(e,r,l)}break;case 5:var a=e.return;try{O0(e)}catch(l){qe(e,a,l)}}}catch(l){qe(e,e.return,l)}if(e===n){B=null;break}var o=e.sibling;if(o!==null){o.return=e.return,B=o;break}B=e.return}}var AM=Math.ceil,sm=ar.ReactCurrentDispatcher,mx=ar.ReactCurrentOwner,ns=ar.ReactCurrentBatchConfig,fe=0,St=null,et=null,Mt=0,Ln=0,_l=ha(0),mt=0,xh=null,Lo=0,kg=0,gx=0,Xu=null,fn=null,yx=0,Hc=1/0,vi=null,im=!1,z0=null,ta=null,_f=!1,Gr=null,rm=0,Ku=0,B0=null,Yf=-1,Jf=0;function Yt(){return fe&6?Ke():Yf!==-1?Yf:Yf=Ke()}function na(n){return n.mode&1?fe&2&&Mt!==0?Mt&-Mt:aM.transition!==null?(Jf===0&&(Jf=kA()),Jf):(n=be,n!==0||(n=window.event,n=n===void 0?16:IA(n.type)),n):1}function Rs(n,e,t,s){if(50<Ku)throw Ku=0,B0=null,Error(F(185));Gd(n,t,s),(!(fe&2)||n!==St)&&(n===St&&(!(fe&2)&&(kg|=t),mt===4&&vr(n,Mt)),vn(n,s),t===1&&fe===0&&!(e.mode&1)&&(Hc=Ke()+500,_g&&da()))}function vn(n,e){var t=n.callbackNode;aP(n,e);var s=Hp(n,n===St?Mt:0);if(s===0)t!==null&&Tb(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&Tb(t),e===1)n.tag===0?rM(x_.bind(null,n)):JA(x_.bind(null,n)),tM(function(){!(fe&6)&&da()}),t=null;else{switch(CA(s)){case 1:t=Uw;break;case 4:t=SA;break;case 16:t=Bp;break;case 536870912:t=EA;break;default:t=Bp}t=QS(t,US.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function US(n,e){if(Yf=-1,Jf=0,fe&6)throw Error(F(327));var t=n.callbackNode;if(Pl()&&n.callbackNode!==t)return null;var s=Hp(n,n===St?Mt:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=am(n,s);else{e=s;var i=fe;fe|=2;var r=VS();(St!==n||Mt!==e)&&(vi=null,Hc=Ke()+500,To(n,e));do try{kM();break}catch(o){WS(n,o)}while(!0);nx(),sm.current=r,fe=i,et!==null?e=0:(St=null,Mt=0,e=mt)}if(e!==0){if(e===2&&(i=p0(n),i!==0&&(s=i,e=H0(n,i))),e===1)throw t=xh,To(n,0),vr(n,s),vn(n,Ke()),t;if(e===6)vr(n,s);else{if(i=n.current.alternate,!(s&30)&&!SM(i)&&(e=am(n,s),e===2&&(r=p0(n),r!==0&&(s=r,e=H0(n,r))),e===1))throw t=xh,To(n,0),vr(n,s),vn(n,Ke()),t;switch(n.finishedWork=i,n.finishedLanes=s,e){case 0:case 1:throw Error(F(345));case 2:ya(n,fn,vi);break;case 3:if(vr(n,s),(s&130023424)===s&&(e=yx+500-Ke(),10<e)){if(Hp(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){Yt(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=_0(ya.bind(null,n,fn,vi),e);break}ya(n,fn,vi);break;case 4:if(vr(n,s),(s&4194240)===s)break;for(e=n.eventTimes,i=-1;0<s;){var a=31-Ts(s);r=1<<a,a=e[a],a>i&&(i=a),s&=~r}if(s=i,s=Ke()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*AM(s/1960))-s,10<s){n.timeoutHandle=_0(ya.bind(null,n,fn,vi),s);break}ya(n,fn,vi);break;case 5:ya(n,fn,vi);break;default:throw Error(F(329))}}}return vn(n,Ke()),n.callbackNode===t?US.bind(null,n):null}function H0(n,e){var t=Xu;return n.current.memoizedState.isDehydrated&&(To(n,e).flags|=256),n=am(n,e),n!==2&&(e=fn,fn=t,e!==null&&U0(e)),n}function U0(n){fn===null?fn=n:fn.push.apply(fn,n)}function SM(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var i=t[s],r=i.getSnapshot;i=i.value;try{if(!Ps(r(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vr(n,e){for(e&=~gx,e&=~kg,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ts(e),s=1<<t;n[t]=-1,e&=~s}}function x_(n){if(fe&6)throw Error(F(327));Pl();var e=Hp(n,0);if(!(e&1))return vn(n,Ke()),null;var t=am(n,e);if(n.tag!==0&&t===2){var s=p0(n);s!==0&&(e=s,t=H0(n,s))}if(t===1)throw t=xh,To(n,0),vr(n,e),vn(n,Ke()),t;if(t===6)throw Error(F(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ya(n,fn,vi),vn(n,Ke()),null}function vx(n,e){var t=fe;fe|=1;try{return n(e)}finally{fe=t,fe===0&&(Hc=Ke()+500,_g&&da())}}function Fo(n){Gr!==null&&Gr.tag===0&&!(fe&6)&&Pl();var e=fe;fe|=1;var t=ns.transition,s=be;try{if(ns.transition=null,be=1,n)return n()}finally{be=s,ns.transition=t,fe=e,!(fe&6)&&da()}}function wx(){Ln=_l.current,Ie(_l)}function To(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,eM(t)),et!==null)for(t=et.return;t!==null;){var s=t;switch(Zw(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Gp();break;case 3:zc(),Ie(gn),Ie(Vt),lx();break;case 5:ox(s);break;case 4:zc();break;case 13:Ie(He);break;case 19:Ie(He);break;case 10:sx(s.type._context);break;case 22:case 23:wx()}t=t.return}if(St=n,et=n=sa(n.current,null),Mt=Ln=e,mt=0,xh=null,gx=kg=Lo=0,fn=Xu=null,ka!==null){for(e=0;e<ka.length;e++)if(t=ka[e],s=t.interleaved,s!==null){t.interleaved=null;var i=s.next,r=t.pending;if(r!==null){var a=r.next;r.next=i,s.next=a}t.pending=s}ka=null}return n}function WS(n,e){do{var t=et;try{if(nx(),Xf.current=nm,tm){for(var s=Ue.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}tm=!1}if(Io=0,At=ft=Ue=null,qu=!1,yh=0,mx.current=null,t===null||t.return===null){mt=1,xh=e,et=null;break}e:{var r=n,a=t.return,o=t,l=e;if(e=Mt,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=o_(a);if(p!==null){p.flags&=-257,l_(p,a,o,r,e),p.mode&1&&a_(r,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){a_(r,u,e),xx();break e}l=Error(F(426))}}else if(De&&o.mode&1){var b=o_(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),l_(b,a,o,r,e),ex(Bc(l,o));break e}}r=l=Bc(l,o),mt!==4&&(mt=2),Xu===null?Xu=[r]:Xu.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var y=CS(r,l,e);e_(r,y);break e;case 1:o=l;var g=r.type,_=r.stateNode;if(!(r.flags&128)&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ta===null||!ta.has(_)))){r.flags|=65536,e&=-e,r.lanes|=e;var E=TS(r,o,e);e_(r,E);break e}}r=r.return}while(r!==null)}GS(t)}catch(C){e=C,et===t&&t!==null&&(et=t=t.return);continue}break}while(!0)}function VS(){var n=sm.current;return sm.current=nm,n===null?nm:n}function xx(){(mt===0||mt===3||mt===2)&&(mt=4),St===null||!(Lo&268435455)&&!(kg&268435455)||vr(St,Mt)}function am(n,e){var t=fe;fe|=2;var s=VS();(St!==n||Mt!==e)&&(vi=null,To(n,e));do try{EM();break}catch(i){WS(n,i)}while(!0);if(nx(),fe=t,sm.current=s,et!==null)throw Error(F(261));return St=null,Mt=0,mt}function EM(){for(;et!==null;)qS(et)}function kM(){for(;et!==null&&!YR();)qS(et)}function qS(n){var e=KS(n.alternate,n,Ln);n.memoizedProps=n.pendingProps,e===null?GS(n):et=e,mx.current=null}function GS(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=wM(t,e),t!==null){t.flags&=32767,et=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mt=6,et=null;return}}else if(t=vM(t,e,Ln),t!==null){et=t;return}if(e=e.sibling,e!==null){et=e;return}et=e=n}while(e!==null);mt===0&&(mt=5)}function ya(n,e,t){var s=be,i=ns.transition;try{ns.transition=null,be=1,CM(n,e,t,s)}finally{ns.transition=i,be=s}return null}function CM(n,e,t,s){do Pl();while(Gr!==null);if(fe&6)throw Error(F(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(F(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(oP(n,r),n===St&&(et=St=null,Mt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||_f||(_f=!0,QS(Bp,function(){return Pl(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=ns.transition,ns.transition=null;var a=be;be=1;var o=fe;fe|=4,mx.current=null,bM(n,t),BS(t,n),GP(x0),Up=!!w0,x0=w0=null,n.current=t,_M(t),JR(),fe=o,be=a,ns.transition=r}else n.current=t;if(_f&&(_f=!1,Gr=n,rm=i),r=n.pendingLanes,r===0&&(ta=null),tP(t.stateNode),vn(n,Ke()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],s(i.value,{componentStack:i.stack,digest:i.digest});if(im)throw im=!1,n=z0,z0=null,n;return rm&1&&n.tag!==0&&Pl(),r=n.pendingLanes,r&1?n===B0?Ku++:(Ku=0,B0=n):Ku=0,da(),null}function Pl(){if(Gr!==null){var n=CA(rm),e=ns.transition,t=be;try{if(ns.transition=null,be=16>n?16:n,Gr===null)var s=!1;else{if(n=Gr,Gr=null,rm=0,fe&6)throw Error(F(331));var i=fe;for(fe|=4,B=n.current;B!==null;){var r=B,a=r.child;if(B.flags&16){var o=r.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(B=u;B!==null;){var h=B;switch(h.tag){case 0:case 11:case 15:Gu(8,h,r)}var d=h.child;if(d!==null)d.return=h,B=d;else for(;B!==null;){h=B;var f=h.sibling,p=h.return;if(jS(h),h===u){B=null;break}if(f!==null){f.return=p,B=f;break}B=p}}}var m=r.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}B=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,B=a;else e:for(;B!==null;){if(r=B,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Gu(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,B=y;break e}B=r.return}}var g=n.current;for(B=g;B!==null;){a=B;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,B=_;else e:for(a=g;B!==null;){if(o=B,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Eg(9,o)}}catch(C){qe(o,o.return,C)}if(o===a){B=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,B=E;break e}B=o.return}}if(fe=i,da(),oi&&typeof oi.onPostCommitFiberRoot=="function")try{oi.onPostCommitFiberRoot(yg,n)}catch{}s=!0}return s}finally{be=t,ns.transition=e}}return!1}function b_(n,e,t){e=Bc(t,e),e=CS(n,e,1),n=ea(n,e,1),e=Yt(),n!==null&&(Gd(n,1,e),vn(n,e))}function qe(n,e,t){if(n.tag===3)b_(n,n,t);else for(;e!==null;){if(e.tag===3){b_(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ta===null||!ta.has(s))){n=Bc(t,n),n=TS(e,n,1),e=ea(e,n,1),n=Yt(),e!==null&&(Gd(e,1,n),vn(e,n));break}}e=e.return}}function TM(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=Yt(),n.pingedLanes|=n.suspendedLanes&t,St===n&&(Mt&t)===t&&(mt===4||mt===3&&(Mt&130023424)===Mt&&500>Ke()-yx?To(n,0):gx|=t),vn(n,e)}function XS(n,e){e===0&&(n.mode&1?(e=df,df<<=1,!(df&130023424)&&(df=4194304)):e=1);var t=Yt();n=er(n,e),n!==null&&(Gd(n,e,t),vn(n,t))}function RM(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),XS(n,t)}function PM(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(F(314))}s!==null&&s.delete(e),XS(n,t)}var KS;KS=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||gn.current)pn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return pn=!1,yM(n,e,t);pn=!!(n.flags&131072)}else pn=!1,De&&e.flags&1048576&&ZA(e,Qp,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Qf(n,e),n=e.pendingProps;var i=Oc(e,Vt.current);Rl(e,t),i=ux(null,e,s,n,i,t);var r=hx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yn(s)?(r=!0,Xp(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rx(e),i.updater=Sg,e.stateNode=i,i._reactInternals=e,R0(e,s,n,t),e=N0(null,e,s,!0,r,t)):(e.tag=0,De&&r&&Jw(e),Kt(null,e,i,t),e=e.child),e;case 16:s=e.elementType;e:{switch(Qf(n,e),n=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=NM(s),n=cs(s,n),i){case 0:e=M0(null,e,s,n,t);break e;case 1:e=h_(null,e,s,n,t);break e;case 11:e=c_(null,e,s,n,t);break e;case 14:e=u_(null,e,s,cs(s.type,n),t);break e}throw Error(F(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:cs(s,i),M0(n,e,s,i,t);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:cs(s,i),h_(n,e,s,i,t);case 3:e:{if(NS(e),n===null)throw Error(F(387));s=e.pendingProps,r=e.memoizedState,i=r.element,rS(n,e),Zp(e,s,null,t);var a=e.memoizedState;if(s=a.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=Bc(Error(F(423)),e),e=d_(n,e,s,t,i);break e}else if(s!==i){i=Bc(Error(F(424)),e),e=d_(n,e,s,t,i);break e}else for(On=Zr(e.stateNode.containerInfo.firstChild),jn=e,De=!0,Es=null,t=sS(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(jc(),s===i){e=tr(n,e,t);break e}Kt(n,e,s,t)}e=e.child}return e;case 5:return aS(e),n===null&&k0(e),s=e.type,i=e.pendingProps,r=n!==null?n.memoizedProps:null,a=i.children,b0(s,i)?a=null:r!==null&&b0(s,r)&&(e.flags|=32),MS(n,e),Kt(n,e,a,t),e.child;case 6:return n===null&&k0(e),null;case 13:return IS(n,e,t);case 4:return ax(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=$c(e,null,s,t):Kt(n,e,s,t),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:cs(s,i),c_(n,e,s,i,t);case 7:return Kt(n,e,e.pendingProps,t),e.child;case 8:return Kt(n,e,e.pendingProps.children,t),e.child;case 12:return Kt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,r=e.memoizedProps,a=i.value,Pe(Yp,s._currentValue),s._currentValue=a,r!==null)if(Ps(r.value,a)){if(r.children===i.children&&!gn.current){e=tr(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var l=o.firstContext;l!==null;){if(l.context===s){if(r.tag===1){l=Xi(-1,t&-t),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),C0(r.return,t,e),o.lanes|=t;break}l=l.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(F(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),C0(a,t,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}Kt(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Rl(e,t),i=ss(i),s=s(i),e.flags|=1,Kt(n,e,s,t),e.child;case 14:return s=e.type,i=cs(s,e.pendingProps),i=cs(s.type,i),u_(n,e,s,i,t);case 15:return RS(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:cs(s,i),Qf(n,e),e.tag=1,yn(s)?(n=!0,Xp(e)):n=!1,Rl(e,t),kS(e,s,i),R0(e,s,i,t),N0(null,e,s,!0,n,t);case 19:return LS(n,e,t);case 22:return PS(n,e,t)}throw Error(F(156,e.tag))};function QS(n,e){return AA(n,e)}function MM(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function es(n,e,t,s){return new MM(n,e,t,s)}function bx(n){return n=n.prototype,!(!n||!n.isReactComponent)}function NM(n){if(typeof n=="function")return bx(n)?1:0;if(n!=null){if(n=n.$$typeof,n===zw)return 11;if(n===Bw)return 14}return 2}function sa(n,e){var t=n.alternate;return t===null?(t=es(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Zf(n,e,t,s,i,r){var a=2;if(s=n,typeof n=="function")bx(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case dl:return Ro(t.children,i,r,e);case $w:a=8,i|=8;break;case Zy:return n=es(12,t,e,i|2),n.elementType=Zy,n.lanes=r,n;case e0:return n=es(13,t,e,i),n.elementType=e0,n.lanes=r,n;case t0:return n=es(19,t,e,i),n.elementType=t0,n.lanes=r,n;case aA:return Cg(t,i,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case iA:a=10;break e;case rA:a=9;break e;case zw:a=11;break e;case Bw:a=14;break e;case mr:a=16,s=null;break e}throw Error(F(130,n==null?n:typeof n,""))}return e=es(a,t,e,i),e.elementType=n,e.type=s,e.lanes=r,e}function Ro(n,e,t,s){return n=es(7,n,s,e),n.lanes=t,n}function Cg(n,e,t,s){return n=es(22,n,s,e),n.elementType=aA,n.lanes=t,n.stateNode={isHidden:!1},n}function by(n,e,t){return n=es(6,n,null,e),n.lanes=t,n}function _y(n,e,t){return e=es(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function IM(n,e,t,s,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ny(0),this.expirationTimes=ny(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ny(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _x(n,e,t,s,i,r,a,o,l){return n=new IM(n,e,t,o,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=es(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},rx(r),n}function LM(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hl,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function YS(n){if(!n)return ra;n=n._reactInternals;e:{if(Vo(n)!==n||n.tag!==1)throw Error(F(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(n.tag===1){var t=n.type;if(yn(t))return YA(n,t,e)}return e}function JS(n,e,t,s,i,r,a,o,l){return n=_x(t,s,!0,n,i,r,a,o,l),n.context=YS(null),t=n.current,s=Yt(),i=na(t),r=Xi(s,i),r.callback=e??null,ea(t,r,i),n.current.lanes=i,Gd(n,i,s),vn(n,s),n}function Tg(n,e,t,s){var i=e.current,r=Yt(),a=na(i);return t=YS(t),e.context===null?e.context=t:e.pendingContext=t,e=Xi(r,a),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=ea(i,e,a),n!==null&&(Rs(n,i,a,r),Gf(n,i,a)),a}function om(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function __(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Ax(n,e){__(n,e),(n=n.alternate)&&__(n,e)}function FM(){return null}var ZS=typeof reportError=="function"?reportError:function(n){console.error(n)};function Sx(n){this._internalRoot=n}Rg.prototype.render=Sx.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(F(409));Tg(n,e,null,null)};Rg.prototype.unmount=Sx.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Fo(function(){Tg(null,n,null,null)}),e[Zi]=null}};function Rg(n){this._internalRoot=n}Rg.prototype.unstable_scheduleHydration=function(n){if(n){var e=PA();n={blockedOn:null,target:n,priority:e};for(var t=0;t<yr.length&&e!==0&&e<yr[t].priority;t++);yr.splice(t,0,n),t===0&&NA(n)}};function Ex(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Pg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function A_(){}function DM(n,e,t,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var u=om(a);r.call(u)}}var a=JS(e,s,n,0,null,!1,!1,"",A_);return n._reactRootContainer=a,n[Zi]=a.current,dh(n.nodeType===8?n.parentNode:n),Fo(),a}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var o=s;s=function(){var u=om(l);o.call(u)}}var l=_x(n,0,!1,null,null,!1,!1,"",A_);return n._reactRootContainer=l,n[Zi]=l.current,dh(n.nodeType===8?n.parentNode:n),Fo(function(){Tg(e,l,t,s)}),l}function Mg(n,e,t,s,i){var r=t._reactRootContainer;if(r){var a=r;if(typeof i=="function"){var o=i;i=function(){var l=om(a);o.call(l)}}Tg(e,a,n,i)}else a=DM(t,e,n,i,s);return om(a)}TA=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=vu(e.pendingLanes);t!==0&&(Ww(e,t|1),vn(e,Ke()),!(fe&6)&&(Hc=Ke()+500,da()))}break;case 13:Fo(function(){var s=er(n,1);if(s!==null){var i=Yt();Rs(s,n,1,i)}}),Ax(n,1)}};Vw=function(n){if(n.tag===13){var e=er(n,134217728);if(e!==null){var t=Yt();Rs(e,n,134217728,t)}Ax(n,134217728)}};RA=function(n){if(n.tag===13){var e=na(n),t=er(n,e);if(t!==null){var s=Yt();Rs(t,n,e,s)}Ax(n,e)}};PA=function(){return be};MA=function(n,e){var t=be;try{return be=n,e()}finally{be=t}};h0=function(n,e,t){switch(e){case"input":if(i0(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var i=bg(s);if(!i)throw Error(F(90));lA(s),i0(s,i)}}}break;case"textarea":uA(n,t);break;case"select":e=t.value,e!=null&&El(n,!!t.multiple,e,!1)}};yA=vx;vA=Fo;var OM={usingClientEntryPoint:!1,Events:[Kd,gl,bg,mA,gA,vx]},ru={findFiberByHostInstance:Ea,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jM={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=bA(n),n===null?null:n.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||FM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{yg=Af.inject(jM),oi=Af}catch{}}Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OM;Bn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ex(e))throw Error(F(200));return LM(n,e,null,t)};Bn.createRoot=function(n,e){if(!Ex(n))throw Error(F(299));var t=!1,s="",i=ZS;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_x(n,1,!1,null,null,t,!1,s,i),n[Zi]=e.current,dh(n.nodeType===8?n.parentNode:n),new Sx(e)};Bn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(F(188)):(n=Object.keys(n).join(","),Error(F(268,n)));return n=bA(e),n=n===null?null:n.stateNode,n};Bn.flushSync=function(n){return Fo(n)};Bn.hydrate=function(n,e,t){if(!Pg(e))throw Error(F(200));return Mg(null,n,e,!0,t)};Bn.hydrateRoot=function(n,e,t){if(!Ex(n))throw Error(F(405));var s=t!=null&&t.hydratedSources||null,i=!1,r="",a=ZS;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=JS(e,null,n,1,t??null,i,!1,r,a),n[Zi]=e.current,dh(n),s)for(n=0;n<s.length;n++)t=s[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Rg(e)};Bn.render=function(n,e,t){if(!Pg(e))throw Error(F(200));return Mg(null,n,e,!1,t)};Bn.unmountComponentAtNode=function(n){if(!Pg(n))throw Error(F(40));return n._reactRootContainer?(Fo(function(){Mg(null,null,n,!1,function(){n._reactRootContainer=null,n[Zi]=null})}),!0):!1};Bn.unstable_batchedUpdates=vx;Bn.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!Pg(t))throw Error(F(200));if(n==null||n._reactInternals===void 0)throw Error(F(38));return Mg(n,e,t,!1,s)};Bn.version="18.3.1-next-f1338f8080-20240426";function eE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eE)}catch(n){console.error(n)}}eE(),eA.exports=Bn;var $M=eA.exports,tE,S_=$M;tE=S_.createRoot,S_.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bh(){return bh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},bh.apply(this,arguments)}var Xr;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Xr||(Xr={}));const E_="popstate";function zM(n){n===void 0&&(n={});function e(s,i){let{pathname:r,search:a,hash:o}=s.location;return W0("",{pathname:r,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:sE(i)}return HM(e,t,null,n)}function tt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function nE(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BM(){return Math.random().toString(36).substr(2,8)}function k_(n,e){return{usr:n.state,key:n.key,idx:e}}function W0(n,e,t,s){return t===void 0&&(t=null),bh({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Xc(e):e,{state:t,key:e&&e.key||s||BM()})}function sE(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Xc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function HM(n,e,t,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:r=!1}=s,a=i.history,o=Xr.Pop,l=null,u=h();u==null&&(u=0,a.replaceState(bh({},a.state,{idx:u}),""));function h(){return(a.state||{idx:null}).idx}function d(){o=Xr.Pop;let b=h(),y=b==null?null:b-u;u=b,l&&l({action:o,location:v.location,delta:y})}function f(b,y){o=Xr.Push;let g=W0(v.location,b,y);u=h()+1;let _=k_(g,u),E=v.createHref(g);try{a.pushState(_,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(E)}r&&l&&l({action:o,location:v.location,delta:1})}function p(b,y){o=Xr.Replace;let g=W0(v.location,b,y);u=h();let _=k_(g,u),E=v.createHref(g);a.replaceState(_,"",E),r&&l&&l({action:o,location:v.location,delta:0})}function m(b){let y=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof b=="string"?b:sE(b);return g=g.replace(/ $/,"%20"),tt(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let v={get action(){return o},get location(){return n(i,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(E_,d),l=b,()=>{i.removeEventListener(E_,d),l=null}},createHref(b){return e(i,b)},createURL:m,encodeLocation(b){let y=m(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(b){return a.go(b)}};return v}var C_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(C_||(C_={}));function UM(n,e,t){return t===void 0&&(t="/"),WM(n,e,t,!1)}function WM(n,e,t,s){let i=typeof e=="string"?Xc(e):e,r=aE(i.pathname||"/",t);if(r==null)return null;let a=iE(n);VM(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=nN(r);o=eN(a[l],u,s)}return o}function iE(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let i=(r,a,o)=>{let l={relativePath:o===void 0?r.path||"":o,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};l.relativePath.startsWith("/")&&(tt(l.relativePath.startsWith(s),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(s.length));let u=Po([s,l.relativePath]),h=t.concat(l);r.children&&r.children.length>0&&(tt(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),iE(r.children,e,h,u)),!(r.path==null&&!r.index)&&e.push({path:u,score:JM(u,r.index),routesMeta:h})};return n.forEach((r,a)=>{var o;if(r.path===""||!((o=r.path)!=null&&o.includes("?")))i(r,a);else for(let l of rE(r.path))i(r,a,l)}),e}function rE(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),r=t.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let a=rE(s.join("/")),o=[];return o.push(...a.map(l=>l===""?r:[r,l].join("/"))),i&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function VM(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ZM(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const qM=/^:[\w-]+$/,GM=3,XM=2,KM=1,QM=10,YM=-2,T_=n=>n==="*";function JM(n,e){let t=n.split("/"),s=t.length;return t.some(T_)&&(s+=YM),e&&(s+=XM),t.filter(i=>!T_(i)).reduce((i,r)=>i+(qM.test(r)?GM:r===""?KM:QM),s)}function ZM(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function eN(n,e,t){let{routesMeta:s}=n,i={},r="/",a=[];for(let o=0;o<s.length;++o){let l=s[o],u=o===s.length-1,h=r==="/"?e:e.slice(r.length)||"/",d=R_({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),f=l.route;if(!d&&u&&t&&!s[s.length-1].route.index&&(d=R_({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:Po([r,d.pathname]),pathnameBase:aN(Po([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=Po([r,d.pathnameBase]))}return a}function R_(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=tN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let r=i[0],a=r.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:s.reduce((u,h,d)=>{let{paramName:f,isOptional:p}=h;if(f==="*"){let v=o[d]||"";a=r.slice(0,r.length-v.length).replace(/(.)\/+$/,"$1")}const m=o[d];return p&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:a,pattern:n}}function tN(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),nE(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(s.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function nN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nE(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function aE(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function sN(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?Xc(n):n;return{pathname:t?t.startsWith("/")?t:iN(t,e):e,search:oN(s),hash:lN(i)}}function iN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Ay(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function oE(n,e){let t=rN(n);return e?t.map((s,i)=>i===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function lE(n,e,t,s){s===void 0&&(s=!1);let i;typeof n=="string"?i=Xc(n):(i=bh({},n),tt(!i.pathname||!i.pathname.includes("?"),Ay("?","pathname","search",i)),tt(!i.pathname||!i.pathname.includes("#"),Ay("#","pathname","hash",i)),tt(!i.search||!i.search.includes("#"),Ay("#","search","hash",i)));let r=n===""||i.pathname==="",a=r?"/":i.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!s&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=sN(i,o),u=a&&a!=="/"&&a.endsWith("/"),h=(r||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Po=n=>n.join("/").replace(/\/\/+/g,"/"),aN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),oN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,lN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function cN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const cE=["post","put","patch","delete"];new Set(cE);const uN=["get",...cE];new Set(uN);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _h(){return _h=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},_h.apply(this,arguments)}const kx=I.createContext(null),hN=I.createContext(null),Yd=I.createContext(null),Ng=I.createContext(null),fa=I.createContext({outlet:null,matches:[],isDataRoute:!1}),uE=I.createContext(null);function Jd(){return I.useContext(Ng)!=null}function Cx(){return Jd()||tt(!1),I.useContext(Ng).location}function hE(n){I.useContext(Yd).static||I.useLayoutEffect(n)}function pa(){let{isDataRoute:n}=I.useContext(fa);return n?SN():dN()}function dN(){Jd()||tt(!1);let n=I.useContext(kx),{basename:e,future:t,navigator:s}=I.useContext(Yd),{matches:i}=I.useContext(fa),{pathname:r}=Cx(),a=JSON.stringify(oE(i,t.v7_relativeSplatPath)),o=I.useRef(!1);return hE(()=>{o.current=!0}),I.useCallback(function(u,h){if(h===void 0&&(h={}),!o.current)return;if(typeof u=="number"){s.go(u);return}let d=lE(u,JSON.parse(a),r,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Po([e,d.pathname])),(h.replace?s.replace:s.push)(d,h.state,h)},[e,s,a,r,n])}function Tx(){let{matches:n}=I.useContext(fa),e=n[n.length-1];return e?e.params:{}}function fN(n,e){return pN(n,e)}function pN(n,e,t,s){Jd()||tt(!1);let{navigator:i}=I.useContext(Yd),{matches:r}=I.useContext(fa),a=r[r.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=Cx(),h;if(e){var d;let b=typeof e=="string"?Xc(e):e;l==="/"||(d=b.pathname)!=null&&d.startsWith(l)||tt(!1),h=b}else h=u;let f=h.pathname||"/",p=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=UM(n,{pathname:p}),v=wN(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:Po([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Po([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),r,t,s);return e&&v?I.createElement(Ng.Provider,{value:{location:_h({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Xr.Pop}},v):v}function mN(){let n=AN(),e=cN(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:i},t):null,null)}const gN=I.createElement(mN,null);class yN extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?I.createElement(fa.Provider,{value:this.props.routeContext},I.createElement(uE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vN(n){let{routeContext:e,match:t,children:s}=n,i=I.useContext(kx);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(fa.Provider,{value:e},s)}function wN(n,e,t,s){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var r;if(!t)return null;if(t.errors)n=t.matches;else if((r=s)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=(i=t)==null?void 0:i.errors;if(o!=null){let h=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);h>=0||tt(!1),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,u=-1;if(t&&s&&s.v7_partialHydration)for(let h=0;h<a.length;h++){let d=a[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:p}=t,m=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,d,f)=>{let p,m=!1,v=null,b=null;t&&(p=o&&d.route.id?o[d.route.id]:void 0,v=d.route.errorElement||gN,l&&(u<0&&f===0?(m=!0,b=null):u===f&&(m=!0,b=d.route.hydrateFallbackElement||null)));let y=e.concat(a.slice(0,f+1)),g=()=>{let _;return p?_=v:m?_=b:d.route.Component?_=I.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=h,I.createElement(vN,{match:d,routeContext:{outlet:h,matches:y,isDataRoute:t!=null},children:_})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?I.createElement(yN,{location:t.location,revalidation:t.revalidation,component:v,error:p,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}var dE=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(dE||{}),lm=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(lm||{});function xN(n){let e=I.useContext(kx);return e||tt(!1),e}function bN(n){let e=I.useContext(hN);return e||tt(!1),e}function _N(n){let e=I.useContext(fa);return e||tt(!1),e}function fE(n){let e=_N(),t=e.matches[e.matches.length-1];return t.route.id||tt(!1),t.route.id}function AN(){var n;let e=I.useContext(uE),t=bN(lm.UseRouteError),s=fE(lm.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function SN(){let{router:n}=xN(dE.UseNavigateStable),e=fE(lm.UseNavigateStable),t=I.useRef(!1);return hE(()=>{t.current=!0}),I.useCallback(function(i,r){r===void 0&&(r={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,_h({fromRouteId:e},r)))},[n,e])}function cm(n){let{to:e,replace:t,state:s,relative:i}=n;Jd()||tt(!1);let{future:r,static:a}=I.useContext(Yd),{matches:o}=I.useContext(fa),{pathname:l}=Cx(),u=pa(),h=lE(e,oE(o,r.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(h);return I.useEffect(()=>u(JSON.parse(d),{replace:t,state:s,relative:i}),[u,d,i,t,s]),null}function Fs(n){tt(!1)}function EN(n){let{basename:e="/",children:t=null,location:s,navigationType:i=Xr.Pop,navigator:r,static:a=!1,future:o}=n;Jd()&&tt(!1);let l=e.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:l,navigator:r,static:a,future:_h({v7_relativeSplatPath:!1},o)}),[l,o,r,a]);typeof s=="string"&&(s=Xc(s));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:m="default"}=s,v=I.useMemo(()=>{let b=aE(h,l);return b==null?null:{location:{pathname:b,search:d,hash:f,state:p,key:m},navigationType:i}},[l,h,d,f,p,m,i]);return v==null?null:I.createElement(Yd.Provider,{value:u},I.createElement(Ng.Provider,{children:t,value:v}))}function kN(n){let{children:e,location:t}=n;return fN(V0(e),t)}new Promise(()=>{});function V0(n,e){e===void 0&&(e=[]);let t=[];return I.Children.forEach(n,(s,i)=>{if(!I.isValidElement(s))return;let r=[...e,i];if(s.type===I.Fragment){t.push.apply(t,V0(s.props.children,r));return}s.type!==Fs&&tt(!1),!s.props.index||!s.props.children||tt(!1);let a={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=V0(s.props.children,r)),t.push(a)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const CN="6";try{window.__reactRouterVersion=CN}catch{}const TN="startTransition",P_=TR[TN];function RN(n){let{basename:e,children:t,future:s,window:i}=n,r=I.useRef();r.current==null&&(r.current=zM({window:i,v5Compat:!0}));let a=r.current,[o,l]=I.useState({action:a.action,location:a.location}),{v7_startTransition:u}=s||{},h=I.useCallback(d=>{u&&P_?P_(()=>l(d)):l(d)},[l,u]);return I.useLayoutEffect(()=>a.listen(h),[a,h]),I.createElement(EN,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:s})}var M_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(M_||(M_={}));var N_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(N_||(N_={}));const PN={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_AI_API_KEY:"sk-1234567890abcdef1234567890abcdef",VITE_AI_PROVIDER:"openai"},I_=n=>{let e;const t=new Set,s=(h,d)=>{const f=typeof h=="function"?h(e):h;if(!Object.is(f,e)){const p=e;e=d??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},i=()=>e,l={setState:s,getState:i,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h)),destroy:()=>{(PN?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=n(s,i,l);return l},MN=n=>n?I_(n):I_;var pE={exports:{}},mE={},gE={exports:{}},yE={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uc=I;function NN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var IN=typeof Object.is=="function"?Object.is:NN,LN=Uc.useState,FN=Uc.useEffect,DN=Uc.useLayoutEffect,ON=Uc.useDebugValue;function jN(n,e){var t=e(),s=LN({inst:{value:t,getSnapshot:e}}),i=s[0].inst,r=s[1];return DN(function(){i.value=t,i.getSnapshot=e,Sy(i)&&r({inst:i})},[n,t,e]),FN(function(){return Sy(i)&&r({inst:i}),n(function(){Sy(i)&&r({inst:i})})},[n]),ON(t),t}function Sy(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!IN(n,t)}catch{return!0}}function $N(n,e){return e()}var zN=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$N:jN;yE.useSyncExternalStore=Uc.useSyncExternalStore!==void 0?Uc.useSyncExternalStore:zN;gE.exports=yE;var BN=gE.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig=I,HN=BN;function UN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var WN=typeof Object.is=="function"?Object.is:UN,VN=HN.useSyncExternalStore,qN=Ig.useRef,GN=Ig.useEffect,XN=Ig.useMemo,KN=Ig.useDebugValue;mE.useSyncExternalStoreWithSelector=function(n,e,t,s,i){var r=qN(null);if(r.current===null){var a={hasValue:!1,value:null};r.current=a}else a=r.current;r=XN(function(){function l(p){if(!u){if(u=!0,h=p,p=s(p),i!==void 0&&a.hasValue){var m=a.value;if(i(m,p))return d=m}return d=p}if(m=d,WN(h,p))return m;var v=s(p);return i!==void 0&&i(m,v)?m:(h=p,d=v)}var u=!1,h,d,f=t===void 0?null:t;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,t,s,i]);var o=VN(n,r[0],r[1]);return GN(function(){a.hasValue=!0,a.value=o},[o]),KN(o),o};pE.exports=mE;var QN=pE.exports;const YN=H1(QN),vE={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_AI_API_KEY:"sk-1234567890abcdef1234567890abcdef",VITE_AI_PROVIDER:"openai"},{useDebugValue:JN}=Fw,{useSyncExternalStoreWithSelector:ZN}=YN;let L_=!1;const eI=n=>n;function tI(n,e=eI,t){(vE?"production":void 0)!=="production"&&t&&!L_&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),L_=!0);const s=ZN(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return JN(s),s}const F_=n=>{(vE?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?MN(n):n,t=(s,i)=>tI(e,s,i);return Object.assign(t,e),t},wE=n=>n?F_(n):F_,nr=wE(n=>({isAuthenticated:!1,role:null,user:null,students:[],login:async(e,t)=>{if(await new Promise(s=>setTimeout(s,500)),!e||!t)throw new Error("Invalid credentials");n({isAuthenticated:!0,role:e.includes("admin")?"admin":"student",user:{id:crypto.randomUUID(),name:e.includes("admin")?"Admin User":"Student User",email:e,role:e.includes("admin")?"admin":"student"}})},logout:()=>{n({isAuthenticated:!1,role:null,user:null})},addStudent:e=>{n(t=>({students:[...t.students,{...e,id:crypto.randomUUID(),role:"student",assignedQuizzes:[],completedQuizzes:[]}]}))},removeStudent:e=>{n(t=>({students:t.students.filter(s=>s.id!==e)}))},assignQuiz:(e,t)=>{n(s=>({students:s.students.map(i=>i.id===e?{...i,assignedQuizzes:[...new Set([...i.assignedQuizzes,t])]}:i)}))},unassignQuiz:(e,t)=>{n(s=>({students:s.students.map(i=>i.id===e?{...i,assignedQuizzes:i.assignedQuizzes.filter(r=>r!==t)}:i)}))}}));function xE(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=xE(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function nI(){for(var n,e,t=0,s="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=xE(n))&&(s&&(s+=" "),s+=e);return s}const Rx="-",sI=n=>{const e=rI(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:a=>{const o=a.split(Rx);return o[0]===""&&o.length!==1&&o.shift(),bE(o,e)||iI(a)},getConflictingClassGroupIds:(a,o)=>{const l=t[a]||[];return o&&s[a]?[...l,...s[a]]:l}}},bE=(n,e)=>{var a;if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),i=s?bE(n.slice(1),s):void 0;if(i)return i;if(e.validators.length===0)return;const r=n.join(Rx);return(a=e.validators.find(({validator:o})=>o(r)))==null?void 0:a.classGroupId},D_=/^\[(.+)\]$/,iI=n=>{if(D_.test(n)){const e=D_.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},rI=n=>{const{theme:e,prefix:t}=n,s={nextPart:new Map,validators:[]};return oI(Object.entries(n.classGroups),t).forEach(([r,a])=>{q0(a,s,r,e)}),s},q0=(n,e,t,s)=>{n.forEach(i=>{if(typeof i=="string"){const r=i===""?e:O_(e,i);r.classGroupId=t;return}if(typeof i=="function"){if(aI(i)){q0(i(s),e,t,s);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([r,a])=>{q0(a,O_(e,r),t,s)})})},O_=(n,e)=>{let t=n;return e.split(Rx).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},aI=n=>n.isThemeGetter,oI=(n,e)=>e?n.map(([t,s])=>{const i=s.map(r=>typeof r=="string"?e+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([a,o])=>[e+a,o])):r);return[t,i]}):n,lI=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const i=(r,a)=>{t.set(r,a),e++,e>n&&(e=0,s=t,t=new Map)};return{get(r){let a=t.get(r);if(a!==void 0)return a;if((a=s.get(r))!==void 0)return i(r,a),a},set(r,a){t.has(r)?t.set(r,a):i(r,a)}}},_E="!",cI=n=>{const{separator:e,experimentalParseClassName:t}=n,s=e.length===1,i=e[0],r=e.length,a=o=>{const l=[];let u=0,h=0,d;for(let b=0;b<o.length;b++){let y=o[b];if(u===0){if(y===i&&(s||o.slice(b,b+r)===e)){l.push(o.slice(h,b)),h=b+r;continue}if(y==="/"){d=b;continue}}y==="["?u++:y==="]"&&u--}const f=l.length===0?o:o.substring(h),p=f.startsWith(_E),m=p?f.substring(1):f,v=d&&d>h?d-h:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:v}};return t?o=>t({className:o,parseClassName:a}):a},uI=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},hI=n=>({cache:lI(n.cacheSize),parseClassName:cI(n),...sI(n)}),dI=/\s+/,fI=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:i}=e,r=[],a=n.trim().split(dI);let o="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{modifiers:h,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:p}=t(u);let m=!!p,v=s(m?f.substring(0,p):f);if(!v){if(!m){o=u+(o.length>0?" "+o:o);continue}if(v=s(f),!v){o=u+(o.length>0?" "+o:o);continue}m=!1}const b=uI(h).join(":"),y=d?b+_E:b,g=y+v;if(r.includes(g))continue;r.push(g);const _=i(v,m);for(let E=0;E<_.length;++E){const C=_[E];r.push(y+C)}o=u+(o.length>0?" "+o:o)}return o};function pI(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=AE(e))&&(s&&(s+=" "),s+=t);return s}const AE=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=AE(n[s]))&&(t&&(t+=" "),t+=e);return t};function mI(n,...e){let t,s,i,r=a;function a(l){const u=e.reduce((h,d)=>d(h),n());return t=hI(u),s=t.cache.get,i=t.cache.set,r=o,o(l)}function o(l){const u=s(l);if(u)return u;const h=fI(l,t);return i(l,h),h}return function(){return r(pI.apply(null,arguments))}}const Me=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},SE=/^\[(?:([a-z-]+):)?(.+)\]$/i,gI=/^\d+\/\d+$/,yI=new Set(["px","full","screen"]),vI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_I=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,hi=n=>Ml(n)||yI.has(n)||gI.test(n),lr=n=>Kc(n,"length",PI),Ml=n=>!!n&&!Number.isNaN(Number(n)),Ey=n=>Kc(n,"number",Ml),au=n=>!!n&&Number.isInteger(Number(n)),AI=n=>n.endsWith("%")&&Ml(n.slice(0,-1)),Z=n=>SE.test(n),cr=n=>vI.test(n),SI=new Set(["length","size","percentage"]),EI=n=>Kc(n,SI,EE),kI=n=>Kc(n,"position",EE),CI=new Set(["image","url"]),TI=n=>Kc(n,CI,NI),RI=n=>Kc(n,"",MI),ou=()=>!0,Kc=(n,e,t)=>{const s=SE.exec(n);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},PI=n=>wI.test(n)&&!xI.test(n),EE=()=>!1,MI=n=>bI.test(n),NI=n=>_I.test(n),II=()=>{const n=Me("colors"),e=Me("spacing"),t=Me("blur"),s=Me("brightness"),i=Me("borderColor"),r=Me("borderRadius"),a=Me("borderSpacing"),o=Me("borderWidth"),l=Me("contrast"),u=Me("grayscale"),h=Me("hueRotate"),d=Me("invert"),f=Me("gap"),p=Me("gradientColorStops"),m=Me("gradientColorStopPositions"),v=Me("inset"),b=Me("margin"),y=Me("opacity"),g=Me("padding"),_=Me("saturate"),E=Me("scale"),C=Me("sepia"),k=Me("skew"),T=Me("space"),R=Me("translate"),N=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",Z,e],z=()=>[Z,e],Q=()=>["",hi,lr],ne=()=>["auto",Ml,Z],re=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],de=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",Z],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[Ml,Z];return{cacheSize:500,separator:":",theme:{colors:[ou],spacing:[hi,lr],blur:["none","",cr,Z],brightness:J(),borderColor:[n],borderRadius:["none","","full",cr,Z],borderSpacing:z(),borderWidth:Q(),contrast:J(),grayscale:W(),hueRotate:J(),invert:W(),gap:z(),gradientColorStops:[n],gradientColorStopPositions:[AI,lr],inset:L(),margin:L(),opacity:J(),padding:z(),saturate:J(),scale:J(),sepia:W(),skew:J(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",Z]}],container:["container"],columns:[{columns:[cr]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...re(),Z]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",au,Z]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Z]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",au,Z]}],"grid-cols":[{"grid-cols":[ou]}],"col-start-end":[{col:["auto",{span:["full",au,Z]},Z]}],"col-start":[{"col-start":ne()}],"col-end":[{"col-end":ne()}],"grid-rows":[{"grid-rows":[ou]}],"row-start-end":[{row:["auto",{span:[au,Z]},Z]}],"row-start":[{"row-start":ne()}],"row-end":[{"row-end":ne()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Z]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Z]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Z,e]}],"min-w":[{"min-w":[Z,e,"min","max","fit"]}],"max-w":[{"max-w":[Z,e,"none","full","min","max","fit","prose",{screen:[cr]},cr]}],h:[{h:[Z,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Z,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Z,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Z,e,"auto","min","max","fit"]}],"font-size":[{text:["base",cr,lr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ey]}],"font-family":[{font:[ou]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Z]}],"line-clamp":[{"line-clamp":["none",Ml,Ey]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",hi,Z]}],"list-image":[{"list-image":["none",Z]}],"list-style-type":[{list:["none","disc","decimal",Z]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...de(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",hi,lr]}],"underline-offset":[{"underline-offset":["auto",hi,Z]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Z]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Z]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...re(),kI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",EI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},TI]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...de(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:de()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...de()]}],"outline-offset":[{"outline-offset":[hi,Z]}],"outline-w":[{outline:[hi,lr]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[hi,lr]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",cr,RI]}],"shadow-color":[{shadow:[ou]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",cr,Z]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[d]}],saturate:[{saturate:[_]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Z]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",Z]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",Z]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[au,Z]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Z]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Z]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Z]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[hi,lr,Ey]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},LI=mI(II);function Qc(...n){return LI(nI(n))}const pe=Fw.forwardRef(({className:n,variant:e="primary",size:t="md",...s},i)=>w.jsx("button",{ref:i,className:Qc("inline-flex items-center justify-center rounded-md font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":e==="primary","bg-gray-100 text-gray-900 hover:bg-gray-200":e==="secondary","border border-gray-300 bg-transparent hover:bg-gray-100":e==="outline","hover:bg-gray-100":e==="ghost"},{"h-8 px-3 text-sm":t==="sm","h-10 px-4":t==="md","h-12 px-6 text-lg":t==="lg"},n),...s}));pe.displayName="Button";const ts=I.forwardRef(({className:n,label:e,error:t,icon:s,type:i,...r},a)=>w.jsxs("div",{className:"w-full",children:[e&&w.jsx("label",{htmlFor:r.id,className:"mb-2 block text-sm font-medium text-gray-700",children:e}),w.jsxs("div",{className:"relative rounded-md shadow-sm",children:[s&&w.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:s}),w.jsx("input",{type:i,className:Qc("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset transition-colors","placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6",s?"pl-10":"pl-4",t?"ring-red-300 focus:ring-red-500":"ring-gray-300 focus:ring-blue-500",n),ref:a,...r})]}),t&&w.jsx("p",{className:"mt-1 text-sm text-red-500",children:t})]}));ts.displayName="Input";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),we=(n,e)=>{const t=I.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:o="",children:l,...u},h)=>I.createElement("svg",{ref:h,...FI,width:i,height:i,stroke:s,strokeWidth:a?Number(r)*24/Number(i):r,className:["lucide",`lucide-${DI(n)}`,o].join(" "),...u},[...e.map(([d,f])=>I.createElement(d,f)),...Array.isArray(l)?l:[l]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=we("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=we("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=we("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=we("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=we("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=we("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=we("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=we("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=we("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=we("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=we("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=we("PauseCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=we("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=we("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=we("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=we("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=we("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=we("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=we("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=we("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function KI(){const n=pa(),e=nr(d=>d.login),[t,s]=I.useState(""),[i,r]=I.useState(""),[a,o]=I.useState(""),[l,u]=I.useState(!1),h=async d=>{d.preventDefault(),u(!0),o("");try{await e(t,i),n(t.includes("admin")?"/admin":"/student")}catch{o("Invalid credentials")}finally{u(!1)}};return w.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"w-full max-w-md space-y-8",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"mx-auto h-12 w-12 rounded-full bg-blue-100 p-2",children:w.jsx(z_,{className:"h-8 w-8 text-blue-600"})}),w.jsx("h2",{className:"mt-6 text-3xl font-bold tracking-tight text-gray-900",children:"Sign in to your account"}),w.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Use admin@example.com for admin access or student@example.com for student access"})]}),w.jsxs("form",{className:"mt-8 space-y-6",onSubmit:h,children:[a&&w.jsx("div",{className:"rounded-md bg-red-50 p-4 text-sm text-red-700",children:a}),w.jsxs("div",{className:"space-y-4",children:[w.jsx(ts,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,label:"Email address",icon:w.jsx(RE,{className:"h-5 w-5 text-gray-400"}),placeholder:"Enter your email",value:t,onChange:d=>s(d.target.value)}),w.jsx(ts,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,label:"Password",icon:w.jsx(z_,{className:"h-5 w-5 text-gray-400"}),placeholder:"Enter your password",value:i,onChange:d=>r(d.target.value)})]}),w.jsx(pe,{type:"submit",className:"w-full",disabled:l,children:l?"Signing in...":"Sign in"})]})]})})}function QI(){const{user:n,logout:e}=nr();return w.jsx("header",{className:"border-b border-gray-200 bg-white",children:w.jsxs("div",{className:"mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8",children:[w.jsx("div",{className:"flex items-center",children:w.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"AI Quiz Platform"})}),n&&w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(GI,{className:"h-5 w-5 text-gray-500"}),w.jsx("span",{className:"text-sm text-gray-700",children:n.name})]}),w.jsxs(pe,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-700",children:[w.jsx(jI,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})})}function Yc({children:n}){return w.jsxs("div",{className:"min-h-screen bg-gray-50",children:[w.jsx(QI,{}),w.jsx("main",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:n})]})}function Jt({className:n,...e}){return w.jsx("div",{className:Qc("rounded-lg border border-gray-200 bg-white p-6 shadow-sm",n),...e})}const tl="4.68.2";let B_=!1,Qu,DE,OE,X0,jE,$E,zE,BE,HE;function YI(n,e={auto:!1}){if(B_)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(Qu)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${Qu}'\``);B_=e.auto,Qu=n.kind,DE=n.fetch,OE=n.FormData,X0=n.File,jE=n.ReadableStream,$E=n.getMultipartRequestOptions,zE=n.getDefaultAgent,BE=n.fileFromPath,HE=n.isFsReadStream}let JI=class{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}};function ZI({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,s,i,r;try{t=fetch,s=Request,i=Response,r=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:t,Request:s,Response:i,Headers:r,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new JI(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}Qu||YI(ZI(),{auto:!0});let Lg=class K0{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const s=K0.NEWLINE_CHARS.has(t[t.length-1]||"");let i=t.split(K0.NEWLINE_REGEXP);return s&&i.pop(),i.length===1&&!s?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),s||(this.buffer=[i.pop()||""]),i)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new oe(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new oe(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new oe("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}};Lg.NEWLINE_CHARS=new Set([`
`,"\r"]);Lg.NEWLINE_REGEXP=/\r\n|[\n\r]/g;let Ah=class xu{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let s=!1;async function*i(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let r=!1;try{for await(const a of e2(e,t))if(!r){if(a.data.startsWith("[DONE]")){r=!0;continue}if(a.event===null){let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(o&&o.error)throw new bn(void 0,o.error,void 0,void 0);yield o}else{let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(a.event=="error")throw new bn(void 0,o.error,o.message,void 0);yield{event:a.event,data:o}}}r=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{r||t.abort()}}return new xu(i,t)}static fromReadableStream(e,t){let s=!1;async function*i(){const a=new Lg,o=UE(e);for await(const l of o)for(const u of a.decode(l))yield u;for(const l of a.flush())yield l}async function*r(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const o of i())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||t.abort()}}return new xu(r,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),i=r=>({next:()=>{if(r.length===0){const a=s.next();e.push(a),t.push(a)}return r.shift()}});return[new xu(()=>i(e),this.controller),new xu(()=>i(t),this.controller)]}toReadableStream(){const e=this;let t;const s=new TextEncoder;return new jE({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await t.next();if(a)return i.close();const o=s.encode(JSON.stringify(r)+`
`);i.enqueue(o)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}};async function*e2(n,e){if(!n.body)throw e.abort(),new oe("Attempted to iterate over a response with no body");const t=new s2,s=new Lg,i=UE(n.body);for await(const r of t2(i))for(const a of s.decode(r)){const o=t.decode(a);o&&(yield o)}for(const r of s.flush()){const a=t.decode(r);a&&(yield a)}}async function*t2(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const s=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let i=new Uint8Array(e.length+s.length);i.set(e),i.set(s,e.length),e=i;let r;for(;(r=n2(e))!==-1;)yield e.slice(0,r),e=e.slice(r)}e.length>0&&(yield e)}function n2(n){for(let s=0;s<n.length-2;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}let s2=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,i]=i2(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}};function i2(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}function UE(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const WE=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",VE=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Fg(n),Fg=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",r2=n=>VE(n)||WE(n)||HE(n);async function qE(n,e,t){var i;if(n=await n,VE(n))return n;if(WE(n)){const r=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=Fg(r)?[await r.arrayBuffer()]:[r];return new X0(a,e,t)}const s=await a2(n);if(e||(e=l2(n)??"unknown_file"),!(t!=null&&t.type)){const r=(i=s[0])==null?void 0:i.type;typeof r=="string"&&(t={...t,type:r})}return new X0(s,e,t)}async function a2(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(Fg(n))e.push(await n.arrayBuffer());else if(c2(n))for await(const s of n)e.push(s);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${o2(n)}`);return e}function o2(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function l2(n){var e;return Cy(n.name)||Cy(n.filename)||((e=Cy(n.path))==null?void 0:e.split(/[\\/]/).pop())}const Cy=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},c2=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",H_=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",Wc=async n=>{const e=await u2(n.body);return $E(e,n)},u2=async n=>{const e=new OE;return await Promise.all(Object.entries(n||{}).map(([t,s])=>Q0(e,t,s))),e},Q0=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(r2(t)){const s=await qE(t);n.append(e,s)}else if(Array.isArray(t))await Promise.all(t.map(s=>Q0(n,e+"[]",s)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([s,i])=>Q0(n,`${e}[${s}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var Nl={},h2=function(n,e,t,s,i){if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},d2=function(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)},Sf;async function GE(n){const{response:e}=n;if(n.options.stream)return Il("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):Ah.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type");if((t==null?void 0:t.includes("application/json"))||(t==null?void 0:t.includes("application/vnd.api+json"))){const r=await e.json();return Il("response",e.status,e.url,e.headers,r),XE(r,e)}const i=await e.text();return Il("response",e.status,e.url,e.headers,i),i}function XE(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}let KE=class QE extends Promise{constructor(e,t=GE){super(s=>{s(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new QE(this.responsePromise,async t=>XE(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}},f2=class{constructor({baseURL:e,maxRetries:t=2,timeout:s=6e5,httpAgent:i,fetch:r}){this.baseURL=e,this.maxRetries=Ty("maxRetries",t),this.timeout=Ty("timeout",s),this.httpAgent=i,this.fetch=r??DE}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...w2(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${A2()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(async i=>{const r=i&&Fg(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:t,...i,body:r}}))}getAPIList(e,t,s){return this.requestAPIList(t,{method:"get",path:e,...s})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var v;const{method:s,path:i,query:r,headers:a={}}=e,o=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:H_(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,l=this.calculateContentLength(o),u=this.buildURL(i,r);"timeout"in e&&Ty("timeout",e.timeout);const h=e.timeout??this.timeout,d=e.httpAgent??this.httpAgent??zE(u),f=h+1e3;typeof((v=d==null?void 0:d.options)==null?void 0:v.timeout)=="number"&&f>(d.options.timeout??0)&&(d.options.timeout=f),this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const p=this.buildHeaders({options:e,headers:a,contentLength:l,retryCount:t});return{req:{method:s,...o&&{body:o},headers:p,...d&&{agent:d},signal:e.signal??null},url:u,timeout:h}}buildHeaders({options:e,headers:t,contentLength:s,retryCount:i}){const r={};s&&(r["content-length"]=s);const a=this.defaultHeaders(e);return q_(r,a),q_(r,t),H_(e.body)&&Qu!=="node"&&delete r["content-type"],G_(a,"x-stainless-retry-count")===void 0&&G_(t,"x-stainless-retry-count")===void 0&&(r["x-stainless-retry-count"]=String(i)),this.validateHeaders(r,t),r}async prepareOptions(e){}async prepareRequest(e,{url:t,options:s}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,s,i){return bn.generate(e,t,s,i)}request(e,t=null){return new KE(this.makeRequest(e,t))}async makeRequest(e,t){var d,f;const s=await e,i=s.maxRetries??this.maxRetries;t==null&&(t=i),await this.prepareOptions(s);const{req:r,url:a,timeout:o}=this.buildRequest(s,{retryCount:i-t});if(await this.prepareRequest(r,{url:a,options:s}),Il("request",a,s,r.headers),(d=s.signal)!=null&&d.aborted)throw new ks;const l=new AbortController,u=await this.fetchWithTimeout(a,r,o,l).catch(Y0);if(u instanceof Error){if((f=s.signal)!=null&&f.aborted)throw new ks;if(t)return this.retryRequest(s,t);throw u.name==="AbortError"?new Nx:new Dg({cause:u})}const h=m2(u.headers);if(!u.ok){if(t&&this.shouldRetry(u)){const g=`retrying, ${t} attempts remaining`;return Il(`response (error; ${g})`,u.status,a,h),this.retryRequest(s,t,h)}const p=await u.text().catch(g=>Y0(g).message),m=x2(p),v=m?void 0:p;throw Il(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,u.status,a,h,v),this.makeStatusError(u.status,m,v,h)}return{response:u,options:s,controller:l}}requestAPIList(e,t){const s=this.makeRequest(t,null);return new p2(this,s,e)}buildURL(e,t){const s=_2(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return JE(i)||(t={...i,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(s.search=this.stringifyQuery(t)),s.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new oe(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,s,i){const{signal:r,...a}=t||{};r&&r.addEventListener("abort",()=>i.abort());const o=setTimeout(()=>i.abort(),s);return this.getRequestClient().fetch.call(void 0,e,{signal:i.signal,...a}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s){let i;const r=s==null?void 0:s["retry-after-ms"];if(r){const o=parseFloat(r);Number.isNaN(o)||(i=o)}const a=s==null?void 0:s["retry-after"];if(a&&!i){const o=parseFloat(a);Number.isNaN(o)?i=Date.parse(a)-Date.now():i=o*1e3}if(!(i&&0<=i&&i<60*1e3)){const o=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,o)}return await Zd(i),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const r=t-e,a=Math.min(.5*Math.pow(2,r),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${tl}`}};class YE{constructor(e,t,s,i){Sf.set(this,void 0),h2(this,Sf,e),this.options=i,this.response=t,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new oe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const s=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[i,r]of s)e.url.searchParams.set(i,r);t.query=void 0,t.path=e.url.toString()}return await d2(this,Sf,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Sf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}let p2=class extends KE{constructor(e,t,s){super(t,async i=>new s(e,i.response,await GE(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}};const m2=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const s=t.toString();return e[s.toLowerCase()]||e[s]}}),g2={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},xn=n=>typeof n=="object"&&n!==null&&!JE(n)&&Object.keys(n).every(e=>ZE(g2,e)),y2=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tl,"X-Stainless-OS":W_(Deno.build.os),"X-Stainless-Arch":U_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tl,"X-Stainless-OS":W_(process.platform),"X-Stainless-Arch":U_(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=v2();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function v2(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const i=s[1]||0,r=s[2]||0,a=s[3]||0;return{browser:e,version:`${i}.${r}.${a}`}}}return null}const U_=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",W_=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let V_;const w2=()=>V_??(V_=y2()),x2=n=>{try{return JSON.parse(n)}catch{return}},b2=new RegExp("^(?:[a-z]+:)?//","i"),_2=n=>b2.test(n),Zd=n=>new Promise(e=>setTimeout(e,n)),Ty=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new oe(`${n} must be an integer`);if(e<0)throw new oe(`${n} must be a positive integer`);return e},Y0=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},Ef=n=>{var e,t,s,i;if(typeof process<"u")return((e=Nl==null?void 0:Nl[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(s=(t=Deno.env)==null?void 0:t.get)==null?void 0:s.call(t,n))==null?void 0:i.trim()};function JE(n){if(!n)return!0;for(const e in n)return!1;return!0}function ZE(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function q_(n,e){for(const t in e){if(!ZE(e,t))continue;const s=t.toLowerCase();if(!s)continue;const i=e[t];i===null?delete n[s]:i!==void 0&&(n[s]=i)}}function Il(n,...e){typeof process<"u"&&(Nl==null?void 0:Nl.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${n}`,...e)}const A2=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),S2=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",E2=n=>typeof(n==null?void 0:n.get)=="function",G_=(n,e)=>{var s;const t=e.toLowerCase();if(E2(n)){const i=((s=e[0])==null?void 0:s.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(r,a,o)=>a+o.toUpperCase());for(const r of[e,t,e.toUpperCase(),i]){const a=n.get(r);if(a)return a}}for(const[i,r]of Object.entries(n))if(i.toLowerCase()===t)return Array.isArray(r)?(r.length<=1||console.warn(`Received ${r.length} entries for the ${e} header, using the first entry.`),r[0]):r};function Ry(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class oe extends Error{}let bn=class J0 extends oe{constructor(e,t,s,i){super(`${J0.makeMessage(e,t,s)}`),this.status=e,this.headers=i,this.request_id=i==null?void 0:i["x-request-id"];const r=t;this.error=r,this.code=r==null?void 0:r.code,this.param=r==null?void 0:r.param,this.type=r==null?void 0:r.type}static makeMessage(e,t,s){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,s,i){if(!e)return new Dg({message:s,cause:Y0(t)});const r=t==null?void 0:t.error;return e===400?new ek(e,r,s,i):e===401?new tk(e,r,s,i):e===403?new nk(e,r,s,i):e===404?new sk(e,r,s,i):e===409?new ik(e,r,s,i):e===422?new rk(e,r,s,i):e===429?new ak(e,r,s,i):e>=500?new ok(e,r,s,i):new J0(e,r,s,i)}},ks=class extends bn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}},Dg=class extends bn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}},Nx=class extends Dg{constructor({message:e}={}){super({message:e??"Request timed out."})}},ek=class extends bn{constructor(){super(...arguments),this.status=400}},tk=class extends bn{constructor(){super(...arguments),this.status=401}},nk=class extends bn{constructor(){super(...arguments),this.status=403}},sk=class extends bn{constructor(){super(...arguments),this.status=404}},ik=class extends bn{constructor(){super(...arguments),this.status=409}},rk=class extends bn{constructor(){super(...arguments),this.status=422}},ak=class extends bn{constructor(){super(...arguments),this.status=429}},ok=class extends bn{};class lk extends oe{constructor(){super("Could not parse response content as the length limit was reached")}}class ck extends oe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}const Z0="RFC3986",ev={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},k2="RFC1738",C2=Array.isArray,Is=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),Py=1024,T2=(n,e,t,s,i)=>{if(n.length===0)return n;let r=n;if(typeof n=="symbol"?r=Symbol.prototype.toString.call(n):typeof n!="string"&&(r=String(n)),t==="iso-8859-1")return escape(r).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<r.length;o+=Py){const l=r.length>=Py?r.slice(o,o+Py):r,u=[];for(let h=0;h<l.length;++h){let d=l.charCodeAt(h);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===k2&&(d===40||d===41)){u[u.length]=l.charAt(h);continue}if(d<128){u[u.length]=Is[d];continue}if(d<2048){u[u.length]=Is[192|d>>6]+Is[128|d&63];continue}if(d<55296||d>=57344){u[u.length]=Is[224|d>>12]+Is[128|d>>6&63]+Is[128|d&63];continue}h+=1,d=65536+((d&1023)<<10|l.charCodeAt(h)&1023),u[u.length]=Is[240|d>>18]+Is[128|d>>12&63]+Is[128|d>>6&63]+Is[128|d&63]}a+=u.join("")}return a};function R2(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function X_(n,e){if(C2(n)){const t=[];for(let s=0;s<n.length;s+=1)t.push(e(n[s]));return t}return e(n)}const P2=Object.prototype.hasOwnProperty,uk={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},Os=Array.isArray,M2=Array.prototype.push,hk=function(n,e){M2.apply(n,Os(e)?e:[e])},N2=Date.prototype.toISOString,lt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:T2,encodeValuesOnly:!1,format:Z0,formatter:ev[Z0],indices:!1,serializeDate(n){return N2.call(n)},skipNulls:!1,strictNullHandling:!1};function I2(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const My={};function dk(n,e,t,s,i,r,a,o,l,u,h,d,f,p,m,v,b,y){let g=n,_=y,E=0,C=!1;for(;(_=_.get(My))!==void 0&&!C;){const P=_.get(n);if(E+=1,typeof P<"u"){if(P===E)throw new RangeError("Cyclic object value");C=!0}typeof _.get(My)>"u"&&(E=0)}if(typeof u=="function"?g=u(e,g):g instanceof Date?g=f==null?void 0:f(g):t==="comma"&&Os(g)&&(g=X_(g,function(P){return P instanceof Date?f==null?void 0:f(P):P})),g===null){if(r)return l&&!v?l(e,lt.encoder,b,"key",p):e;g=""}if(I2(g)||R2(g)){if(l){const P=v?e:l(e,lt.encoder,b,"key",p);return[(m==null?void 0:m(P))+"="+(m==null?void 0:m(l(g,lt.encoder,b,"value",p)))]}return[(m==null?void 0:m(e))+"="+(m==null?void 0:m(String(g)))]}const k=[];if(typeof g>"u")return k;let T;if(t==="comma"&&Os(g))v&&l&&(g=X_(g,l)),T=[{value:g.length>0?g.join(",")||null:void 0}];else if(Os(u))T=u;else{const P=Object.keys(g);T=h?P.sort(h):P}const R=o?String(e).replace(/\./g,"%2E"):String(e),N=s&&Os(g)&&g.length===1?R+"[]":R;if(i&&Os(g)&&g.length===0)return N+"[]";for(let P=0;P<T.length;++P){const L=T[P],z=typeof L=="object"&&typeof L.value<"u"?L.value:g[L];if(a&&z===null)continue;const Q=d&&o?L.replace(/\./g,"%2E"):L,ne=Os(g)?typeof t=="function"?t(N,Q):N:N+(d?"."+Q:"["+Q+"]");y.set(n,E);const re=new WeakMap;re.set(My,y),hk(k,dk(z,ne,t,s,i,r,a,o,t==="comma"&&v&&Os(g)?null:l,u,h,d,f,p,m,v,b,re))}return k}function L2(n=lt){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||lt.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=Z0;if(typeof n.format<"u"){if(!P2.call(ev,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const s=ev[t];let i=lt.filter;(typeof n.filter=="function"||Os(n.filter))&&(i=n.filter);let r;if(n.arrayFormat&&n.arrayFormat in uk?r=n.arrayFormat:"indices"in n?r=n.indices?"indices":"repeat":r=lt.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:lt.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:lt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:lt.allowEmptyArrays,arrayFormat:r,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:lt.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?lt.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:lt.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:lt.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:lt.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:lt.encodeValuesOnly,filter:i,format:t,formatter:s,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:lt.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:lt.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:lt.strictNullHandling}}function F2(n,e={}){let t=n;const s=L2(e);let i,r;typeof s.filter=="function"?(r=s.filter,t=r("",t)):Os(s.filter)&&(r=s.filter,i=r);const a=[];if(typeof t!="object"||t===null)return"";const o=uk[s.arrayFormat],l=o==="comma"&&s.commaRoundTrip;i||(i=Object.keys(t)),s.sort&&i.sort(s.sort);const u=new WeakMap;for(let f=0;f<i.length;++f){const p=i[f];s.skipNulls&&t[p]===null||hk(a,dk(t[p],p,o,l,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,u))}const h=a.join(s.delimiter);let d=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),h.length>0?d+h:""}class Ix extends YE{constructor(e,t,s,i){super(e,t,s,i),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Ms extends YE{constructor(e,t,s,i){super(e,t,s,i),this.data=s.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var s;const e=this.getPaginatedItems();if(!e.length)return null;const t=(s=e[e.length-1])==null?void 0:s.id;return t?{params:{after:t}}:null}}let _e=class{constructor(e){this._client=e}},hm=class extends _e{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}};hm||(hm={});let dm=class extends _e{constructor(){super(...arguments),this.completions=new hm(this._client)}};(function(n){n.Completions=hm})(dm||(dm={}));class fm extends _e{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}fm||(fm={});class pm extends _e{create(e,t){return this._client.post("/audio/transcriptions",Wc({body:e,...t}))}}pm||(pm={});class mm extends _e{create(e,t){return this._client.post("/audio/translations",Wc({body:e,...t}))}}mm||(mm={});class gm extends _e{constructor(){super(...arguments),this.transcriptions=new pm(this._client),this.translations=new mm(this._client),this.speech=new fm(this._client)}}(function(n){n.Transcriptions=pm,n.Translations=mm,n.Speech=fm})(gm||(gm={}));class ym extends _e{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return xn(e)?this.list({},e):this._client.getAPIList("/batches",Lx,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class Lx extends Ms{}(function(n){n.BatchesPage=Lx})(ym||(ym={}));class vm extends _e{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,s){return this._client.post(`/assistants/${e}`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e={},t){return xn(e)?this.list({},e):this._client.getAPIList("/assistants",Fx,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Fx extends Ms{}(function(n){n.AssistantsPage=Fx})(vm||(vm={}));function K_(n){return typeof n.parse=="function"}const Ll=n=>(n==null?void 0:n.role)==="assistant",fk=n=>(n==null?void 0:n.role)==="function",pk=n=>(n==null?void 0:n.role)==="tool";var os=function(n,e,t,s,i){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Oe=function(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)},tv,ep,tp,bu,_u,np,Au,gi,Su,wm,xm,nl,mk;class gk{constructor(){tv.add(this),this.controller=new AbortController,ep.set(this,void 0),tp.set(this,()=>{}),bu.set(this,()=>{}),_u.set(this,void 0),np.set(this,()=>{}),Au.set(this,()=>{}),gi.set(this,{}),Su.set(this,!1),wm.set(this,!1),xm.set(this,!1),nl.set(this,!1),os(this,ep,new Promise((e,t)=>{os(this,tp,e,"f"),os(this,bu,t,"f")}),"f"),os(this,_u,new Promise((e,t)=>{os(this,np,e,"f"),os(this,Au,t,"f")}),"f"),Oe(this,ep,"f").catch(()=>{}),Oe(this,_u,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Oe(this,tv,"m",mk).bind(this))},0)}_connected(){this.ended||(Oe(this,tp,"f").call(this),this._emit("connect"))}get ended(){return Oe(this,Su,"f")}get errored(){return Oe(this,wm,"f")}get aborted(){return Oe(this,xm,"f")}abort(){this.controller.abort()}on(e,t){return(Oe(this,gi,"f")[e]||(Oe(this,gi,"f")[e]=[])).push({listener:t}),this}off(e,t){const s=Oe(this,gi,"f")[e];if(!s)return this;const i=s.findIndex(r=>r.listener===t);return i>=0&&s.splice(i,1),this}once(e,t){return(Oe(this,gi,"f")[e]||(Oe(this,gi,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{os(this,nl,!0,"f"),e!=="error"&&this.once("error",s),this.once(e,t)})}async done(){os(this,nl,!0,"f"),await Oe(this,_u,"f")}_emit(e,...t){if(Oe(this,Su,"f"))return;e==="end"&&(os(this,Su,!0,"f"),Oe(this,np,"f").call(this));const s=Oe(this,gi,"f")[e];if(s&&(Oe(this,gi,"f")[e]=s.filter(i=>!i.once),s.forEach(({listener:i})=>i(...t))),e==="abort"){const i=t[0];!Oe(this,nl,"f")&&!(s!=null&&s.length)&&Promise.reject(i),Oe(this,bu,"f").call(this,i),Oe(this,Au,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=t[0];!Oe(this,nl,"f")&&!(s!=null&&s.length)&&Promise.reject(i),Oe(this,bu,"f").call(this,i),Oe(this,Au,"f").call(this,i),this._emit("end")}}_emitFinal(){}}ep=new WeakMap,tp=new WeakMap,bu=new WeakMap,_u=new WeakMap,np=new WeakMap,Au=new WeakMap,gi=new WeakMap,Su=new WeakMap,wm=new WeakMap,xm=new WeakMap,nl=new WeakMap,tv=new WeakSet,mk=function(e){if(os(this,wm,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new ks),e instanceof ks)return os(this,xm,!0,"f"),this._emit("abort",e);if(e instanceof oe)return this._emit("error",e);if(e instanceof Error){const t=new oe(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new oe(String(e)))};function yk(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function ef(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function D2(n,e){return!e||!vk(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,tool_calls:t.message.tool_calls??[]}}))}:Dx(n,e)}function Dx(n,e){const t=n.choices.map(s=>{var i;if(s.finish_reason==="length")throw new lk;if(s.finish_reason==="content_filter")throw new ck;return{...s,message:{...s.message,tool_calls:((i=s.message.tool_calls)==null?void 0:i.map(r=>j2(e,r)))??[],parsed:s.message.content&&!s.message.refusal?O2(e,s.message.content):null}}});return{...n,choices:t}}function O2(n,e){var t,s;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((s=n.response_format)==null?void 0:s.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function j2(n,e){var s;const t=(s=n.tools)==null?void 0:s.find(i=>{var r;return((r=i.function)==null?void 0:r.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:ef(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function $2(n,e){var s;if(!n)return!1;const t=(s=n.tools)==null?void 0:s.find(i=>{var r;return((r=i.function)==null?void 0:r.name)===e.function.name});return ef(t)||(t==null?void 0:t.function.strict)||!1}function vk(n){var e;return yk(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>ef(t)||t.type==="function"&&t.function.strict===!0))??!1}function z2(n){for(const e of n??[]){if(e.type!=="function")throw new oe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new oe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var on=function(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)},jt,nv,bm,sv,iv,rv,wk,av;const Q_=10;class xk extends gk{constructor(){super(...arguments),jt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var s;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(s=e.choices[0])==null?void 0:s.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(fk(e)||pk(e))&&e.content)this._emit("functionCallResult",e.content);else if(Ll(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Ll(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new oe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),on(this,jt,"m",nv).call(this)}async finalMessage(){return await this.done(),on(this,jt,"m",bm).call(this)}async finalFunctionCall(){return await this.done(),on(this,jt,"m",sv).call(this)}async finalFunctionCallResult(){return await this.done(),on(this,jt,"m",iv).call(this)}async totalUsage(){return await this.done(),on(this,jt,"m",rv).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=on(this,jt,"m",bm).call(this);t&&this._emit("finalMessage",t);const s=on(this,jt,"m",nv).call(this);s&&this._emit("finalContent",s);const i=on(this,jt,"m",sv).call(this);i&&this._emit("finalFunctionCall",i);const r=on(this,jt,"m",iv).call(this);r!=null&&this._emit("finalFunctionCallResult",r),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",on(this,jt,"m",rv).call(this))}async _createChatCompletion(e,t,s){const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),on(this,jt,"m",wk).call(this,t);const r=await e.chat.completions.create({...t,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Dx(r,t))}async _runChatCompletion(e,t,s){for(const i of t.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,t,s)}async _runFunctions(e,t,s){var f;const i="function",{function_call:r="auto",stream:a,...o}=t,l=typeof r!="string"&&(r==null?void 0:r.name),{maxChatCompletions:u=Q_}=s||{},h={};for(const p of t.functions)h[p.name||p.function.name]=p;const d=t.functions.map(p=>({name:p.name||p.function.name,parameters:p.parameters,description:p.description}));for(const p of t.messages)this._addMessage(p,!1);for(let p=0;p<u;++p){const v=(f=(await this._createChatCompletion(e,{...o,function_call:r,functions:d,messages:[...this.messages]},s)).choices[0])==null?void 0:f.message;if(!v)throw new oe("missing message in ChatCompletion response");if(!v.function_call)return;const{name:b,arguments:y}=v.function_call,g=h[b];if(g){if(l&&l!==b){const k=`Invalid function_call: ${JSON.stringify(b)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:b,content:k});continue}}else{const k=`Invalid function_call: ${JSON.stringify(b)}. Available options are: ${d.map(T=>JSON.stringify(T.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:b,content:k});continue}let _;try{_=K_(g)?await g.parse(y):y}catch(k){this._addMessage({role:i,name:b,content:k instanceof Error?k.message:String(k)});continue}const E=await g.function(_,this),C=on(this,jt,"m",av).call(this,E);if(this._addMessage({role:i,name:b,content:C}),l)return}}async _runTools(e,t,s){var p,m,v;const i="tool",{tool_choice:r="auto",stream:a,...o}=t,l=typeof r!="string"&&((p=r==null?void 0:r.function)==null?void 0:p.name),{maxChatCompletions:u=Q_}=s||{},h=t.tools.map(b=>{if(ef(b)){if(!b.$callback)throw new oe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),d={};for(const b of h)b.type==="function"&&(d[b.function.name||b.function.function.name]=b.function);const f="tools"in t?h.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(const b of t.messages)this._addMessage(b,!1);for(let b=0;b<u;++b){const g=(m=(await this._createChatCompletion(e,{...o,tool_choice:r,tools:f,messages:[...this.messages]},s)).choices[0])==null?void 0:m.message;if(!g)throw new oe("missing message in ChatCompletion response");if(!((v=g.tool_calls)!=null&&v.length))return;for(const _ of g.tool_calls){if(_.type!=="function")continue;const E=_.id,{name:C,arguments:k}=_.function,T=d[C];if(T){if(l&&l!==C){const L=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:E,content:L});continue}}else{const L=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(d).map(z=>JSON.stringify(z)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:E,content:L});continue}let R;try{R=K_(T)?await T.parse(k):k}catch(L){const z=L instanceof Error?L.message:String(L);this._addMessage({role:i,tool_call_id:E,content:z});continue}const N=await T.function(R,this),P=on(this,jt,"m",av).call(this,N);if(this._addMessage({role:i,tool_call_id:E,content:P}),l)return}}}}jt=new WeakSet,nv=function(){return on(this,jt,"m",bm).call(this).content??null},bm=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Ll(t)){const{function_call:s,...i}=t,r={...i,content:t.content??null,refusal:t.refusal??null};return s&&(r.function_call=s),r}}throw new oe("stream ended without producing a ChatCompletionMessage with role=assistant")},sv=function(){var e,t;for(let s=this.messages.length-1;s>=0;s--){const i=this.messages[s];if(Ll(i)&&(i!=null&&i.function_call))return i.function_call;if(Ll(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(t=i.tool_calls.at(-1))==null?void 0:t.function}},iv=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(fk(t)&&t.content!=null||pk(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(s=>{var i;return s.role==="assistant"&&((i=s.tool_calls)==null?void 0:i.some(r=>r.type==="function"&&r.id===t.tool_call_id))}))return t.content}},rv=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},wk=function(e){if(e.n!=null&&e.n>1)throw new oe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},av=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Sh extends xk{static runFunctions(e,t,s){const i=new Sh,r={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,r)),i}static runTools(e,t,s){const i=new Sh,r={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,r)),i}_addMessage(e,t=!0){super._addMessage(e,t),Ll(e)&&e.content&&this._emit("content",e.content)}}const bk=1,_k=2,Ak=4,Sk=8,Ek=16,kk=32,Ck=64,Tk=128,Rk=256,Pk=Tk|Rk,Mk=Ek|kk|Pk|Ck,Nk=bk|_k|Mk,Ik=Ak|Sk,B2=Nk|Ik,yt={STR:bk,NUM:_k,ARR:Ak,OBJ:Sk,NULL:Ek,BOOL:kk,NAN:Ck,INFINITY:Tk,MINUS_INFINITY:Rk,INF:Pk,SPECIAL:Mk,ATOM:Nk,COLLECTION:Ik,ALL:B2};class H2 extends Error{}class U2 extends Error{}function W2(n,e=yt.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return V2(n.trim(),e)}const V2=(n,e)=>{const t=n.length;let s=0;const i=f=>{throw new H2(`${f} at position ${s}`)},r=f=>{throw new U2(`${f} at position ${s}`)},a=()=>(d(),s>=t&&i("Unexpected end of input"),n[s]==='"'?o():n[s]==="{"?l():n[s]==="["?u():n.substring(s,s+4)==="null"||yt.NULL&e&&t-s<4&&"null".startsWith(n.substring(s))?(s+=4,null):n.substring(s,s+4)==="true"||yt.BOOL&e&&t-s<4&&"true".startsWith(n.substring(s))?(s+=4,!0):n.substring(s,s+5)==="false"||yt.BOOL&e&&t-s<5&&"false".startsWith(n.substring(s))?(s+=5,!1):n.substring(s,s+8)==="Infinity"||yt.INFINITY&e&&t-s<8&&"Infinity".startsWith(n.substring(s))?(s+=8,1/0):n.substring(s,s+9)==="-Infinity"||yt.MINUS_INFINITY&e&&1<t-s&&t-s<9&&"-Infinity".startsWith(n.substring(s))?(s+=9,-1/0):n.substring(s,s+3)==="NaN"||yt.NAN&e&&t-s<3&&"NaN".startsWith(n.substring(s))?(s+=3,NaN):h()),o=()=>{const f=s;let p=!1;for(s++;s<t&&(n[s]!=='"'||p&&n[s-1]==="\\");)p=n[s]==="\\"?!p:!1,s++;if(n.charAt(s)=='"')try{return JSON.parse(n.substring(f,++s-Number(p)))}catch(m){r(String(m))}else if(yt.STR&e)try{return JSON.parse(n.substring(f,s-Number(p))+'"')}catch{return JSON.parse(n.substring(f,n.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{s++,d();const f={};try{for(;n[s]!=="}";){if(d(),s>=t&&yt.OBJ&e)return f;const p=o();d(),s++;try{const m=a();Object.defineProperty(f,p,{value:m,writable:!0,enumerable:!0,configurable:!0})}catch(m){if(yt.OBJ&e)return f;throw m}d(),n[s]===","&&s++}}catch{if(yt.OBJ&e)return f;i("Expected '}' at end of object")}return s++,f},u=()=>{s++;const f=[];try{for(;n[s]!=="]";)f.push(a()),d(),n[s]===","&&s++}catch{if(yt.ARR&e)return f;i("Expected ']' at end of array")}return s++,f},h=()=>{if(s===0){n==="-"&&yt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n)}catch(p){if(yt.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}r(String(p))}}const f=s;for(n[s]==="-"&&s++;n[s]&&!",]}".includes(n[s]);)s++;s==t&&!(yt.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(n.substring(f,s))}catch{n.substring(f,s)==="-"&&yt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n.substring(f,n.lastIndexOf("e")))}catch(m){r(String(m))}}},d=()=>{for(;s<t&&` 
\r	`.includes(n[s]);)s++};return a()},Y_=n=>W2(n,yt.ALL^yt.NUM);var Yo=function(n,e,t,s,i){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Ae=function(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)},rt,di,Jo,ur,Ny,kf,Iy,Ly,Fy,Cf,Dy,J_;class Eh extends xk{constructor(e){super(),rt.add(this),di.set(this,void 0),Jo.set(this,void 0),ur.set(this,void 0),Yo(this,di,e,"f"),Yo(this,Jo,[],"f")}get currentChatCompletionSnapshot(){return Ae(this,ur,"f")}static fromReadableStream(e){const t=new Eh(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,s){const i=new Eh(t);return i._run(()=>i._runChatCompletion(e,{...t,stream:!0},{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,t,s){var a;super._createChatCompletion;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ae(this,rt,"m",Ny).call(this);const r=await e.chat.completions.create({...t,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const o of r)Ae(this,rt,"m",Iy).call(this,o);if((a=r.controller.signal)!=null&&a.aborted)throw new ks;return this._addChatCompletion(Ae(this,rt,"m",Cf).call(this))}async _fromReadableStream(e,t){var a;const s=t==null?void 0:t.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Ae(this,rt,"m",Ny).call(this),this._connected();const i=Ah.fromReadableStream(e,this.controller);let r;for await(const o of i)r&&r!==o.id&&this._addChatCompletion(Ae(this,rt,"m",Cf).call(this)),Ae(this,rt,"m",Iy).call(this,o),r=o.id;if((a=i.controller.signal)!=null&&a.aborted)throw new ks;return this._addChatCompletion(Ae(this,rt,"m",Cf).call(this))}[(di=new WeakMap,Jo=new WeakMap,ur=new WeakMap,rt=new WeakSet,Ny=function(){this.ended||Yo(this,ur,void 0,"f")},kf=function(t){let s=Ae(this,Jo,"f")[t.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Ae(this,Jo,"f")[t.index]=s,s)},Iy=function(t){var i,r,a,o,l,u,h,d,f,p,m,v,b,y,g;if(this.ended)return;const s=Ae(this,rt,"m",J_).call(this,t);this._emit("chunk",t,s);for(const _ of t.choices){const E=s.choices[_.index];_.delta.content!=null&&((i=E.message)==null?void 0:i.role)==="assistant"&&((r=E.message)!=null&&r.content)&&(this._emit("content",_.delta.content,E.message.content),this._emit("content.delta",{delta:_.delta.content,snapshot:E.message.content,parsed:E.message.parsed})),_.delta.refusal!=null&&((a=E.message)==null?void 0:a.role)==="assistant"&&((o=E.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:_.delta.refusal,snapshot:E.message.refusal}),((l=_.logprobs)==null?void 0:l.content)!=null&&((u=E.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(h=_.logprobs)==null?void 0:h.content,snapshot:((d=E.logprobs)==null?void 0:d.content)??[]}),((f=_.logprobs)==null?void 0:f.refusal)!=null&&((p=E.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(m=_.logprobs)==null?void 0:m.refusal,snapshot:((v=E.logprobs)==null?void 0:v.refusal)??[]});const C=Ae(this,rt,"m",kf).call(this,E);E.finish_reason&&(Ae(this,rt,"m",Fy).call(this,E),C.current_tool_call_index!=null&&Ae(this,rt,"m",Ly).call(this,E,C.current_tool_call_index));for(const k of _.delta.tool_calls??[])C.current_tool_call_index!==k.index&&(Ae(this,rt,"m",Fy).call(this,E),C.current_tool_call_index!=null&&Ae(this,rt,"m",Ly).call(this,E,C.current_tool_call_index)),C.current_tool_call_index=k.index;for(const k of _.delta.tool_calls??[]){const T=(b=E.message.tool_calls)==null?void 0:b[k.index];T!=null&&T.type&&((T==null?void 0:T.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(y=T.function)==null?void 0:y.name,index:k.index,arguments:T.function.arguments,parsed_arguments:T.function.parsed_arguments,arguments_delta:((g=k.function)==null?void 0:g.arguments)??""}):(T==null||T.type,void 0))}}},Ly=function(t,s){var a,o,l;if(Ae(this,rt,"m",kf).call(this,t).done_tool_calls.has(s))return;const r=(a=t.message.tool_calls)==null?void 0:a[s];if(!r)throw new Error("no tool call snapshot");if(!r.type)throw new Error("tool call snapshot missing `type`");if(r.type==="function"){const u=(l=(o=Ae(this,di,"f"))==null?void 0:o.tools)==null?void 0:l.find(h=>h.type==="function"&&h.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:s,arguments:r.function.arguments,parsed_arguments:ef(u)?u.$parseRaw(r.function.arguments):u!=null&&u.function.strict?JSON.parse(r.function.arguments):null})}else r.type},Fy=function(t){var i,r;const s=Ae(this,rt,"m",kf).call(this,t);if(t.message.content&&!s.content_done){s.content_done=!0;const a=Ae(this,rt,"m",Dy).call(this);this._emit("content.done",{content:t.message.content,parsed:a?a.$parseRaw(t.message.content):null})}t.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(i=t.logprobs)!=null&&i.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(r=t.logprobs)!=null&&r.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},Cf=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");const t=Ae(this,ur,"f");if(!t)throw new oe("request ended without sending any chunks");return Yo(this,ur,void 0,"f"),Yo(this,Jo,[],"f"),q2(t,Ae(this,di,"f"))},Dy=function(){var s;const t=(s=Ae(this,di,"f"))==null?void 0:s.response_format;return yk(t)?t:null},J_=function(t){var s,i,r,a;let o=Ae(this,ur,"f");const{choices:l,...u}=t;o?Object.assign(o,u):o=Yo(this,ur,{...u,choices:[]},"f");for(const{delta:h,finish_reason:d,index:f,logprobs:p=null,...m}of t.choices){let v=o.choices[f];if(v||(v=o.choices[f]={finish_reason:d,index:f,message:{},logprobs:p,...m}),p)if(!v.logprobs)v.logprobs=Object.assign({},p);else{const{content:k,refusal:T,...R}=p;Object.assign(v.logprobs,R),k&&((s=v.logprobs).content??(s.content=[]),v.logprobs.content.push(...k)),T&&((i=v.logprobs).refusal??(i.refusal=[]),v.logprobs.refusal.push(...T))}if(d&&(v.finish_reason=d,Ae(this,di,"f")&&vk(Ae(this,di,"f")))){if(d==="length")throw new lk;if(d==="content_filter")throw new ck}if(Object.assign(v,m),!h)continue;const{content:b,refusal:y,function_call:g,role:_,tool_calls:E,...C}=h;if(Object.assign(v.message,C),y&&(v.message.refusal=(v.message.refusal||"")+y),_&&(v.message.role=_),g&&(v.message.function_call?(g.name&&(v.message.function_call.name=g.name),g.arguments&&((r=v.message.function_call).arguments??(r.arguments=""),v.message.function_call.arguments+=g.arguments)):v.message.function_call=g),b&&(v.message.content=(v.message.content||"")+b,!v.message.refusal&&Ae(this,rt,"m",Dy).call(this)&&(v.message.parsed=Y_(v.message.content))),E){v.message.tool_calls||(v.message.tool_calls=[]);for(const{index:k,id:T,type:R,function:N,...P}of E){const L=(a=v.message.tool_calls)[k]??(a[k]={});Object.assign(L,P),T&&(L.id=T),R&&(L.type=R),N&&(L.function??(L.function={name:N.name??"",arguments:""})),N!=null&&N.name&&(L.function.name=N.name),N!=null&&N.arguments&&(L.function.arguments+=N.arguments,$2(Ae(this,di,"f"),L)&&(L.function.parsed_arguments=Y_(L.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("chunk",i=>{const r=t.shift();r?r.resolve(i):e.push(i)}),this.on("end",()=>{s=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{s=!0;for(const r of t)r.reject(i);t.length=0}),this.on("error",i=>{s=!0;for(const r of t)r.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((r,a)=>t.push({resolve:r,reject:a})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Ah(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function q2(n,e){const{id:t,choices:s,created:i,model:r,system_fingerprint:a,...o}=n,l={...o,id:t,choices:s.map(({message:u,finish_reason:h,index:d,logprobs:f,...p})=>{if(!h)throw new oe(`missing finish_reason for choice ${d}`);const{content:m=null,function_call:v,tool_calls:b,...y}=u,g=u.role;if(!g)throw new oe(`missing role for choice ${d}`);if(v){const{arguments:_,name:E}=v;if(_==null)throw new oe(`missing function_call.arguments for choice ${d}`);if(!E)throw new oe(`missing function_call.name for choice ${d}`);return{...p,message:{content:m,function_call:{arguments:_,name:E},role:g,refusal:u.refusal??null},finish_reason:h,index:d,logprobs:f}}return b?{...p,index:d,finish_reason:h,logprobs:f,message:{...y,role:g,content:m,refusal:u.refusal??null,tool_calls:b.map((_,E)=>{const{function:C,type:k,id:T,...R}=_,{arguments:N,name:P,...L}=C||{};if(T==null)throw new oe(`missing choices[${d}].tool_calls[${E}].id
${Tf(n)}`);if(k==null)throw new oe(`missing choices[${d}].tool_calls[${E}].type
${Tf(n)}`);if(P==null)throw new oe(`missing choices[${d}].tool_calls[${E}].function.name
${Tf(n)}`);if(N==null)throw new oe(`missing choices[${d}].tool_calls[${E}].function.arguments
${Tf(n)}`);return{...R,id:T,type:k,function:{...L,name:P,arguments:N}}})}}:{...p,message:{...y,content:m,role:g,refusal:u.refusal??null},finish_reason:h,index:d,logprobs:f}}),created:i,model:r,object:"chat.completion",...a?{system_fingerprint:a}:{}};return D2(l,e)}function Tf(n){return JSON.stringify(n)}class Fl extends Eh{static fromReadableStream(e){const t=new Fl(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,s){const i=new Fl(null),r={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,r)),i}static runTools(e,t,s){const i=new Fl(t),r={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,r)),i}}let Lk=class extends _e{parse(e,t){return z2(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(s=>Dx(s,e))}runFunctions(e,t){return e.stream?Fl.runFunctions(this._client,e,t):Sh.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?Fl.runTools(this._client,e,t):Sh.runTools(this._client,e,t)}stream(e,t){return Eh.createChatCompletion(this._client,e,t)}};class _m extends _e{constructor(){super(...arguments),this.completions=new Lk(this._client)}}(function(n){n.Completions=Lk})(_m||(_m={}));var U=function(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)},An=function(n,e,t,s,i){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Pt,ov,js,sp,us,Ta,Al,_a,Am,En,ip,rp,Yu,Eu,ku,Z_,e1,t1,n1,s1,i1,r1;class Cs extends gk{constructor(){super(...arguments),Pt.add(this),ov.set(this,[]),js.set(this,{}),sp.set(this,{}),us.set(this,void 0),Ta.set(this,void 0),Al.set(this,void 0),_a.set(this,void 0),Am.set(this,void 0),En.set(this,void 0),ip.set(this,void 0),rp.set(this,void 0),Yu.set(this,void 0)}[(ov=new WeakMap,js=new WeakMap,sp=new WeakMap,us=new WeakMap,Ta=new WeakMap,Al=new WeakMap,_a=new WeakMap,Am=new WeakMap,En=new WeakMap,ip=new WeakMap,rp=new WeakMap,Yu=new WeakMap,Pt=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("event",i=>{const r=t.shift();r?r.resolve(i):e.push(i)}),this.on("end",()=>{s=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{s=!0;for(const r of t)r.reject(i);t.length=0}),this.on("error",i=>{s=!0;for(const r of t)r.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((r,a)=>t.push({resolve:r,reject:a})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Cs;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var r;const s=t==null?void 0:t.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=Ah.fromReadableStream(e,this.controller);for await(const a of i)U(this,Pt,"m",Eu).call(this,a);if((r=i.controller.signal)!=null&&r.aborted)throw new ks;return this._addRun(U(this,Pt,"m",ku).call(this))}toReadableStream(){return new Ah(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,s,i,r){const a=new Cs;return a._run(()=>a._runToolAssistantStream(e,t,s,i,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,t,s,i,r){var u;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...i,stream:!0},l=await e.submitToolOutputs(t,s,o,{...r,signal:this.controller.signal});this._connected();for await(const h of l)U(this,Pt,"m",Eu).call(this,h);if((u=l.controller.signal)!=null&&u.aborted)throw new ks;return this._addRun(U(this,Pt,"m",ku).call(this))}static createThreadAssistantStream(e,t,s){const i=new Cs;return i._run(()=>i._threadAssistantStream(e,t,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,t,s,i){const r=new Cs;return r._run(()=>r._runAssistantStream(e,t,s,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}currentEvent(){return U(this,ip,"f")}currentRun(){return U(this,rp,"f")}currentMessageSnapshot(){return U(this,us,"f")}currentRunStepSnapshot(){return U(this,Yu,"f")}async finalRunSteps(){return await this.done(),Object.values(U(this,js,"f"))}async finalMessages(){return await this.done(),Object.values(U(this,sp,"f"))}async finalRun(){if(await this.done(),!U(this,Ta,"f"))throw Error("Final run was not received.");return U(this,Ta,"f")}async _createThreadAssistantStream(e,t,s){var o;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const r={...t,stream:!0},a=await e.createAndRun(r,{...s,signal:this.controller.signal});this._connected();for await(const l of a)U(this,Pt,"m",Eu).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new ks;return this._addRun(U(this,Pt,"m",ku).call(this))}async _createAssistantStream(e,t,s,i){var l;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...s,stream:!0},o=await e.create(t,a,{...i,signal:this.controller.signal});this._connected();for await(const u of o)U(this,Pt,"m",Eu).call(this,u);if((l=o.controller.signal)!=null&&l.aborted)throw new ks;return this._addRun(U(this,Pt,"m",ku).call(this))}static accumulateDelta(e,t){for(const[s,i]of Object.entries(t)){if(!e.hasOwnProperty(s)){e[s]=i;continue}let r=e[s];if(r==null){e[s]=i;continue}if(s==="index"||s==="type"){e[s]=i;continue}if(typeof r=="string"&&typeof i=="string")r+=i;else if(typeof r=="number"&&typeof i=="number")r+=i;else if(Ry(r)&&Ry(i))r=this.accumulateDelta(r,i);else if(Array.isArray(r)&&Array.isArray(i)){if(r.every(a=>typeof a=="string"||typeof a=="number")){r.push(...i);continue}for(const a of i){if(!Ry(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=r[o];l==null?r.push(a):r[o]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${i}, accValue: ${r}`);e[s]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,t,s){return await this._createThreadAssistantStream(t,e,s)}async _runAssistantStream(e,t,s,i){return await this._createAssistantStream(t,e,s,i)}async _runToolAssistantStream(e,t,s,i,r){return await this._createToolAssistantStream(s,e,t,i,r)}}Eu=function(e){if(!this.ended)switch(An(this,ip,e,"f"),U(this,Pt,"m",t1).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":U(this,Pt,"m",r1).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":U(this,Pt,"m",e1).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":U(this,Pt,"m",Z_).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ku=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");if(!U(this,Ta,"f"))throw Error("Final run has not been received");return U(this,Ta,"f")},Z_=function(e){const[t,s]=U(this,Pt,"m",s1).call(this,e,U(this,us,"f"));An(this,us,t,"f"),U(this,sp,"f")[t.id]=t;for(const i of s){const r=t.content[i.index];(r==null?void 0:r.type)=="text"&&this._emit("textCreated",r.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let r=i.text,a=t.content[i.index];if(a&&a.type=="text")this._emit("textDelta",r,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=U(this,Al,"f")){if(U(this,_a,"f"))switch(U(this,_a,"f").type){case"text":this._emit("textDone",U(this,_a,"f").text,U(this,us,"f"));break;case"image_file":this._emit("imageFileDone",U(this,_a,"f").image_file,U(this,us,"f"));break}An(this,Al,i.index,"f")}An(this,_a,t.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(U(this,Al,"f")!==void 0){const i=e.data.content[U(this,Al,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,U(this,us,"f"));break;case"text":this._emit("textDone",i.text,U(this,us,"f"));break}}U(this,us,"f")&&this._emit("messageDone",e.data),An(this,us,void 0,"f")}},e1=function(e){const t=U(this,Pt,"m",n1).call(this,e);switch(An(this,Yu,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const r of s.step_details.tool_calls)r.index==U(this,Am,"f")?this._emit("toolCallDelta",r,t.step_details.tool_calls[r.index]):(U(this,En,"f")&&this._emit("toolCallDone",U(this,En,"f")),An(this,Am,r.index,"f"),An(this,En,t.step_details.tool_calls[r.index],"f"),U(this,En,"f")&&this._emit("toolCallCreated",U(this,En,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":An(this,Yu,void 0,"f"),e.data.step_details.type=="tool_calls"&&U(this,En,"f")&&(this._emit("toolCallDone",U(this,En,"f")),An(this,En,void 0,"f")),this._emit("runStepDone",e.data,t);break}},t1=function(e){U(this,ov,"f").push(e),this._emit("event",e)},n1=function(e){switch(e.event){case"thread.run.step.created":return U(this,js,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=U(this,js,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const i=Cs.accumulateDelta(t,s.delta);U(this,js,"f")[e.data.id]=i}return U(this,js,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":U(this,js,"f")[e.data.id]=e.data;break}if(U(this,js,"f")[e.data.id])return U(this,js,"f")[e.data.id];throw new Error("No snapshot available")},s1=function(e,t){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const r of i.delta.content)if(r.index in t.content){let a=t.content[r.index];t.content[r.index]=U(this,Pt,"m",i1).call(this,r,a)}else t.content[r.index]=r,s.push(r);return[t,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},i1=function(e,t){return Cs.accumulateDelta(t,e)},r1=function(e){switch(An(this,rp,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":An(this,Ta,e.data,"f"),U(this,En,"f")&&(this._emit("toolCallDone",U(this,En,"f")),An(this,En,void 0,"f"));break}};let Sm=class extends _e{create(e,t,s){return this._client.post(`/threads/${e}/messages`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}retrieve(e,t,s){return this._client.get(`/threads/${e}/messages/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}update(e,t,s,i){return this._client.post(`/threads/${e}/messages/${t}`,{body:s,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},s){return xn(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Ox,{query:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}del(e,t,s){return this._client.delete(`/threads/${e}/messages/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}};class Ox extends Ms{}(function(n){n.MessagesPage=Ox})(Sm||(Sm={}));class Em extends _e{retrieve(e,t,s,i={},r){return xn(i)?this.retrieve(e,t,s,{},i):this._client.get(`/threads/${e}/runs/${t}/steps/${s}`,{query:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t,s={},i){return xn(s)?this.list(e,t,{},s):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,jx,{query:s,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class jx extends Ms{}(function(n){n.RunStepsPage=jx})(Em||(Em={}));class km extends _e{constructor(){super(...arguments),this.steps=new Em(this._client)}create(e,t,s){const{include:i,...r}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:t.stream??!1})}retrieve(e,t,s){return this._client.get(`/threads/${e}/runs/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}update(e,t,s,i){return this._client.post(`/threads/${e}/runs/${t}`,{body:s,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},s){return xn(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,$x,{query:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}cancel(e,t,s){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async createAndPoll(e,t,s){const i=await this.create(e,t,s);return await this.poll(e,i.id,s)}createAndStream(e,t,s){return Cs.createAssistantStream(e,this._client.beta.threads.runs,t,s)}async poll(e,t,s){const i={...s==null?void 0:s.headers,"X-Stainless-Poll-Helper":"true"};for(s!=null&&s.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=s.pollIntervalMs.toString());;){const{data:r,response:a}=await this.retrieve(e,t,{...s,headers:{...s==null?void 0:s.headers,...i}}).withResponse();switch(r.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(s!=null&&s.pollIntervalMs)o=s.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await Zd(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return r}}}stream(e,t,s){return Cs.createAssistantStream(e,this._client.beta.threads.runs,t,s)}submitToolOutputs(e,t,s,i){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:s,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:s.stream??!1})}async submitToolOutputsAndPoll(e,t,s,i){const r=await this.submitToolOutputs(e,t,s,i);return await this.poll(e,r.id,i)}submitToolOutputsStream(e,t,s,i){return Cs.createToolAssistantStream(e,t,this._client.beta.threads.runs,s,i)}}class $x extends Ms{}(function(n){n.RunsPage=$x,n.Steps=Em,n.RunStepsPage=jx})(km||(km={}));class Cm extends _e{constructor(){super(...arguments),this.runs=new km(this._client),this.messages=new Sm(this._client)}create(e={},t){return xn(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,s){return this._client.post(`/threads/${e}`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const s=await this.createAndRun(e,t);return await this.runs.poll(s.thread_id,s.id,t)}createAndRunStream(e,t){return Cs.createThreadAssistantStream(e,this._client.beta.threads,t)}}(function(n){n.Runs=km,n.RunsPage=$x,n.Messages=Sm,n.MessagesPage=Ox})(Cm||(Cm={}));const G2=async n=>{const e=await Promise.allSettled(n),t=e.filter(i=>i.status==="rejected");if(t.length){for(const i of t)console.error(i.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const s=[];for(const i of e)i.status==="fulfilled"&&s.push(i.value);return s};let Tm=class extends _e{create(e,t,s){return this._client.post(`/vector_stores/${e}/files`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}retrieve(e,t,s){return this._client.get(`/vector_stores/${e}/files/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,t={},s){return xn(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,Og,{query:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}del(e,t,s){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async createAndPoll(e,t,s){const i=await this.create(e,t,s);return await this.poll(e,i.id,s)}async poll(e,t,s){const i={...s==null?void 0:s.headers,"X-Stainless-Poll-Helper":"true"};for(s!=null&&s.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=s.pollIntervalMs.toString());;){const r=await this.retrieve(e,t,{...s,headers:i}).withResponse(),a=r.data;switch(a.status){case"in_progress":let o=5e3;if(s!=null&&s.pollIntervalMs)o=s.pollIntervalMs;else{const l=r.response.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await Zd(o);break;case"failed":case"completed":return a}}}async upload(e,t,s){const i=await this._client.files.create({file:t,purpose:"assistants"},s);return this.create(e,{file_id:i.id},s)}async uploadAndPoll(e,t,s){const i=await this.upload(e,t,s);return await this.poll(e,i.id,s)}};class Og extends Ms{}(function(n){n.VectorStoreFilesPage=Og})(Tm||(Tm={}));class Rm extends _e{create(e,t,s){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}retrieve(e,t,s){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}cancel(e,t,s){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async createAndPoll(e,t,s){const i=await this.create(e,t);return await this.poll(e,i.id,s)}listFiles(e,t,s={},i){return xn(s)?this.listFiles(e,t,{},s):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,Og,{query:s,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async poll(e,t,s){const i={...s==null?void 0:s.headers,"X-Stainless-Poll-Helper":"true"};for(s!=null&&s.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=s.pollIntervalMs.toString());;){const{data:r,response:a}=await this.retrieve(e,t,{...s,headers:i}).withResponse();switch(r.status){case"in_progress":let o=5e3;if(s!=null&&s.pollIntervalMs)o=s.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await Zd(o);break;case"failed":case"cancelled":case"completed":return r}}}async uploadAndPoll(e,{files:t,fileIds:s=[]},i){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const r=(i==null?void 0:i.maxConcurrency)??5,a=Math.min(r,t.length),o=this._client,l=t.values(),u=[...s];async function h(f){for(let p of f){const m=await o.files.create({file:p,purpose:"assistants"},i);u.push(m.id)}}const d=Array(a).fill(l).map(h);return await G2(d),await this.createAndPoll(e,{file_ids:u})}}Rm||(Rm={});class Pm extends _e{constructor(){super(...arguments),this.files=new Tm(this._client),this.fileBatches=new Rm(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,s){return this._client.post(`/vector_stores/${e}`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e={},t){return xn(e)?this.list({},e):this._client.getAPIList("/vector_stores",zx,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class zx extends Ms{}(function(n){n.VectorStoresPage=zx,n.Files=Tm,n.VectorStoreFilesPage=Og,n.FileBatches=Rm})(Pm||(Pm={}));class Mm extends _e{constructor(){super(...arguments),this.vectorStores=new Pm(this._client),this.chat=new _m(this._client),this.assistants=new vm(this._client),this.threads=new Cm(this._client)}}(function(n){n.VectorStores=Pm,n.VectorStoresPage=zx,n.Chat=_m,n.Assistants=vm,n.AssistantsPage=Fx,n.Threads=Cm})(Mm||(Mm={}));let Nm=class extends _e{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}};Nm||(Nm={});class Im extends _e{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}Im||(Im={});class Lm extends _e{create(e,t){return this._client.post("/files",Wc({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return xn(e)?this.list({},e):this._client.getAPIList("/files",Bx,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t==null?void 0:t.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:s=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),r=Date.now();let a=await this.retrieve(e);for(;!a.status||!i.has(a.status);)if(await Zd(t),a=await this.retrieve(e),Date.now()-r>s)throw new Nx({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return a}}class Bx extends Ix{}(function(n){n.FileObjectsPage=Bx})(Lm||(Lm={}));class Fm extends _e{list(e,t={},s){return xn(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Hx,{query:t,...s})}}class Hx extends Ms{}(function(n){n.FineTuningJobCheckpointsPage=Hx})(Fm||(Fm={}));class Dm extends _e{constructor(){super(...arguments),this.checkpoints=new Fm(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return xn(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Ux,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},s){return xn(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Wx,{query:t,...s})}}class Ux extends Ms{}class Wx extends Ms{}(function(n){n.FineTuningJobsPage=Ux,n.FineTuningJobEventsPage=Wx,n.Checkpoints=Fm,n.FineTuningJobCheckpointsPage=Hx})(Dm||(Dm={}));class Om extends _e{constructor(){super(...arguments),this.jobs=new Dm(this._client)}}(function(n){n.Jobs=Dm,n.FineTuningJobsPage=Ux,n.FineTuningJobEventsPage=Wx})(Om||(Om={}));class jm extends _e{createVariation(e,t){return this._client.post("/images/variations",Wc({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Wc({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}jm||(jm={});class $m extends _e{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Vx,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class Vx extends Ix{}(function(n){n.ModelsPage=Vx})($m||($m={}));class zm extends _e{create(e,t){return this._client.post("/moderations",{body:e,...t})}}zm||(zm={});class Bm extends _e{create(e,t,s){return this._client.post(`/uploads/${e}/parts`,Wc({body:t,...s}))}}Bm||(Bm={});class Hm extends _e{constructor(){super(...arguments),this.parts=new Bm(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,s){return this._client.post(`/uploads/${e}/complete`,{body:t,...s})}}(function(n){n.Parts=Bm})(Hm||(Hm={}));var Fk;class Ge extends f2{constructor({baseURL:e=Ef("OPENAI_BASE_URL"),apiKey:t=Ef("OPENAI_API_KEY"),organization:s=Ef("OPENAI_ORG_ID")??null,project:i=Ef("OPENAI_PROJECT_ID")??null,...r}={}){if(t===void 0)throw new oe("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const a={apiKey:t,organization:s,project:i,...r,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&S2())throw new oe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new Nm(this),this.chat=new dm(this),this.embeddings=new Im(this),this.files=new Lm(this),this.images=new jm(this),this.audio=new gm(this),this.moderations=new zm(this),this.models=new $m(this),this.fineTuning=new Om(this),this.beta=new Mm(this),this.batches=new ym(this),this.uploads=new Hm(this),this._options=a,this.apiKey=t,this.organization=s,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return F2(e,{arrayFormat:"brackets"})}}Fk=Ge;Ge.OpenAI=Fk;Ge.DEFAULT_TIMEOUT=6e5;Ge.OpenAIError=oe;Ge.APIError=bn;Ge.APIConnectionError=Dg;Ge.APIConnectionTimeoutError=Nx;Ge.APIUserAbortError=ks;Ge.NotFoundError=sk;Ge.ConflictError=ik;Ge.RateLimitError=ak;Ge.BadRequestError=ek;Ge.AuthenticationError=tk;Ge.InternalServerError=ok;Ge.PermissionDeniedError=nk;Ge.UnprocessableEntityError=rk;Ge.toFile=qE;Ge.fileFromPath=BE;(function(n){n.Page=Ix,n.CursorPage=Ms,n.Completions=Nm,n.Chat=dm,n.Embeddings=Im,n.Files=Lm,n.FileObjectsPage=Bx,n.Images=jm,n.Audio=gm,n.Moderations=zm,n.Models=$m,n.ModelsPage=Vx,n.FineTuning=Om,n.Beta=Mm,n.Batches=ym,n.BatchesPage=Lx,n.Uploads=Hm})(Ge||(Ge={}));const X2="modulepreload",K2=function(n){return"/"+n},a1={},Rf=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=K2(l),l in a1)return;a1[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":X2,u||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})};var Ju={};Ju.d=(n,e)=>{for(var t in e)Ju.o(e,t)&&!Ju.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Ju.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var K=globalThis.pdfjsLib={};Ju.d(K,{AbortException:()=>Go,AnnotationEditorLayer:()=>ww,AnnotationEditorParamsType:()=>X,AnnotationEditorType:()=>ee,AnnotationEditorUIManager:()=>Oo,AnnotationLayer:()=>qF,AnnotationMode:()=>wr,CMapCompressionType:()=>cv,ColorPicker:()=>Vm,DOMSVGFactory:()=>Xx,DrawLayer:()=>Aw,FeatureTest:()=>wn,GlobalWorkerOptions:()=>Vi,ImageKind:()=>ap,InvalidPDFException:()=>Ok,MissingPDFException:()=>qo,OPS:()=>hs,OutputScale:()=>mv,PDFDataRangeTransport:()=>IC,PDFDateString:()=>qk,PDFWorker:()=>Ol,PasswordResponses:()=>Z2,PermissionFlag:()=>J2,PixelsPerInch:()=>aa,RenderingCancelledException:()=>Kx,TextLayer:()=>kh,UnexpectedResponseException:()=>Bg,Util:()=>H,VerbosityLevel:()=>jg,XfaLayer:()=>FC,build:()=>CF,createValidAbsoluteUrl:()=>sL,fetchData:()=>Ug,getDocument:()=>vF,getFilenameFromUrl:()=>pL,getPdfFilenameFromUrl:()=>mL,getXfaPageViewport:()=>gL,isDataScheme:()=>Wg,isPdfFile:()=>Qx,noContextMenu:()=>rs,normalizeUnicode:()=>cL,setLayerDimensions:()=>Do,shadow:()=>he,version:()=>kF});const Wt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Dk=[1,0,0,1,0,0],lv=[.001,0,0,.001,0,0],Q2=1e7,Oy=1.35,In={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},wr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Y2="pdfjs_internal_editor_",ee={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},X={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},J2={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Dt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ap={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},at={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},lu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},jg={ERRORS:0,WARNINGS:1,INFOS:5},cv={NONE:0,BINARY:1},hs={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Z2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let $g=jg.WARNINGS;function eL(n){Number.isInteger(n)&&($g=n)}function tL(){return $g}function zg(n){$g>=jg.INFOS&&console.log(`Info: ${n}`)}function se(n){$g>=jg.WARNINGS&&console.log(`Warning: ${n}`)}function st(n){throw new Error(n)}function pt(n,e){n||st(e)}function nL(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function sL(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=lL(n)}catch{}}const s=e?new URL(n,e):new URL(n);if(nL(s))return s}catch{}return null}function he(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const ma=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class uv extends ma{constructor(e,t){super(e,"PasswordException"),this.code=t}}class hv extends ma{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Ok extends ma{constructor(e){super(e,"InvalidPDFException")}}class qo extends ma{constructor(e){super(e,"MissingPDFException")}}class Bg extends ma{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class iL extends ma{constructor(e){super(e,"FormatError")}}class Go extends ma{constructor(e){super(e,"AbortException")}}function jk(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&st("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),a=n.subarray(i,r);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function Hg(n){typeof n!="string"&&st("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function rL(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function qx(n){const e=Object.create(null);for(const[t,s]of n)e[t]=s;return e}function aL(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function oL(){try{return new Function(""),!0}catch{return!1}}class wn{static get isLittleEndian(){return he(this,"isLittleEndian",aL())}static get isEvalSupported(){return he(this,"isEvalSupported",oL())}static get isOffscreenCanvasSupported(){return he(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?he(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):he(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return he(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const jy=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Qi,op,dv;class H{static makeHexColor(e,t,s){return`#${jy[e]}${jy[t]}${jy[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const s=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[s,i]}static applyInverseTransform(e,t){const s=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/s,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/s;return[i,r]}static getAxialAlignedBoundingBox(e,t){const s=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(s[0],i[0],r[0],a[0]),Math.min(s[1],i[1],r[1],a[1]),Math.max(s[0],i[0],r[0],a[0]),Math.max(s[1],i[1],r[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],s=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(s+a)/2,l=Math.sqrt((s+a)**2-4*(s*a-r*i))/2,u=o+l||1,h=o-l||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[s,r,i,a]}static bezierBoundingBox(e,t,s,i,r,a,o,l,u){return u?(u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,l)):u=[Math.min(e,o),Math.min(t,l),Math.max(e,o),Math.max(t,l)],A(this,Qi,dv).call(this,e,s,r,o,t,i,a,l,3*(-e+3*(s-r)+o),6*(e-2*s+r),3*(s-e),u),A(this,Qi,dv).call(this,e,s,r,o,t,i,a,l,3*(-t+3*(i-a)+l),6*(t-2*i+a),3*(i-t),u),u}}Qi=new WeakSet,op=function(e,t,s,i,r,a,o,l,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,m=d*(d*(d*e+3*u*t)+3*f*s)+p*i,v=d*(d*(d*r+3*u*a)+3*f*o)+p*l;h[0]=Math.min(h[0],m),h[1]=Math.min(h[1],v),h[2]=Math.max(h[2],m),h[3]=Math.max(h[3],v)},dv=function(e,t,s,i,r,a,o,l,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&A(this,Qi,op).call(this,e,t,s,i,r,a,o,l,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const m=Math.sqrt(p),v=2*u;A(this,Qi,op).call(this,e,t,s,i,r,a,o,l,(-h+m)/v,f),A(this,Qi,op).call(this,e,t,s,i,r,a,o,l,(-h-m)/v,f)},S(H,Qi);function lL(n){return decodeURIComponent(escape(n))}let $y=null,o1=null;function cL(n){return $y||($y=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,o1=new Map([["ﬅ","ſt"]])),n.replaceAll($y,(e,t,s)=>t?t.normalize("NFKC"):o1.get(s))}function uL(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return jk(n)}const Gx="pdfjs_internal_id_",fi={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class $k{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}var Rh;class zk{constructor({enableHWA:e=!1}){S(this,Rh,!1);x(this,Rh,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!c(this,Rh)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){st("Abstract method `_createCanvas` called.")}}Rh=new WeakMap;class Bk{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),s=this.isCompressed?cv.BINARY:cv.NONE;return this._fetchData(t,s).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){st("Abstract method `_fetchData` called.")}}class Hk{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){st("Abstract method `_fetchData` called.")}}class hL{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){st("Abstract method `_createSVG` called.")}}const yi="http://www.w3.org/2000/svg",Aa=class Aa{};j(Aa,"CSS",96),j(Aa,"PDF",72),j(Aa,"PDF_TO_CSS_UNITS",Aa.CSS/Aa.PDF);let aa=Aa;var Pa,Ma,$s,_i,$t,Zm,Na,$,Ot,sl,il,lp,rl,Uk,fv,al,Cu,Tu,pv,Ru;class dL extends $k{constructor({docId:t,ownerDocument:s=globalThis.document}){super();S(this,$);S(this,Pa);S(this,Ma);S(this,$s);S(this,_i);S(this,$t);S(this,Zm);S(this,Na,0);x(this,_i,t),x(this,$t,s)}addFilter(t){if(!t)return"none";let s=c(this,$,Ot).get(t);if(s)return s;const[i,r,a]=A(this,$,lp).call(this,t),o=t.length===1?i:`${i}${r}${a}`;if(s=c(this,$,Ot).get(o),s)return c(this,$,Ot).set(t,s),s;const l=`g_${c(this,_i)}_transfer_map_${Gt(this,Na)._++}`,u=A(this,$,rl).call(this,l);c(this,$,Ot).set(t,u),c(this,$,Ot).set(o,u);const h=A(this,$,al).call(this,l);return A(this,$,Tu).call(this,i,r,a,h),u}addHCMFilter(t,s){var m;const i=`${t}-${s}`,r="base";let a=c(this,$,sl).get(r);if((a==null?void 0:a.key)===i||(a?((m=a.filter)==null||m.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},c(this,$,sl).set(r,a)),!t||!s))return a.url;const o=A(this,$,Ru).call(this,t);t=H.makeHexColor(...o);const l=A(this,$,Ru).call(this,s);if(s=H.makeHexColor(...l),c(this,$,il).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return a.url;const u=new Array(256);for(let v=0;v<=255;v++){const b=v/255;u[v]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const h=u.join(","),d=`g_${c(this,_i)}_hcm_filter`,f=a.filter=A(this,$,al).call(this,d);A(this,$,Tu).call(this,h,h,h,f),A(this,$,fv).call(this,f);const p=(v,b)=>{const y=o[v]/255,g=l[v]/255,_=new Array(b+1);for(let E=0;E<=b;E++)_[E]=y+E/b*(g-y);return _.join(",")};return A(this,$,Tu).call(this,p(0,5),p(1,5),p(2,5),f),a.url=A(this,$,rl).call(this,d),a.url}addAlphaFilter(t){let s=c(this,$,Ot).get(t);if(s)return s;const[i]=A(this,$,lp).call(this,[t]),r=`alpha_${i}`;if(s=c(this,$,Ot).get(r),s)return c(this,$,Ot).set(t,s),s;const a=`g_${c(this,_i)}_alpha_map_${Gt(this,Na)._++}`,o=A(this,$,rl).call(this,a);c(this,$,Ot).set(t,o),c(this,$,Ot).set(r,o);const l=A(this,$,al).call(this,a);return A(this,$,pv).call(this,i,l),o}addLuminosityFilter(t){let s=c(this,$,Ot).get(t||"luminosity");if(s)return s;let i,r;if(t?([i]=A(this,$,lp).call(this,[t]),r=`luminosity_${i}`):r="luminosity",s=c(this,$,Ot).get(r),s)return c(this,$,Ot).set(t,s),s;const a=`g_${c(this,_i)}_luminosity_map_${Gt(this,Na)._++}`,o=A(this,$,rl).call(this,a);c(this,$,Ot).set(t,o),c(this,$,Ot).set(r,o);const l=A(this,$,al).call(this,a);return A(this,$,Uk).call(this,l),t&&A(this,$,pv).call(this,i,l),o}addHighlightHCMFilter(t,s,i,r,a){var g;const o=`${s}-${i}-${r}-${a}`;let l=c(this,$,sl).get(t);if((l==null?void 0:l.key)===o||(l?((g=l.filter)==null||g.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},c(this,$,sl).set(t,l)),!s||!i))return l.url;const[u,h]=[s,i].map(A(this,$,Ru).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,m]=[r,a].map(A(this,$,Ru).bind(this));f<d&&([d,f,p,m]=[f,d,m,p]),c(this,$,il).style.color="";const v=(_,E,C)=>{const k=new Array(256),T=(f-d)/C,R=_/255,N=(E-_)/(255*C);let P=0;for(let L=0;L<=C;L++){const z=Math.round(d+L*T),Q=R+L*N;for(let ne=P;ne<=z;ne++)k[ne]=Q;P=z+1}for(let L=P;L<256;L++)k[L]=k[P-1];return k.join(",")},b=`g_${c(this,_i)}_hcm_${t}_filter`,y=l.filter=A(this,$,al).call(this,b);return A(this,$,fv).call(this,y),A(this,$,Tu).call(this,v(p[0],m[0],5),v(p[1],m[1],5),v(p[2],m[2],5),y),l.url=A(this,$,rl).call(this,b),l.url}destroy(t=!1){t&&c(this,$,sl).size!==0||(c(this,$s)&&(c(this,$s).parentNode.parentNode.remove(),x(this,$s,null)),c(this,Ma)&&(c(this,Ma).clear(),x(this,Ma,null)),x(this,Na,0))}}Pa=new WeakMap,Ma=new WeakMap,$s=new WeakMap,_i=new WeakMap,$t=new WeakMap,Zm=new WeakMap,Na=new WeakMap,$=new WeakSet,Ot=function(){return c(this,Ma)||x(this,Ma,new Map)},sl=function(){return c(this,Zm)||x(this,Zm,new Map)},il=function(){if(!c(this,$s)){const t=c(this,$t).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=c(this,$t).createElementNS(yi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),x(this,$s,c(this,$t).createElementNS(yi,"defs")),t.append(i),i.append(c(this,$s)),c(this,$t).body.append(t)}return c(this,$s)},lp=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[s,i,r]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)a[u]=s[u]/255,o[u]=i[u]/255,l[u]=r[u]/255;return[a.join(","),o.join(","),l.join(",")]},rl=function(t){if(c(this,Pa)===void 0){x(this,Pa,"");const s=c(this,$t).URL;s!==c(this,$t).baseURI&&(Wg(s)?se('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,Pa,s.split("#",1)[0]))}return`url(${c(this,Pa)}#${t})`},Uk=function(t){const s=c(this,$t).createElementNS(yi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},fv=function(t){const s=c(this,$t).createElementNS(yi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},al=function(t){const s=c(this,$t).createElementNS(yi,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),c(this,$,il).append(s),s},Cu=function(t,s,i){const r=c(this,$t).createElementNS(yi,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},Tu=function(t,s,i,r){const a=c(this,$t).createElementNS(yi,"feComponentTransfer");r.append(a),A(this,$,Cu).call(this,a,"feFuncR",t),A(this,$,Cu).call(this,a,"feFuncG",s),A(this,$,Cu).call(this,a,"feFuncB",i)},pv=function(t,s){const i=c(this,$t).createElementNS(yi,"feComponentTransfer");s.append(i),A(this,$,Cu).call(this,i,"feFuncA",t)},Ru=function(t){return c(this,$,il).style.color=t,Yx(getComputedStyle(c(this,$,il)).getPropertyValue("color"))};class fL extends zk{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}async function Ug(n,e="text"){if(Pu(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class Wk extends Bk{_fetchData(e,t){return Ug(e,this.isCompressed?"arraybuffer":"text").then(s=>({cMapData:s instanceof ArrayBuffer?new Uint8Array(s):Hg(s),compressionType:t}))}}class Vk extends Hk{_fetchData(e){return Ug(e,"arraybuffer").then(t=>new Uint8Array(t))}}class Xx extends hL{_createSVG(e){return document.createElementNS(yi,e)}}class tf{constructor({viewBox:e,scale:t,rotation:s,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=s,this.offsetX=i,this.offsetY=r;const o=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let u,h,d,f;switch(s%=360,s<0&&(s+=360),s){case 180:u=-1,h=0,d=0,f=1;break;case 90:u=0,h=1,d=1,f=0;break;case 270:u=0,h=-1,d=-1,f=0;break;case 0:u=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,f=-f);let p,m,v,b;u===0?(p=Math.abs(l-e[1])*t+i,m=Math.abs(o-e[0])*t+r,v=(e[3]-e[1])*t,b=(e[2]-e[0])*t):(p=Math.abs(o-e[0])*t+i,m=Math.abs(l-e[1])*t+r,v=(e[2]-e[0])*t,b=(e[3]-e[1])*t),this.transform=[u*t,h*t,d*t,f*t,p-u*t*o-d*t*l,m-h*t*o-f*t*l],this.width=v,this.height=b}get rawDims(){const{viewBox:e}=this;return he(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new tf({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){return H.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=H.applyTransform([e[0],e[1]],this.transform),s=H.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){return H.applyInverseTransform([e,t],this.transform)}}class Kx extends ma{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Wg(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Qx(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function pL(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function mL(n,e="document.pdf"){if(typeof n!="string")return e;if(Wg(n))return se('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(n);let r=s.exec(i[1])||s.exec(i[2])||s.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||e}class l1{constructor(){j(this,"started",Object.create(null));j(this,"times",[])}time(e){e in this.started&&se(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||se(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function Pu(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function rs(n){n.preventDefault()}function c1(n){console.log("Deprecated API usage: "+n)}let u1;class qk{static toDateObject(e){if(!e||typeof e!="string")return null;u1||(u1=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u1.exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(a+=h,o+=d):u==="+"&&(a-=h,o-=d),new Date(Date.UTC(s,i,r,a,o,l))}}function gL(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new tf({viewBox:r,scale:e,rotation:t})}function Yx(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(se(`Not a valid color format: "${n}"`),[0,0,0])}function yL(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Yx(s))}e.remove()}function Be(n){const{a:e,b:t,c:s,d:i,e:r,f:a}=n.getTransform();return[e,t,s,i,r,a]}function pi(n){const{a:e,b:t,c:s,d:i,e:r,f:a}=n.getTransform().invertSelf();return[e,t,s,i,r,a]}function Do(n,e,t=!1,s=!0){if(e instanceof tf){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:a}=n,o=wn.isCSSRoundSupported,l=`var(--scale-factor) * ${i}px`,u=`var(--scale-factor) * ${r}px`,h=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,d=o?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=h,a.height=d):(a.width=d,a.height=h)}s&&n.setAttribute("data-main-rotation",e.rotation)}class mv{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var xr,Ia,ds,La,Ph,Mh,eg,Gk,Zt,Xk,Kk,cp,Qk,yv;const wi=class wi{constructor(e){S(this,Zt);S(this,xr,null);S(this,Ia,null);S(this,ds);S(this,La,null);S(this,Ph,null);x(this,ds,e),c(wi,Mh)||x(wi,Mh,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=x(this,xr,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,ds)._uiManager._signal;e.addEventListener("contextmenu",rs,{signal:t}),e.addEventListener("pointerdown",A(wi,eg,Gk),{signal:t});const s=x(this,La,document.createElement("div"));s.className="buttons",e.append(s);const i=c(this,ds).toolbarPosition;if(i){const{style:r}=e,a=c(this,ds)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return A(this,Zt,Qk).call(this),e}get div(){return c(this,xr)}hide(){var e;c(this,xr).classList.add("hidden"),(e=c(this,Ia))==null||e.hideDropdown()}show(){var e;c(this,xr).classList.remove("hidden"),(e=c(this,Ph))==null||e.shown()}async addAltText(e){const t=await e.render();A(this,Zt,cp).call(this,t),c(this,La).prepend(t,c(this,Zt,yv)),x(this,Ph,e)}addColorPicker(e){x(this,Ia,e);const t=e.renderButton();A(this,Zt,cp).call(this,t),c(this,La).prepend(t,c(this,Zt,yv))}remove(){var e;c(this,xr).remove(),(e=c(this,Ia))==null||e.destroy(),x(this,Ia,null)}};xr=new WeakMap,Ia=new WeakMap,ds=new WeakMap,La=new WeakMap,Ph=new WeakMap,Mh=new WeakMap,eg=new WeakSet,Gk=function(e){e.stopPropagation()},Zt=new WeakSet,Xk=function(e){c(this,ds)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},Kk=function(e){c(this,ds)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},cp=function(e){const t=c(this,ds)._uiManager._signal;e.addEventListener("focusin",A(this,Zt,Xk).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",A(this,Zt,Kk).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",rs,{signal:t})},Qk=function(){const{editorType:e,_uiManager:t}=c(this,ds),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",c(wi,Mh)[e]),A(this,Zt,cp).call(this,s),s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),c(this,La).append(s)},yv=function(){const e=document.createElement("div");return e.className="divider",e},S(wi,eg),S(wi,Mh,null);let gv=wi;var Nh,Fa,Da,la,Yk,Jk,Zk;class vL{constructor(e){S(this,la);S(this,Nh,null);S(this,Fa,null);S(this,Da);x(this,Da,e)}show(e,t,s){const[i,r]=A(this,la,Jk).call(this,t,s),{style:a}=c(this,Fa)||x(this,Fa,A(this,la,Yk).call(this));e.append(c(this,Fa)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Fa).remove()}}Nh=new WeakMap,Fa=new WeakMap,Da=new WeakMap,la=new WeakSet,Yk=function(){const e=x(this,Fa,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",rs,{signal:c(this,Da)._signal});const t=x(this,Nh,document.createElement("div"));return t.className="buttons",e.append(t),A(this,la,Zk).call(this),e},Jk=function(e,t){let s=0,i=0;for(const r of e){const a=r.y+r.height;if(a<s)continue;const o=r.x+(t?r.width:0);if(a>s){i=o,s=a;continue}t?o>i&&(i=o):o<i&&(i=o)}return[t?1-i:i,s]},Zk=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=c(this,Da)._signal;e.addEventListener("contextmenu",rs,{signal:s}),e.addEventListener("click",()=>{c(this,Da).highlightSelection("floating_button")},{signal:s}),c(this,Nh).append(e)};function Um(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}function wL(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var tg;class xL{constructor(){S(this,tg,0)}get id(){return`${Y2}${Gt(this,tg)._++}`}}tg=new WeakMap;var $l,Ih,zt,zl,up;const db=class db{constructor(){S(this,zl);S(this,$l,uL());S(this,Ih,0);S(this,zt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return he(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return A(this,zl,up).call(this,`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return A(this,zl,up).call(this,e,e)}async getFromBlob(e,t){const s=await t;return A(this,zl,up).call(this,e,s)}async getFromId(e){c(this,zt)||x(this,zt,new Map);const t=c(this,zt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,zt)||x(this,zt,new Map);let s=c(this,zt).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${c(this,$l)}_${Gt(this,Ih)._++}`,refCounter:1,isSvg:!1},c(this,zt).set(e,s),c(this,zt).set(s.id,s),s}getSvgUrl(e){const t=c(this,zt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;c(this,zt)||x(this,zt,new Map);const t=c(this,zt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,$l)}_`)}};$l=new WeakMap,Ih=new WeakMap,zt=new WeakMap,zl=new WeakSet,up=async function(e,t){c(this,zt)||x(this,zt,new Map);let s=c(this,zt).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${c(this,$l)}_${Gt(this,Ih)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(s.url=t,i=await Ug(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=db._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((u,h)=>{o.onload=()=>{s.bitmap=o,s.isSvg=!0,u()},a.onload=async()=>{const d=s.svgUrl=a.result;o.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=a.onerror=h});a.readAsDataURL(i),await l}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){console.error(i),s=null}return c(this,zt).set(e,s),s&&c(this,zt).set(s.id,s),s};let vv=db;var vt,br,Lh,wt;class bL{constructor(e=128){S(this,vt,[]);S(this,br,!1);S(this,Lh);S(this,wt,-1);x(this,Lh,e)}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&e(),c(this,br))return;const l={cmd:e,undo:t,post:s,type:r};if(c(this,wt)===-1){c(this,vt).length>0&&(c(this,vt).length=0),x(this,wt,0),c(this,vt).push(l);return}if(a&&c(this,vt)[c(this,wt)].type===r){o&&(l.undo=c(this,vt)[c(this,wt)].undo),c(this,vt)[c(this,wt)]=l;return}const u=c(this,wt)+1;u===c(this,Lh)?c(this,vt).splice(0,1):(x(this,wt,u),u<c(this,vt).length&&c(this,vt).splice(u)),c(this,vt).push(l)}undo(){if(c(this,wt)===-1)return;x(this,br,!0);const{undo:e,post:t}=c(this,vt)[c(this,wt)];e(),t==null||t(),x(this,br,!1),x(this,wt,c(this,wt)-1)}redo(){if(c(this,wt)<c(this,vt).length-1){x(this,wt,c(this,wt)+1),x(this,br,!0);const{cmd:e,post:t}=c(this,vt)[c(this,wt)];e(),t==null||t(),x(this,br,!1)}}hasSomethingToUndo(){return c(this,wt)!==-1}hasSomethingToRedo(){return c(this,wt)<c(this,vt).length-1}destroy(){x(this,vt,null)}}vt=new WeakMap,br=new WeakMap,Lh=new WeakMap,wt=new WeakMap;var ng,eC;class nf{constructor(e){S(this,ng);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=wn.platform;for(const[s,i,r={}]of e)for(const a of s){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(A(this,ng,eC).call(this,t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:a=[],checker:o=null}}=s;o&&!o(e,t)||(i.bind(e,...a,t)(),r||(t.stopPropagation(),t.preventDefault()))}}ng=new WeakSet,eC=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const sg=class sg{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return yL(e),he(this,"_colors",e)}convert(e){const t=Yx(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,a)=>r===t[a]))return sg._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?H.makeHexColor(...t):e}};j(sg,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let wv=sg;var Bl,kn,ct,kt,Hl,Ai,Ul,fs,_r,Wl,Oa,zs,ps,ja,Fh,Dh,Vl,Oh,Bs,Ar,ql,Sr,Hs,ig,Er,jh,kr,$a,$h,zh,xt,xe,Si,za,Bh,Hh,Cr,Us,Ei,Uh,Vn,O,hp,xv,tC,nC,dp,sC,iC,rC,bv,aC,_v,Av,oC,Xt,dr,lC,cC,Sv,uC,Mu,Ev;const Sl=class Sl{constructor(e,t,s,i,r,a,o,l,u,h,d){S(this,O);S(this,Bl,new AbortController);S(this,kn,null);S(this,ct,new Map);S(this,kt,new Map);S(this,Hl,null);S(this,Ai,null);S(this,Ul,null);S(this,fs,new bL);S(this,_r,null);S(this,Wl,0);S(this,Oa,new Set);S(this,zs,null);S(this,ps,null);S(this,ja,new Set);S(this,Fh,!1);S(this,Dh,!1);S(this,Vl,!1);S(this,Oh,null);S(this,Bs,null);S(this,Ar,null);S(this,ql,null);S(this,Sr,!1);S(this,Hs,null);S(this,ig,new xL);S(this,Er,!1);S(this,jh,!1);S(this,kr,null);S(this,$a,null);S(this,$h,null);S(this,zh,null);S(this,xt,ee.NONE);S(this,xe,new Set);S(this,Si,null);S(this,za,null);S(this,Bh,null);S(this,Hh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});S(this,Cr,[0,0]);S(this,Us,null);S(this,Ei,null);S(this,Uh,null);S(this,Vn,null);const f=this._signal=c(this,Bl).signal;x(this,Ei,e),x(this,Uh,t),x(this,Hl,s),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:f}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),i._on("setpreference",this.onSetPreference.bind(this),{signal:f}),i._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:f}),A(this,O,sC).call(this),A(this,O,oC).call(this),A(this,O,bv).call(this),x(this,Ai,r.annotationStorage),x(this,Oh,r.filterFactory),x(this,za,a),x(this,ql,o||null),x(this,Fh,l),x(this,Dh,u),x(this,Vl,h),x(this,zh,d||null),this.viewParameters={realScale:aa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Sl.prototype,t=a=>c(a,Ei).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return he(this,"_keyboardManager",new nf([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&c(a,Ei).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&c(a,Ei).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,s,i;(e=c(this,Vn))==null||e.resolve(),x(this,Vn,null),(t=c(this,Bl))==null||t.abort(),x(this,Bl,null),this._signal=null;for(const r of c(this,kt).values())r.destroy();c(this,kt).clear(),c(this,ct).clear(),c(this,ja).clear(),x(this,kn,null),c(this,xe).clear(),c(this,fs).destroy(),(s=c(this,Hl))==null||s.destroy(),(i=c(this,Hs))==null||i.hide(),x(this,Hs,null),c(this,Bs)&&(clearTimeout(c(this,Bs)),x(this,Bs,null)),c(this,Us)&&(clearTimeout(c(this,Us)),x(this,Us,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,zh)}get useNewAltTextFlow(){return c(this,Dh)}get useNewAltTextWhenAddingImage(){return c(this,Vl)}get hcmFilter(){return he(this,"hcmFilter",c(this,za)?c(this,Oh).addHCMFilter(c(this,za).foreground,c(this,za).background):"none")}get direction(){return he(this,"direction",getComputedStyle(c(this,Ei)).direction)}get highlightColors(){return he(this,"highlightColors",c(this,ql)?new Map(c(this,ql).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return he(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){x(this,$h,e)}editAltText(e,t=!1){var s;(s=c(this,Hl))==null||s.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":x(this,Vl,t);break}}onPageChanging({pageNumber:e}){x(this,Wl,e-1)}focusMainContainer(){c(this,Ei).focus()}findParent(e,t){for(const s of c(this,kt).values()){const{x:i,y:r,width:a,height:o}=s.div.getBoundingClientRect();if(e>=i&&e<=i+a&&t>=r&&t<=r+o)return s}return null}disableUserSelect(e=!1){c(this,Uh).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,ja).add(e)}removeShouldRescale(e){c(this,ja).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*aa.PDF_TO_CSS_UNITS;for(const t of c(this,ja))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:a}=t,o=t.toString(),u=A(this,O,hp).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const d=A(this,O,xv).call(this,u),f=c(this,xt)===ee.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:a,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(ee.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&c(this,Ai)&&!c(this,Ai).has(e.id)&&c(this,Ai).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,c(this,Sr)&&(x(this,Sr,!1),A(this,O,dp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,xe))if(t.div.contains(e)){x(this,$a,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,$a))return;const[e,t]=c(this,$a);x(this,$a,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){A(this,O,bv).call(this),A(this,O,_v).call(this)}removeEditListeners(){A(this,O,aC).call(this),A(this,O,Av).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of c(this,ps))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of c(this,ps))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=c(this,kn))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of c(this,xe)){const r=i.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const a of c(this,ps))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){se(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const l of s){const u=await i.deserialize(l);if(!u)return;r.push(u)}const a=()=>{for(const l of r)A(this,O,Sv).call(this,l);A(this,O,Ev).call(this,r)},o=()=>{for(const l of r)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){se(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,xt)!==ee.NONE&&!this.isEditorHandlingKeyboard&&Sl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Sr)&&(x(this,Sr,!1),A(this,O,dp).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(A(this,O,iC).call(this),A(this,O,_v).call(this),A(this,O,Xt).call(this,{isEditing:c(this,xt)!==ee.NONE,isEmpty:A(this,O,Mu).call(this),hasSomethingToUndo:c(this,fs).hasSomethingToUndo(),hasSomethingToRedo:c(this,fs).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,O,rC).call(this),A(this,O,Av).call(this),A(this,O,Xt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,ps)){x(this,ps,e);for(const t of c(this,ps))A(this,O,dr).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,ig).id}get currentLayer(){return c(this,kt).get(c(this,Wl))}getLayer(e){return c(this,kt).get(e)}get currentPageIndex(){return c(this,Wl)}addLayer(e){c(this,kt).set(e.pageIndex,e),c(this,Er)?e.enable():e.disable()}removeLayer(e){c(this,kt).delete(e.pageIndex)}async updateMode(e,t=null,s=!1){if(c(this,xt)!==e&&!(c(this,Vn)&&(await c(this,Vn).promise,!c(this,Vn)))){if(x(this,Vn,Promise.withResolvers()),x(this,xt,e),e===ee.NONE){this.setEditingState(!1),A(this,O,cC).call(this),c(this,Vn).resolve();return}this.setEditingState(!0),await A(this,O,lC).call(this),this.unselectAll();for(const i of c(this,kt).values())i.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),c(this,Vn).resolve();return}for(const i of c(this,ct).values())i.annotationElementId===t?(this.setSelected(i),i.enterInEditMode()):i.unselect();c(this,Vn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==c(this,xt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var s;if(c(this,ps)){switch(e){case X.CREATE:this.currentLayer.addNewEditor();return;case X.HIGHLIGHT_DEFAULT_COLOR:(s=c(this,$h))==null||s.updateColor(t);break;case X.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,Bh)||x(this,Bh,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of c(this,xe))i.updateParams(e,t);for(const i of c(this,ps))i.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const a of c(this,ct).values())a.editorType===e&&a.show(t);(((r=c(this,Bh))==null?void 0:r.get(X.HIGHLIGHT_SHOW_ALL))??!0)!==t&&A(this,O,dr).call(this,[[X.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,jh)!==e){x(this,jh,e);for(const t of c(this,kt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of c(this,ct).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return c(this,ct).get(e)}addEditor(e){c(this,ct).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(c(this,Bs)&&clearTimeout(c(this,Bs)),x(this,Bs,setTimeout(()=>{this.focusMainContainer(),x(this,Bs,null)},0))),c(this,ct).delete(e.id),this.unselect(e),(!e.annotationElementId||!c(this,Oa).has(e.annotationElementId))&&((t=c(this,Ai))==null||t.remove(e.id))}addDeletedAnnotationElement(e){c(this,Oa).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,Oa).has(e)}removeDeletedAnnotationElement(e){c(this,Oa).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,kn)!==e&&(x(this,kn,e),e&&A(this,O,dr).call(this,e.propertiesToUpdate))}updateUI(e){c(this,O,uC)===e&&A(this,O,dr).call(this,e.propertiesToUpdate)}toggleSelected(e){if(c(this,xe).has(e)){c(this,xe).delete(e),e.unselect(),A(this,O,Xt).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,xe).add(e),e.select(),A(this,O,dr).call(this,e.propertiesToUpdate),A(this,O,Xt).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of c(this,xe))t!==e&&t.unselect();c(this,xe).clear(),c(this,xe).add(e),e.select(),A(this,O,dr).call(this,e.propertiesToUpdate),A(this,O,Xt).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,xe).has(e)}get firstSelectedEditor(){return c(this,xe).values().next().value}unselect(e){e.unselect(),c(this,xe).delete(e),A(this,O,Xt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,xe).size!==0}get isEnterHandled(){return c(this,xe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){c(this,fs).undo(),A(this,O,Xt).call(this,{hasSomethingToUndo:c(this,fs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,O,Mu).call(this)})}redo(){c(this,fs).redo(),A(this,O,Xt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,fs).hasSomethingToRedo(),isEmpty:A(this,O,Mu).call(this)})}addCommands(e){c(this,fs).add(e),A(this,O,Xt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,O,Mu).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...c(this,xe)],t=()=>{for(const i of e)i.remove()},s=()=>{for(const i of e)A(this,O,Sv).call(this,i)};this.addCommands({cmd:t,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=c(this,kn))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,kn)||this.hasSelection}selectAll(){for(const e of c(this,xe))e.commit();A(this,O,Ev).call(this,c(this,ct).values())}unselectAll(){if(!(c(this,kn)&&(c(this,kn).commitOrRemove(),c(this,xt)!==ee.NONE))&&this.hasSelection){for(const e of c(this,xe))e.unselect();c(this,xe).clear(),A(this,O,Xt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;c(this,Cr)[0]+=e,c(this,Cr)[1]+=t;const[i,r]=c(this,Cr),a=[...c(this,xe)],o=1e3;c(this,Us)&&clearTimeout(c(this,Us)),x(this,Us,setTimeout(()=>{x(this,Us,null),c(this,Cr)[0]=c(this,Cr)[1]=0,this.addCommands({cmd:()=>{for(const l of a)c(this,ct).has(l.id)&&l.translateInPage(i,r)},undo:()=>{for(const l of a)c(this,ct).has(l.id)&&l.translateInPage(-i,-r)},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,zs,new Map);for(const e of c(this,xe))c(this,zs).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,zs))return!1;this.disableUserSelect(!1);const e=c(this,zs);x(this,zs,null);let t=!1;for(const[{x:i,y:r,pageIndex:a},o]of e)o.newX=i,o.newY=r,o.newPageIndex=a,t||(t=i!==o.savedX||r!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const s=(i,r,a,o)=>{if(c(this,ct).has(i.id)){const l=c(this,kt).get(o);l?i._setParentAndPosition(l,r,a):(i.pageIndex=o,i.x=r,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:a,newPageIndex:o}]of e)s(i,r,a,o)},undo:()=>{for(const[i,{savedX:r,savedY:a,savedPageIndex:o}]of e)s(i,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,zs))for(const s of c(this,zs).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,xe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,kn)===e}getActive(){return c(this,kn)}getMode(){return c(this,xt)}get imageManager(){return he(this,"imageManager",new vv)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,h,d,f)=>({x:(h-i)/a,y:1-(u+d-s)/r,width:f/a,height:d/r});break;case"180":o=(u,h,d,f)=>({x:1-(u+d-s)/r,y:1-(h+f-i)/a,width:d/r,height:f/a});break;case"270":o=(u,h,d,f)=>({x:1-(h+f-i)/a,y:(u-s)/r,width:f/a,height:d/r});break;default:o=(u,h,d,f)=>({x:(u-s)/r,y:(h-i)/a,width:d/r,height:f/a});break}const l=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:m,height:v}of d.getClientRects())m===0||v===0||l.push(o(f,p,m,v))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,Ul)||x(this,Ul,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,Ul))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=c(this,Ul))==null?void 0:i.get(e.data.id);if(!t)return;const s=c(this,Ai).getRawValue(t);s&&(c(this,xt)===ee.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}};Bl=new WeakMap,kn=new WeakMap,ct=new WeakMap,kt=new WeakMap,Hl=new WeakMap,Ai=new WeakMap,Ul=new WeakMap,fs=new WeakMap,_r=new WeakMap,Wl=new WeakMap,Oa=new WeakMap,zs=new WeakMap,ps=new WeakMap,ja=new WeakMap,Fh=new WeakMap,Dh=new WeakMap,Vl=new WeakMap,Oh=new WeakMap,Bs=new WeakMap,Ar=new WeakMap,ql=new WeakMap,Sr=new WeakMap,Hs=new WeakMap,ig=new WeakMap,Er=new WeakMap,jh=new WeakMap,kr=new WeakMap,$a=new WeakMap,$h=new WeakMap,zh=new WeakMap,xt=new WeakMap,xe=new WeakMap,Si=new WeakMap,za=new WeakMap,Bh=new WeakMap,Hh=new WeakMap,Cr=new WeakMap,Us=new WeakMap,Ei=new WeakMap,Uh=new WeakMap,Vn=new WeakMap,O=new WeakSet,hp=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},xv=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of c(this,kt).values())if(s.hasTextLayer(e))return s;return null},tC=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=A(this,O,hp).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(c(this,Hs)||x(this,Hs,new vL(this)),c(this,Hs).show(s,i,this.direction==="ltr"))},nC=function(){var r,a,o;const e=document.getSelection();if(!e||e.isCollapsed){c(this,Si)&&((r=c(this,Hs))==null||r.hide(),x(this,Si,null),A(this,O,Xt).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,Si))return;const i=A(this,O,hp).call(this,e).closest(".textLayer");if(!i){c(this,Si)&&((a=c(this,Hs))==null||a.hide(),x(this,Si,null),A(this,O,Xt).call(this,{hasSelectedText:!1}));return}if((o=c(this,Hs))==null||o.hide(),x(this,Si,t),A(this,O,Xt).call(this,{hasSelectedText:!0}),!(c(this,xt)!==ee.HIGHLIGHT&&c(this,xt)!==ee.NONE)&&(c(this,xt)===ee.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,Sr,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,xt)===ee.HIGHLIGHT?A(this,O,xv).call(this,i):null;l==null||l.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&A(this,O,dp).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},dp=function(e=""){c(this,xt)===ee.HIGHLIGHT?this.highlightSelection(e):c(this,Fh)&&A(this,O,tC).call(this)},sC=function(){document.addEventListener("selectionchange",A(this,O,nC).bind(this),{signal:this._signal})},iC=function(){if(c(this,Ar))return;x(this,Ar,new AbortController);const e=this.combinedSignal(c(this,Ar));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},rC=function(){var e;(e=c(this,Ar))==null||e.abort(),x(this,Ar,null)},bv=function(){if(c(this,kr))return;x(this,kr,new AbortController);const e=this.combinedSignal(c(this,kr));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},aC=function(){var e;(e=c(this,kr))==null||e.abort(),x(this,kr,null)},_v=function(){if(c(this,_r))return;x(this,_r,new AbortController);const e=this.combinedSignal(c(this,_r));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Av=function(){var e;(e=c(this,_r))==null||e.abort(),x(this,_r,null)},oC=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Xt=function(e){Object.entries(e).some(([s,i])=>c(this,Hh)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,Hh),e)}),c(this,xt)===ee.HIGHLIGHT&&e.hasSelectedEditor===!1&&A(this,O,dr).call(this,[[X.HIGHLIGHT_FREE,!0]]))},dr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},lC=async function(){if(!c(this,Er)){x(this,Er,!0);const e=[];for(const t of c(this,kt).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,ct).values())t.enable()}},cC=function(){if(this.unselectAll(),c(this,Er)){x(this,Er,!1);for(const e of c(this,kt).values())e.disable();for(const e of c(this,ct).values())e.disable()}},Sv=function(e){const t=c(this,kt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},uC=function(){let e=null;for(e of c(this,xe));return e},Mu=function(){if(c(this,ct).size===0)return!0;if(c(this,ct).size===1)for(const e of c(this,ct).values())return e.isEmpty();return!1},Ev=function(e){for(const t of c(this,xe))t.unselect();c(this,xe).clear();for(const t of e)t.isEmpty()||(c(this,xe).add(t),t.select());A(this,O,Xt).call(this,{hasSelectedEditor:this.hasSelection})},j(Sl,"TRANSLATE_SMALL",1),j(Sl,"TRANSLATE_BIG",10);let Oo=Sl;var bt,Ws,ms,Vs,Cn,Gl,qs,cn,ki,Ba,Gs,Xl,ci,fp,pp;const gt=class gt{constructor(e){S(this,ci);S(this,bt,null);S(this,Ws,!1);S(this,ms,null);S(this,Vs,null);S(this,Cn,null);S(this,Gl,!1);S(this,qs,null);S(this,cn,null);S(this,ki,null);S(this,Ba,null);S(this,Gs,!1);x(this,cn,e),x(this,Gs,e._uiManager.useNewAltTextFlow),c(gt,Xl)||x(gt,Xl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){gt._l10nPromise||(gt._l10nPromise=e)}async render(){const e=x(this,ms,document.createElement("button"));e.className="altText";let t;c(this,Gs)?(e.classList.add("new"),t=await gt._l10nPromise.get(c(gt,Xl).missing)):t=await gt._l10nPromise.get("pdfjs-editor-alt-text-button-label"),e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0";const s=c(this,cn)._uiManager._signal;e.addEventListener("contextmenu",rs,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),c(this,cn)._uiManager.editAltText(c(this,cn)),c(this,Gs)&&c(this,cn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,ci,fp)}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(x(this,Gl,!0),i(r))},{signal:s}),await A(this,ci,pp).call(this),e}finish(){c(this,ms)&&(c(this,ms).focus({focusVisible:c(this,Gl)}),x(this,Gl,!1))}isEmpty(){return c(this,Gs)?c(this,bt)===null:!c(this,bt)&&!c(this,Ws)}hasData(){return c(this,Gs)?c(this,bt)!==null||!!c(this,ki):this.isEmpty()}get guessedText(){return c(this,ki)}async setGuessedText(e){c(this,bt)===null&&(x(this,ki,e),x(this,Ba,await gt._l10nPromise.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer")({generatedAltText:e})),A(this,ci,pp).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,Gs)||c(this,bt)){(t=c(this,qs))==null||t.remove(),x(this,qs,null);return}if(!c(this,qs)){const s=x(this,qs,document.createElement("div"));s.className="noAltTextBadge",c(this,cn).div.append(s)}c(this,qs).classList.toggle("hidden",!e)}serialize(e){let t=c(this,bt);return!e&&c(this,ki)===t&&(t=c(this,Ba)),{altText:t,decorative:c(this,Ws),guessedText:c(this,ki),textWithDisclaimer:c(this,Ba)}}get data(){return{altText:c(this,bt),decorative:c(this,Ws)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(x(this,ki,s),x(this,Ba,i)),!(c(this,bt)===e&&c(this,Ws)===t)&&(r||(x(this,bt,e),x(this,Ws,t)),A(this,ci,pp).call(this))}toggle(e=!1){c(this,ms)&&(!e&&c(this,Cn)&&(clearTimeout(c(this,Cn)),x(this,Cn,null)),c(this,ms).disabled=!e)}shown(){c(this,cn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,ci,fp)}})}destroy(){var e,t;(e=c(this,ms))==null||e.remove(),x(this,ms,null),x(this,Vs,null),(t=c(this,qs))==null||t.remove(),x(this,qs,null)}};bt=new WeakMap,Ws=new WeakMap,ms=new WeakMap,Vs=new WeakMap,Cn=new WeakMap,Gl=new WeakMap,qs=new WeakMap,cn=new WeakMap,ki=new WeakMap,Ba=new WeakMap,Gs=new WeakMap,Xl=new WeakMap,ci=new WeakSet,fp=function(){return c(this,bt)&&"added"||c(this,bt)===null&&this.guessedText&&"review"||"missing"},pp=async function(){var i,r;const e=c(this,ms);if(!e)return;if(c(this,Gs)){if(e.classList.toggle("done",!!c(this,bt)),gt._l10nPromise.get(c(gt,Xl)[c(this,ci,fp)]).then(a=>{e.setAttribute("aria-label",a);for(const o of e.childNodes)if(o.nodeType===Node.TEXT_NODE){o.textContent=a;break}}),!c(this,bt)){(i=c(this,Vs))==null||i.remove();return}}else{if(!c(this,bt)&&!c(this,Ws)){e.classList.remove("done"),(r=c(this,Vs))==null||r.remove();return}e.classList.add("done"),gt._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(a=>{e.setAttribute("aria-label",a)})}let t=c(this,Vs);if(!t){x(this,Vs,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,cn).id}`;const a=100,o=c(this,cn)._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(c(this,Cn)),x(this,Cn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{x(this,Cn,setTimeout(()=>{x(this,Cn,null),c(this,Vs).classList.add("show"),c(this,cn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:o}),e.addEventListener("mouseleave",()=>{var l;c(this,Cn)&&(clearTimeout(c(this,Cn)),x(this,Cn,null)),(l=c(this,Vs))==null||l.classList.remove("show")},{signal:o})}t.innerText=c(this,Ws)?await gt._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):c(this,bt),t.parentNode||e.append(t);const s=c(this,cn).getImageForAltText();s==null||s.setAttribute("aria-describedby",t.id)},S(gt,Xl,null),j(gt,"_l10nPromise",null);let Wm=gt;var Ha,gs,$e,Kl,Ua,Ct,Wa,Tr,Wh,Va,Rr,Vh,qa,Ci,Xs,Ql,Yl,qn,qh,rg,te,kv,Gh,Cv,Tv,hC,dC,Rv,Pv,Mv,fC,Nv,pC,mC,gC,Iv,Nu;const ge=class ge{constructor(e){S(this,te);S(this,Ha,null);S(this,gs,null);S(this,$e,null);S(this,Kl,!1);S(this,Ua,!1);S(this,Ct,null);S(this,Wa,null);S(this,Tr,null);S(this,Wh,"");S(this,Va,!1);S(this,Rr,null);S(this,Vh,!1);S(this,qa,!1);S(this,Ci,!1);S(this,Xs,null);S(this,Ql,0);S(this,Yl,0);S(this,qn,null);j(this,"_editToolbar",null);j(this,"_initialOptions",Object.create(null));j(this,"_initialData",null);j(this,"_isVisible",!0);j(this,"_uiManager",null);j(this,"_focusEventsAllowed",!0);S(this,qh,!1);S(this,rg,ge._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ge.prototype._resizeWithKeyboard,t=Oo.TRANSLATE_SMALL,s=Oo.TRANSLATE_BIG;return he(this,"_resizerKeyboardManager",new nf([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],ge.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return he(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new _L({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,s){if(ge._l10nResizer||(ge._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ge._l10nPromise||(ge._l10nPromise=new Map([...["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-new-alt-text-added-button-label","pdfjs-editor-new-alt-text-missing-button-label","pdfjs-editor-new-alt-text-to-review-button-label"].map(r=>[r,e.get(r)]),...["pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer"].map(r=>[r,e.get.bind(e,r)])])),s!=null&&s.strings)for(const r of s.strings)ge._l10nPromise.set(r,e.get(r));if(ge._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ge._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){st("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,qh)}set _isDraggable(e){var t;x(this,qh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,rg)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):A(this,te,Nu).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,Va)?x(this,Va,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,a]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/a,this.fixAndSetPosition()}translate(e,t){A(this,te,kv).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,Rr)||x(this,Rr,[this.x,this.y]),A(this,te,kv).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){c(this,Rr)||x(this,Rr,[this.x,this.y]);const[s,i]=this.parentDimensions;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,l]=this.getBaseTranslation();r+=o,a+=l,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!c(this,Rr)&&(c(this,Rr)[0]!==this.x||c(this,Rr)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=ge,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,s]=this.pageDimensions;let{x:i,y:r,width:a,height:o}=this;if(a*=t,o*=s,i*=t,r*=s,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(t-a,i)),r=Math.max(0,Math.min(s-o,r));break;case 90:i=Math.max(0,Math.min(t-o,i)),r=Math.min(s,Math.max(a,r));break;case 180:i=Math.min(t,Math.max(a,i)),r=Math.min(s,Math.max(o,r));break;case 270:i=Math.min(t,Math.max(o,i)),r=Math.max(0,Math.min(s-a,r));break}this.x=i/=t,this.y=r/=s;const[l,u]=this.getBaseTranslation();i+=l,r+=u;const{style:h}=this.div;h.left=`${(100*i).toFixed(2)}%`,h.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return A(s=ge,Gh,Cv).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return A(s=ge,Gh,Cv).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,i]=this.parentDimensions;this.div.style.width=`${(100*e/s).toFixed(2)}%`,c(this,Ua)||(this.div.style.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,i=s.endsWith("%"),r=!c(this,Ua)&&t.endsWith("%");if(i&&r)return;const[a,o]=this.parentDimensions;i||(e.width=`${(100*parseFloat(s)/a).toFixed(2)}%`),!c(this,Ua)&&!r&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=c(this,$e))==null||e.finish()}async addEditToolbar(){return this._editToolbar||c(this,qa)?this._editToolbar:(this._editToolbar=new gv(this),this.div.append(this._editToolbar.render()),c(this,$e)&&await this._editToolbar.addAltText(c(this,$e)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=c(this,$e))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,$e)||(Wm.initialize(ge._l10nPromise),x(this,$e,new Wm(this)),c(this,Ha)&&(c(this,$e).data=c(this,Ha),x(this,Ha,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=c(this,$e))==null?void 0:e.data}set altTextData(e){c(this,$e)&&(c(this,$e).data=e)}get guessedAltText(){var e;return(e=c(this,$e))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,$e))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,$e))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,$e)&&!c(this,$e).isEmpty()}hasAltTextData(){var e;return((e=c(this,$e))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,Kl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),A(this,te,Nv).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),Um(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=wn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(x(this,Va,!0),this._isDraggable){A(this,te,fC).call(this,e);return}A(this,te,Mv).call(this,e)}moveInDOM(){c(this,Xs)&&clearTimeout(c(this,Xs)),x(this,Xs,setTimeout(()=>{var e;x(this,Xs,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,a]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/i,h=t/i,d=this.x*r,f=this.y*a,p=this.width*r,m=this.height*a;switch(s){case 0:return[d+u+o,a-f-h-m+l,d+u+p+o,a-f-h+l];case 90:return[d+h+o,a-f+u+l,d+h+m+o,a-f+u+p+l];case 180:return[d-u-p+o,a-f+h+l,d-u+o,a-f+h+m+l];case 270:return[d-h-m+o,a-f-u-p+l,d-h+o,a-f-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,a]=e,o=r-s,l=a-i;switch(this.rotation){case 0:return[s,t-a,o,l];case 90:return[s,t-i,l,o];case 180:return[r,t-i,o,l];case 270:return[r,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){x(this,qa,!0)}disableEditMode(){x(this,qa,!1)}isInEditMode(){return c(this,qa)}shouldGetKeyboardEvents(){return c(this,Ci)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){A(this,te,Nv).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){st("An editor must be serializable")}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s});i.rotation=e.rotation,x(i,Ha,e.accessibilityData);const[r,a]=i.pageDimensions,[o,l,u,h]=i.getRectInCurrentCoords(e.rect,a);return i.x=o/r,i.y=l/a,i.width=u/r,i.height=h/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=c(this,Tr))==null||e.abort(),x(this,Tr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,Xs)&&(clearTimeout(c(this,Xs)),x(this,Xs,null)),A(this,te,Nu).call(this),this.removeEditToolbar(),c(this,qn)){for(const t of c(this,qn).values())clearTimeout(t);x(this,qn,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,te,hC).call(this),c(this,Ct).classList.remove("hidden"),Um(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),x(this,Wa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,Ct).children;if(!c(this,gs)){x(this,gs,Array.from(t));const a=A(this,te,pC).bind(this),o=A(this,te,mC).bind(this),l=this._uiManager._signal;for(const u of c(this,gs)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",A(this,te,gC).bind(this,h),{signal:l}),u.setAttribute("data-l10n-id",ge._l10nResizer[h])}}const s=c(this,gs)[0];let i=0;for(const a of t){if(a===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(c(this,gs).length/4);if(r!==i){if(r<i)for(let o=0;o<i-r;o++)c(this,Ct).append(c(this,Ct).firstChild);else if(r>i)for(let o=0;o<r-i;o++)c(this,Ct).firstChild.before(c(this,Ct).lastChild);let a=0;for(const o of t){const u=c(this,gs)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",ge._l10nResizer[u])}}A(this,te,Iv).call(this,0),x(this,Ci,!0),c(this,Ct).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,Ci)&&A(this,te,Pv).call(this,c(this,Wh),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){A(this,te,Nu).call(this),this.div.focus()}select(){var e,t,s;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(s=c(this,$e))==null||s.toggleAltTextBadge(!1)}unselect(){var e,t,s,i,r;(e=c(this,Ct))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=c(this,$e))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,Vh)}set isEditing(e){x(this,Vh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){x(this,Ua,!0);const s=e/t,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,qn)||x(this,qn,new Map);const{action:s}=e;let i=c(this,qn).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),c(this,qn).delete(s),c(this,qn).size===0&&x(this,qn,null)},ge._telemetryTimeout),c(this,qn).set(s,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),x(this,Kl,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,Kl,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ha=new WeakMap,gs=new WeakMap,$e=new WeakMap,Kl=new WeakMap,Ua=new WeakMap,Ct=new WeakMap,Wa=new WeakMap,Tr=new WeakMap,Wh=new WeakMap,Va=new WeakMap,Rr=new WeakMap,Vh=new WeakMap,qa=new WeakMap,Ci=new WeakMap,Xs=new WeakMap,Ql=new WeakMap,Yl=new WeakMap,qn=new WeakMap,qh=new WeakMap,rg=new WeakMap,te=new WeakSet,kv=function([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this.fixAndSetPosition()},Gh=new WeakSet,Cv=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Tv=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},hC=function(){if(c(this,Ct))return;x(this,Ct,document.createElement("div")),c(this,Ct).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");c(this,Ct).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",A(this,te,dC).bind(this,s),{signal:t}),i.addEventListener("contextmenu",rs,{signal:t}),i.tabIndex=-1}this.div.prepend(c(this,Ct))},dC=function(e,t){var m;t.preventDefault();const{isMac:s}=wn.platform;if(t.button!==0||t.ctrlKey&&s)return;(m=c(this,$e))==null||m.toggle(!1);const i=this._isDraggable;this._isDraggable=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,te,Pv).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",rs,{signal:a});const o=this.x,l=this.y,u=this.width,h=this.height,d=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{var v;r.abort(),this.parent.togglePointerEvents(!0),(v=c(this,$e))==null||v.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=d,this.div.style.cursor=f,A(this,te,Rv).call(this,o,l,u,h)};window.addEventListener("pointerup",p,{signal:a}),window.addEventListener("blur",p,{signal:a})},Rv=function(e,t,s,i){const r=this.x,a=this.y,o=this.width,l=this.height;r===e&&a===t&&o===s&&l===i||this.addCommands({cmd:()=>{this.width=o,this.height=l,this.x=r,this.y=a;const[u,h]=this.parentDimensions;this.setDims(u*o,h*l),this.fixAndSetPosition()},undo:()=>{this.width=s,this.height=i,this.x=e,this.y=t;const[u,h]=this.parentDimensions;this.setDims(u*s,h*i),this.fixAndSetPosition()},mustExec:!0})},Pv=function(e,t){const[s,i]=this.parentDimensions,r=this.x,a=this.y,o=this.width,l=this.height,u=ge.MIN_SIZE/s,h=ge.MIN_SIZE/i,d=G=>Math.round(G*1e4)/1e4,f=A(this,te,Tv).call(this,this.rotation),p=(G,M)=>[f[0]*G+f[2]*M,f[1]*G+f[3]*M],m=A(this,te,Tv).call(this,360-this.rotation),v=(G,M)=>[m[0]*G+m[2]*M,m[1]*G+m[3]*M];let b,y,g=!1,_=!1;switch(e){case"topLeft":g=!0,b=(G,M)=>[0,0],y=(G,M)=>[G,M];break;case"topMiddle":b=(G,M)=>[G/2,0],y=(G,M)=>[G/2,M];break;case"topRight":g=!0,b=(G,M)=>[G,0],y=(G,M)=>[0,M];break;case"middleRight":_=!0,b=(G,M)=>[G,M/2],y=(G,M)=>[0,M/2];break;case"bottomRight":g=!0,b=(G,M)=>[G,M],y=(G,M)=>[0,0];break;case"bottomMiddle":b=(G,M)=>[G/2,M],y=(G,M)=>[G/2,0];break;case"bottomLeft":g=!0,b=(G,M)=>[0,M],y=(G,M)=>[G,0];break;case"middleLeft":_=!0,b=(G,M)=>[0,M/2],y=(G,M)=>[G,M/2];break}const E=b(o,l),C=y(o,l);let k=p(...C);const T=d(r+k[0]),R=d(a+k[1]);let N=1,P=1,[L,z]=this.screenToPageTranslation(t.movementX,t.movementY);if([L,z]=v(L/s,z/i),g){const G=Math.hypot(o,l);N=P=Math.max(Math.min(Math.hypot(C[0]-E[0]-L,C[1]-E[1]-z)/G,1/o,1/l),u/o,h/l)}else _?N=Math.max(u,Math.min(1,Math.abs(C[0]-E[0]-L)))/o:P=Math.max(h,Math.min(1,Math.abs(C[1]-E[1]-z)))/l;const Q=d(o*N),ne=d(l*P);k=p(...y(Q,ne));const re=T-k[0],de=R-k[1];this.width=Q,this.height=ne,this.x=re,this.y=de,this.setDims(s*Q,i*ne),this.fixAndSetPosition()},Mv=function(e){const{isMac:t}=wn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},fC=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();const s=new AbortController,i=this._uiManager.combinedSignal(s);if(t){this.div.classList.add("moving"),x(this,Ql,e.clientX),x(this,Yl,e.clientY);const a=o=>{const{clientX:l,clientY:u}=o,[h,d]=this.screenToPageTranslation(l-c(this,Ql),u-c(this,Yl));x(this,Ql,l),x(this,Yl,u),this._uiManager.dragSelectedEditors(h,d)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:i})}const r=()=>{s.abort(),t&&this.div.classList.remove("moving"),x(this,Va,!1),this._uiManager.endDragSession()||A(this,te,Mv).call(this,e)};window.addEventListener("pointerup",r,{signal:i}),window.addEventListener("blur",r,{signal:i})},Nv=function(){if(c(this,Tr)||!this.div)return;x(this,Tr,new AbortController);const e=this._uiManager.combinedSignal(c(this,Tr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},pC=function(e){ge._resizerKeyboardManager.exec(this,e)},mC=function(e){var t;c(this,Ci)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,Ct)&&A(this,te,Nu).call(this)},gC=function(e){x(this,Wh,c(this,Ci)?e:"")},Iv=function(e){if(c(this,gs))for(const t of c(this,gs))t.tabIndex=e},Nu=function(){if(x(this,Ci,!1),A(this,te,Iv).call(this,-1),c(this,Wa)){const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=c(this,Wa);A(this,te,Rv).call(this,e,t,s,i),x(this,Wa,null)}},S(ge,Gh),j(ge,"_l10nPromise",null),j(ge,"_l10nResizer",null),j(ge,"_borderLineWidth",-1),j(ge,"_colorManager",new wv),j(ge,"_zIndex",1),j(ge,"_telemetryTimeout",1e3);let ve=ge;class _L extends ve{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const h1=3285377520,Un=4294901760,Ls=65535;class yC{constructor(e){this.h1=e?e&4294967295:h1,this.h2=e?e&4294967295:h1}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let v=0,b=e.length;v<b;v++){const y=e.charCodeAt(v);y<=255?t[s++]=y:(t[s++]=y>>>8,t[s++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,a=new Uint32Array(t.buffer,0,i);let o=0,l=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&Ls,m=f&Ls;for(let v=0;v<i;v++)v&1?(o=a[v],o=o*d&Un|o*p&Ls,o=o<<15|o>>>17,o=o*f&Un|o*m&Ls,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=a[v],l=l*d&Un|l*p&Ls,l=l<<15|l>>>17,l=l*f&Un|l*m&Ls,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,r){case 3:o^=t[i*4+2]<<16;case 2:o^=t[i*4+1]<<8;case 1:o^=t[i*4],o=o*d&Un|o*p&Ls,o=o<<15|o>>>17,o=o*f&Un|o*m&Ls,i&1?u^=o:h^=o}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Un|e*36045&Ls,t=t*4283543511&Un|((t<<16|e>>>16)*2950163797&Un)>>>16,e^=t>>>1,e=e*444984403&Un|e*60499&Ls,t=t*3301882366&Un|((t<<16|e>>>16)*3120437893&Un)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Lv=Object.freeze({map:null,hash:"",transfer:void 0});var Ga,Xa,_t,ag,vC;class Jx{constructor(){S(this,ag);S(this,Ga,!1);S(this,Xa,null);S(this,_t,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=c(this,_t).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return c(this,_t).get(e)}remove(e){if(c(this,_t).delete(e),c(this,_t).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of c(this,_t).values())if(t instanceof ve)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=c(this,_t).get(e);let i=!1;if(s!==void 0)for(const[r,a]of Object.entries(t))s[r]!==a&&(i=!0,s[r]=a);else i=!0,c(this,_t).set(e,t);i&&A(this,ag,vC).call(this),t instanceof ve&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return c(this,_t).has(e)}getAll(){return c(this,_t).size>0?qx(c(this,_t)):null}setAll(e){for(const[t,s]of Object.entries(e))this.setValue(t,s)}get size(){return c(this,_t).size}resetModified(){c(this,Ga)&&(x(this,Ga,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new wC(this)}get serializable(){if(c(this,_t).size===0)return Lv;const e=new Map,t=new yC,s=[],i=Object.create(null);let r=!1;for(const[a,o]of c(this,_t)){const l=o instanceof ve?o.serialize(!1,i):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const a of e.values())a.bitmap&&s.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:Lv}get editorStats(){let e=null;const t=new Map;for(const s of c(this,_t).values()){if(!(s instanceof ve))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;t.has(r)||t.set(r,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const a=e[r]||(e[r]=new Map);for(const[o,l]of Object.entries(i)){if(o==="type")continue;let u=a.get(o);u||(u=new Map,a.set(o,u));const h=u.get(l)??0;u.set(l,h+1)}}for(const[s,i]of t)e[s]=i.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){x(this,Xa,null)}get modifiedIds(){if(c(this,Xa))return c(this,Xa);const e=[];for(const t of c(this,_t).values())!(t instanceof ve)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return x(this,Xa,{ids:new Set(e),hash:e.join(",")})}}Ga=new WeakMap,Xa=new WeakMap,_t=new WeakMap,ag=new WeakSet,vC=function(){c(this,Ga)||(x(this,Ga,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Xh;class wC extends Jx{constructor(t){super();S(this,Xh);const{map:s,hash:i,transfer:r}=t.serializable,a=structuredClone(s,r?{transfer:r}:null);x(this,Xh,{map:a,hash:i,transfer:r})}get print(){st("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Xh)}get modifiedIds(){return he(this,"modifiedIds",{ids:new Set,hash:""})}}Xh=new WeakMap;var Jl;class AL{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){S(this,Jl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Jl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||c(this,Jl).has(e.loadedName))){if(pt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:r}=e,a=new FontFace(s,i,r);this.addNativeFontFace(a);try{await a.load(),c(this,Jl).add(s),t==null||t(e)}catch{se(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}st("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw se(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return he(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Wt||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),he(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(pt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return he(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(E,C){return E.charCodeAt(C)<<24|E.charCodeAt(C+1)<<16|E.charCodeAt(C+2)<<8|E.charCodeAt(C+3)&255}function i(E,C,k,T){const R=E.substring(0,C),N=E.substring(C+k);return R+T+N}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function h(E,C){if(++u>30){se("Load test font never loaded."),C();return}if(l.font="30px "+E,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(h.bind(null,E,C))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const m=16,v=1482184792;let b=s(f,m);for(r=0,a=d.length-3;r<a;r+=4)b=b-v+s(d,r)|0;r<d.length&&(b=b-v+s(d+"XXX",r)|0),f=i(f,m,4,rL(b));const y=`url(data:font/opentype;base64,${btoa(f)});`,g=`@font-face {font-family:"${d}";src:${y}}`;this.insertRule(g);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const E of[e.loadedName,d]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=E,_.append(C)}this._document.body.append(_),h(d,()=>{_.remove(),t.complete()})}}Jl=new WeakMap;class SL{constructor(e,{disableFontFace:t=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const i in e)this[i]=e[i];this.disableFontFace=t===!0,this._inspectFont=s}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=jk(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let s;if(!this.cssFontInfo)s=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),s}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let s;try{s=e.get(this.loadedName+"_path_"+t)}catch(r){se(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(s)||s.length===0)return this.compiledGlyphs[t]=function(r,a){};const i=[];for(let r=0,a=s.length;r<a;)switch(s[r++]){case fi.BEZIER_CURVE_TO:{const[o,l,u,h,d,f]=s.slice(r,r+6);i.push(p=>p.bezierCurveTo(o,l,u,h,d,f)),r+=6}break;case fi.MOVE_TO:{const[o,l]=s.slice(r,r+2);i.push(u=>u.moveTo(o,l)),r+=2}break;case fi.LINE_TO:{const[o,l]=s.slice(r,r+2);i.push(u=>u.lineTo(o,l)),r+=2}break;case fi.QUADRATIC_CURVE_TO:{const[o,l,u,h]=s.slice(r,r+4);i.push(d=>d.quadraticCurveTo(o,l,u,h)),r+=4}break;case fi.RESTORE:i.push(o=>o.restore());break;case fi.SAVE:i.push(o=>o.save());break;case fi.SCALE:pt(i.length===2,"Scale command is only valid at the third position.");break;case fi.TRANSFORM:{const[o,l,u,h,d,f]=s.slice(r,r+6);i.push(p=>p.transform(o,l,u,h,d,f)),r+=6}break;case fi.TRANSLATE:{const[o,l]=s.slice(r,r+2);i.push(u=>u.translate(o,l)),r+=2}break}return this.compiledGlyphs[t]=function(a,o){i[0](a),i[1](a),a.scale(o,-o);for(let l=2,u=i.length;l<u;l++)i[l](a)}}}if(Wt){var Fv=Promise.withResolvers(),Zu=null;(async()=>{const e=await Rf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Rf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Rf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Rf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,a;return new Map(Object.entries({fs:e,http:t,https:s,url:i,canvas:r,path2d:a}))})().then(e=>{Zu=e,Fv.resolve()},e=>{se(`loadPackages: ${e}`),Zu=new Map,Fv.resolve()})}class oa{static get promise(){return Fv.promise}static get(e){return Zu==null?void 0:Zu.get(e)}}const xC=function(n){return oa.get("fs").promises.readFile(n).then(t=>new Uint8Array(t))};class EL extends $k{}class kL extends zk{_createCanvas(e,t){return oa.get("canvas").createCanvas(e,t)}}class CL extends Bk{_fetchData(e,t){return xC(e).then(s=>({cMapData:s,compressionType:t}))}}class TL extends Hk{_fetchData(e){return xC(e)}}const Qt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Dv(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class Zx{getPattern(){st("Abstract method `getPattern` called.")}}class RL extends Zx{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let r;if(i===Qt.STROKE||i===Qt.FILL){const a=t.current.getClippedPathBoundingBox(i,Be(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,l),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),s=H.transform(s,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),Dv(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else Dv(e,this._bbox),r=this._createGradient(e);return r}}function zy(n,e,t,s,i,r,a,o){const l=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;l[t+1]>l[s+1]&&(f=t,t=s,s=f,f=r,r=a,a=f),l[s+1]>l[i+1]&&(f=s,s=i,i=f,f=a,a=o,o=f),l[t+1]>l[s+1]&&(f=t,t=s,s=f,f=r,r=a,a=f);const p=(l[t]+e.offsetX)*e.scaleX,m=(l[t+1]+e.offsetY)*e.scaleY,v=(l[s]+e.offsetX)*e.scaleX,b=(l[s+1]+e.offsetY)*e.scaleY,y=(l[i]+e.offsetX)*e.scaleX,g=(l[i+1]+e.offsetY)*e.scaleY;if(m>=g)return;const _=u[r],E=u[r+1],C=u[r+2],k=u[a],T=u[a+1],R=u[a+2],N=u[o],P=u[o+1],L=u[o+2],z=Math.round(m),Q=Math.round(g);let ne,re,de,G,M,W,q,J;for(let ce=z;ce<=Q;ce++){if(ce<b){const me=ce<m?0:(m-ce)/(m-b);ne=p-(p-v)*me,re=_-(_-k)*me,de=E-(E-T)*me,G=C-(C-R)*me}else{let me;ce>g?me=1:b===g?me=0:me=(b-ce)/(b-g),ne=v-(v-y)*me,re=k-(k-N)*me,de=T-(T-P)*me,G=R-(R-L)*me}let Le;ce<m?Le=0:ce>g?Le=1:Le=(m-ce)/(m-g),M=p-(p-y)*Le,W=_-(_-N)*Le,q=E-(E-P)*Le,J=C-(C-L)*Le;const sn=Math.round(Math.min(ne,M)),_n=Math.round(Math.max(ne,M));let Ye=d*ce+sn*4;for(let me=sn;me<=_n;me++)Le=(ne-me)/(ne-M),Le<0?Le=0:Le>1&&(Le=1),h[Ye++]=re-(re-W)*Le|0,h[Ye++]=de-(de-q)*Le|0,h[Ye++]=G-(G-J)*Le|0,h[Ye++]=255}}function PL(n,e,t){const s=e.coords,i=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(s.length/o)-1,u=o-1;for(r=0;r<l;r++){let h=r*o;for(let d=0;d<u;d++,h++)zy(n,t,s[h],s[h+1],s[h+o],i[h],i[h+1],i[h+o]),zy(n,t,s[h+o+1],s[h+1],s[h+o],i[h+o+1],i[h+1],i[h+o])}break;case"triangles":for(r=0,a=s.length;r<a;r+=3)zy(n,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class ML extends Zx{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,s){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=u/d,m=h/f,v={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/p,scaleY:1/m},b=d+2*2,y=f+2*2,g=s.getCanvas("mesh",b,y),_=g.context,E=_.createImageData(d,f);if(t){const k=E.data;for(let T=0,R=k.length;T<R;T+=4)k[T]=t[0],k[T+1]=t[1],k[T+2]=t[2],k[T+3]=255}for(const k of this._figures)PL(E,k,v);return _.putImageData(E,2,2),{canvas:g.canvas,offsetX:o-2*p,offsetY:l-2*m,scaleX:p,scaleY:m}}getPattern(e,t,s,i){Dv(e,this._bbox);let r;if(i===Qt.SHADING)r=H.singularValueDecompose2dScale(Be(e));else if(r=H.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=H.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}const a=this._createMeshCanvas(r,i===Qt.SHADING?null:this._background,t.cachedCanvases);return i!==Qt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class NL extends Zx{getPattern(){return"hotpink"}}function IL(n){switch(n[0]){case"RadialAxial":return new RL(n);case"Mesh":return new ML(n);case"Dummy":return new NL}throw new Error(`Unknown IR type: ${n[0]}`)}const d1={COLORED:1,UNCOLORED:2},og=class og{constructor(e,t,s,i,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=s,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:i,tilingType:r,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),zg("TilingType: "+r);const h=t[0],d=t[1],f=t[2],p=t[3],m=f-h,v=p-d,b=H.singularValueDecompose2dScale(this.matrix),y=H.singularValueDecompose2dScale(this.baseTransform),g=b[0]*y[0],_=b[1]*y[1];let E=m,C=v,k=!1,T=!1;const R=Math.ceil(l*g),N=Math.ceil(u*_),P=Math.ceil(m*g),L=Math.ceil(v*_);R>=P?E=l:k=!0,N>=L?C=u:T=!0;const z=this.getSizeAndScale(E,this.ctx.canvas.width,g),Q=this.getSizeAndScale(C,this.ctx.canvas.height,_),ne=e.cachedCanvases.getCanvas("pattern",z.size,Q.size),re=ne.context,de=o.createCanvasGraphics(re);if(de.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(de,i,a),re.translate(-z.scale*h,-Q.scale*d),de.transform(z.scale,0,0,Q.scale,0,0),re.save(),this.clipBbox(de,h,d,f,p),de.baseTransform=Be(de.ctx),de.executeOperatorList(s),de.endDrawing(),re.restore(),k||T){const G=ne.canvas;k&&(E=l),T&&(C=u);const M=this.getSizeAndScale(E,this.ctx.canvas.width,g),W=this.getSizeAndScale(C,this.ctx.canvas.height,_),q=M.size,J=W.size,ce=e.cachedCanvases.getCanvas("pattern-workaround",q,J),Le=ce.context,sn=k?Math.floor(m/l):0,_n=T?Math.floor(v/u):0;for(let Ye=0;Ye<=sn;Ye++)for(let me=0;me<=_n;me++)Le.drawImage(G,q*Ye,J*me,q,J,0,0,q,J);return{canvas:ce.canvas,scaleX:M.scale,scaleY:W.scale,offsetX:h,offsetY:d}}return{canvas:ne.canvas,scaleX:z.scale,scaleY:Q.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,s){const i=Math.max(og.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const a=i-t,o=r-s;e.ctx.rect(t,s,a,o),e.current.updateRectMinMax(Be(e.ctx),[t,s,i,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case d1.COLORED:const a=this.ctx;i.fillStyle=a.fillStyle,i.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case d1.UNCOLORED:const o=H.makeHexColor(s[0],s[1],s[2]);i.fillStyle=o,i.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new iL(`Unsupported paint type: ${t}`)}}getPattern(e,t,s,i){let r=s;i!==Qt.SHADING&&(r=H.transform(r,t.baseTransform),this.matrix&&(r=H.transform(r,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};j(og,"MAX_PATTERN_SIZE",3e3);let Ov=og;function LL({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=wn.isLittleEndian?4278190080:255,[l,u]=a?[r,o]:[o,r],h=s>>3,d=s&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let m=0;m<i;m++){for(const b=e+h;e<b;e++){const y=e<f?n[e]:255;t[p++]=y&128?u:l,t[p++]=y&64?u:l,t[p++]=y&32?u:l,t[p++]=y&16?u:l,t[p++]=y&8?u:l,t[p++]=y&4?u:l,t[p++]=y&2?u:l,t[p++]=y&1?u:l}if(d===0)continue;const v=e<f?n[e++]:255;for(let b=0;b<d;b++)t[p++]=v&1<<7-b?u:l}return{srcPos:e,destPos:p}}const f1=16,p1=100,FL=15,m1=10,g1=1e3,dn=16;function DL(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(s,i){e.translate(s,i),this.__originalTranslate(s,i)},n.scale=function(s,i){e.scale(s,i),this.__originalScale(s,i)},n.transform=function(s,i,r,a,o,l){e.transform(s,i,r,a,o,l),this.__originalTransform(s,i,r,a,o,l)},n.setTransform=function(s,i,r,a,o,l){e.setTransform(s,i,r,a,o,l),this.__originalSetTransform(s,i,r,a,o,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(s){e.rotate(s),this.__originalRotate(s)},n.clip=function(s){e.clip(s),this.__originalClip(s)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,r,a,o){e.bezierCurveTo(t,s,i,r,a,o),this.__originalBezierCurveTo(t,s,i,r,a,o)},n.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class OL{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Pf(n,e,t,s,i,r,a,o,l,u){const[h,d,f,p,m,v]=Be(n);if(d===0&&f===0){const g=a*h+m,_=Math.round(g),E=o*p+v,C=Math.round(E),k=(a+l)*h+m,T=Math.abs(Math.round(k)-_)||1,R=(o+u)*p+v,N=Math.abs(Math.round(R)-C)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),_,C),n.drawImage(e,t,s,i,r,0,0,T,N),n.setTransform(h,d,f,p,m,v),[T,N]}if(h===0&&p===0){const g=o*f+m,_=Math.round(g),E=a*d+v,C=Math.round(E),k=(o+u)*f+m,T=Math.abs(Math.round(k)-_)||1,R=(a+l)*d+v,N=Math.abs(Math.round(R)-C)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,_,C),n.drawImage(e,t,s,i,r,0,0,N,T),n.setTransform(h,d,f,p,m,v),[N,T]}n.drawImage(e,t,s,i,r,a,o,l,u);const b=Math.hypot(h,d),y=Math.hypot(f,p);return[b*l,y*u]}function jL(n){const{width:e,height:t}=n;if(e>g1||t>g1)return null;const s=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let a=new Uint8Array(r*(t+1)),o,l,u;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const y of n.data){let g=128;for(;g>0;)d[f++]=y&g?0:255,g>>=1}let p=0;for(f=0,d[f]!==0&&(a[0]=1,++p),l=1;l<e;l++)d[f]!==d[f+1]&&(a[l]=d[f]?2:1,++p),f++;for(d[f]!==0&&(a[l]=2,++p),o=1;o<t;o++){f=o*h,u=o*r,d[f-h]!==d[f]&&(a[u]=d[f]?1:8,++p);let y=(d[f]?4:0)+(d[f-h]?8:0);for(l=1;l<e;l++)y=(y>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),i[y]&&(a[u+l]=i[y],++p),f++;if(d[f-h]!==d[f]&&(a[u+l]=d[f]?2:4,++p),p>s)return null}for(f=h*(t-1),u=o*r,d[f]!==0&&(a[u]=8,++p),l=1;l<e;l++)d[f]!==d[f+1]&&(a[u+l]=d[f]?4:8,++p),f++;if(d[f]!==0&&(a[u+l]=4,++p),p>s)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),v=new Path2D;for(o=0;p&&o<=t;o++){let y=o*r;const g=y+e;for(;y<g&&!a[y];)y++;if(y===g)continue;v.moveTo(y%r,o);const _=y;let E=a[y];do{const C=m[E];do y+=C;while(!a[y]);const k=a[y];k!==5&&k!==10?(E=k,a[y]=0):(E=k&51*E>>4,a[y]&=E>>2|E<<2),v.lineTo(y%r,y/r|0),a[y]||--p}while(_!==y);--o}return d=null,a=null,function(y){y.save(),y.scale(1/e,-1/t),y.translate(0,-t),y.fill(v),y.beginPath(),y.restore()}}class y1{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Dk,this.textMatrixScale=1,this.fontMatrix=lv,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Dt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,s){[t,s]=H.applyTransform([t,s],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(e,t){const s=H.applyTransform(t,e),i=H.applyTransform(t.slice(2),e),r=H.applyTransform([t[0],t[3]],e),a=H.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,s[0],i[0],r[0],a[0]),this.minY=Math.min(this.minY,s[1],i[1],r[1],a[1]),this.maxX=Math.max(this.maxX,s[0],i[0],r[0],a[0]),this.maxY=Math.max(this.maxY,s[1],i[1],r[1],a[1])}updateScalingPathMinMax(e,t){H.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,s,i,r,a,o,l,u,h){const d=H.bezierBoundingBox(t,s,i,r,a,o,l,u,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Qt.FILL,t=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(e===Qt.STROKE){t||st("Stroke bounding box must include transform.");const i=H.singularValueDecompose2dScale(t),r=i[0]*this.lineWidth/2,a=i[1]*this.lineWidth/2;s[0]-=r,s[1]-=a,s[2]+=r,s[3]+=a}return s}updateClipFromPath(){const e=H.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Qt.FILL,t=null){return H.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function v1(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%dn,r=(t-i)/dn,a=i===0?r:r+1,o=n.createImageData(s,dn);let l=0,u;const h=e.data,d=o.data;let f,p,m,v;if(e.kind===ap.GRAYSCALE_1BPP){const b=h.byteLength,y=new Uint32Array(d.buffer,0,d.byteLength>>2),g=y.length,_=s+7>>3,E=4294967295,C=wn.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(m=f<r?dn:i,u=0,p=0;p<m;p++){const k=b-l;let T=0;const R=k>_?s:k*8-7,N=R&-8;let P=0,L=0;for(;T<N;T+=8)L=h[l++],y[u++]=L&128?E:C,y[u++]=L&64?E:C,y[u++]=L&32?E:C,y[u++]=L&16?E:C,y[u++]=L&8?E:C,y[u++]=L&4?E:C,y[u++]=L&2?E:C,y[u++]=L&1?E:C;for(;T<R;T++)P===0&&(L=h[l++],P=128),y[u++]=L&P?E:C,P>>=1}for(;u<g;)y[u++]=0;n.putImageData(o,0,f*dn)}}else if(e.kind===ap.RGBA_32BPP){for(p=0,v=s*dn*4,f=0;f<r;f++)d.set(h.subarray(l,l+v)),l+=v,n.putImageData(o,0,p),p+=dn;f<a&&(v=s*i*4,d.set(h.subarray(l,l+v)),n.putImageData(o,0,p))}else if(e.kind===ap.RGB_24BPP)for(m=dn,v=s*m,f=0;f<a;f++){for(f>=r&&(m=i,v=s*m),u=0,p=v;p--;)d[u++]=h[l++],d[u++]=h[l++],d[u++]=h[l++],d[u++]=255;n.putImageData(o,0,f*dn)}else throw new Error(`bad image kind: ${e.kind}`)}function w1(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%dn,r=(t-i)/dn,a=i===0?r:r+1,o=n.createImageData(s,dn);let l=0;const u=e.data,h=o.data;for(let d=0;d<a;d++){const f=d<r?dn:i;({srcPos:l}=LL({src:u,srcPos:l,dest:h,width:s,height:f,nonBlackColor:0})),n.putImageData(o,0,d*dn)}}function cu(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Mf(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Wt){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function x1(n,e){if(e)return!0;const t=H.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*aa.PDF_TO_CSS_UNITS);return t[0]<=s&&t[1]<=s}const $L=["butt","round","square"],zL=["miter","round","bevel"],BL={},b1={};var ca,jv,$v;const fb=class fb{constructor(e,t,s,i,r,{optionalContentConfig:a,markedContentStack:o=null},l,u){S(this,ca);this.ctx=e,this.current=new y1(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new OL(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,s){const l=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Be(this.compositeCtx))}this.ctx.save(),Mf(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Be(this.ctx)}executeOperatorList(e,t,s,i){const r=e.argsArray,a=e.fnArray;let o=t||0;const l=r.length;if(l===o)return o;const u=l-o>m1&&typeof s=="function",h=u?Date.now()+FL:0;let d=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(i!==void 0&&o===i.nextBreakPoint)return i.breakIt(o,s),o;if(m=a[o],m!==hs.dependency)this[m].apply(this,r[o]);else for(const v of r[o]){const b=v.startsWith("g_")?f:p;if(!b.has(v))return b.get(v,s),o}if(o++,o===l)return o;if(u&&++d>m1){if(Date.now()>h)return s(),o;d=0}}}endDrawing(){A(this,ca,jv).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),A(this,ca,$v).call(this)}_scaleImage(e,t){const s=e.width,i=e.height;let r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=s,l=i,u="prescale1",h,d;for(;r>2&&o>1||a>2&&l>1;){let f=o,p=l;r>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/f),a>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,o,l,0,0,f,p),e=h.canvas,o=f,l=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:i}=e,r=this.current.fillColor,a=this.current.patternFill,o=Be(t);let l,u,h,d;if((e.bitmap||e.data)&&e.count>1){const R=e.bitmap||e.data.buffer;u=JSON.stringify(a?o:[o.slice(0,4),r]),l=this._cachedBitmapsMap.get(R),l||(l=new Map,this._cachedBitmapsMap.set(R,l));const N=l.get(u);if(N&&!a){const P=Math.round(Math.min(o[0],o[2])+o[4]),L=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:N,offsetX:P,offsetY:L}}h=N}h||(d=this.cachedCanvases.getCanvas("maskCanvas",s,i),w1(d.context,e));let f=H.transform(o,[1/s,0,0,-1/i,0,0]);f=H.transform(f,[1,0,0,1,0,-i]);const[p,m,v,b]=H.getAxialAlignedBoundingBox([0,0,s,i],f),y=Math.round(v-p)||1,g=Math.round(b-m)||1,_=this.cachedCanvases.getCanvas("fillCanvas",y,g),E=_.context,C=p,k=m;E.translate(-C,-k),E.transform(...f),h||(h=this._scaleImage(d.canvas,pi(E)),h=h.img,l&&a&&l.set(u,h)),E.imageSmoothingEnabled=x1(Be(E),e.interpolate),Pf(E,h,0,0,h.width,h.height,0,0,s,i),E.globalCompositeOperation="source-in";const T=H.transform(pi(E),[1,0,0,1,-C,-k]);return E.fillStyle=a?r.getPattern(t,this,T,Qt.FILL):r,E.fillRect(0,0,s,i),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,_.canvas)),{canvas:_.canvas,offsetX:Math.round(C),offsetY:Math.round(k)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=$L[e]}setLineJoin(e){this.ctx.lineJoin=zL[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...Be(this.suspendedCtx)),cu(this.suspendedCtx,r),DL(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),cu(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],a=i[1],o=i[2]-r,l=i[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,s,o,l,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,a,o,l,u,h,d){let f=e.canvas,p=l-h,m=u-d;if(a){if(p<0||m<0||p+s>f.width||m+i>f.height){const b=this.cachedCanvases.getCanvas("maskExtension",s,i),y=b.context;y.drawImage(f,-p,-m),a.some(g=>g!==0)&&(y.globalCompositeOperation="destination-atop",y.fillStyle=H.makeHexColor(...a),y.fillRect(0,0,s,i),y.globalCompositeOperation="source-over"),f=b.canvas,p=m=0}else if(a.some(b=>b!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(p,m,s,i),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=H.makeHexColor(...a),e.fillRect(p,m,s,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const v=new Path2D;v.rect(l,u,s,i),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(f,p,m,s,i,l,u,s,i),t.restore()}save(){this.inSMaskMode?(cu(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),cu(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,s,i,r,a){this.ctx.transform(e,t,s,i,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){const i=this.ctx,r=this.current;let a=r.x,o=r.y,l,u;const h=Be(i),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?s.slice(0):null;for(let p=0,m=0,v=e.length;p<v;p++)switch(e[p]|0){case hs.rectangle:a=t[m++],o=t[m++];const b=t[m++],y=t[m++],g=a+b,_=o+y;i.moveTo(a,o),b===0||y===0?i.lineTo(g,_):(i.lineTo(g,o),i.lineTo(g,_),i.lineTo(a,_)),d||r.updateRectMinMax(h,[a,o,g,_]),i.closePath();break;case hs.moveTo:a=t[m++],o=t[m++],i.moveTo(a,o),d||r.updatePathMinMax(h,a,o);break;case hs.lineTo:a=t[m++],o=t[m++],i.lineTo(a,o),d||r.updatePathMinMax(h,a,o);break;case hs.curveTo:l=a,u=o,a=t[m+4],o=t[m+5],i.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],a,o),r.updateCurvePathMinMax(h,l,u,t[m],t[m+1],t[m+2],t[m+3],a,o,f),m+=6;break;case hs.curveTo2:l=a,u=o,i.bezierCurveTo(a,o,t[m],t[m+1],t[m+2],t[m+3]),r.updateCurvePathMinMax(h,l,u,a,o,t[m],t[m+1],t[m+2],t[m+3],f),a=t[m+2],o=t[m+3],m+=4;break;case hs.curveTo3:l=a,u=o,a=t[m+2],o=t[m+3],i.bezierCurveTo(t[m],t[m+1],a,o,a,o),r.updateCurvePathMinMax(h,l,u,t[m],t[m+1],a,o,a,o,f),m+=4;break;case hs.closePath:i.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,s=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(t.save(),t.strokeStyle=s.getPattern(t,this,pi(t),Qt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(t.save(),t.fillStyle=s.getPattern(t,this,pi(t),Qt.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=BL}eoClip(){this.pendingClip=b1}beginText(){this.current.textMatrix=Dk,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const s of e)t.setTransform(...s.transform),t.translate(s.x,s.y),s.addToPath(t,s.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const s=this.commonObjs.get(e),i=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=s.fontMatrix||lv,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&se("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const r=s.loadedName||"sans-serif",a=((h=s.systemFontInfo)==null?void 0:h.css)||`"${r}", ${s.fallbackName}`;let o="normal";s.black?o="900":s.bold&&(o="bold");const l=s.italic?"italic":"normal";let u=t;t<f1?u=f1:t>p1&&(u=p1),this.current.fontSizeScale=t/u,this.ctx.font=`${l} ${o} ${u}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,s,i,r,a){this.current.textMatrix=[e,t,s,i,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,i){const r=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,h=l&Dt.FILL_STROKE_MASK,d=!!(l&Dt.ADD_TO_PATH_FLAG),f=a.patternFill&&!o.missingFile;let p;(o.disableFontFace||d||f)&&(p=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||f?(r.save(),r.translate(t,s),r.beginPath(),p(r,u),i&&r.setTransform(...i),(h===Dt.FILL||h===Dt.FILL_STROKE)&&r.fill(),(h===Dt.STROKE||h===Dt.FILL_STROKE)&&r.stroke(),r.restore()):((h===Dt.FILL||h===Dt.FILL_STROKE)&&r.fillText(e,t,s),(h===Dt.STROKE||h===Dt.FILL_STROKE)&&r.strokeText(e,t,s)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Be(r),x:t,y:s,fontSize:u,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return he(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const r=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,d=e.length,f=s.vertical,p=f?1:-1,m=s.defaultVMetrics,v=i*t.fontMatrix[0],b=t.textRenderingMode===Dt.FILL&&!s.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(h,-1):r.scale(h,1);let y;if(t.patternFill){r.save();const k=t.fillColor.getPattern(r,this,pi(r),Qt.FILL);y=Be(r),r.restore(),r.fillStyle=k}let g=t.lineWidth;const _=t.textMatrixScale;if(_===0||g===0){const k=t.textRenderingMode&Dt.FILL_STROKE_MASK;(k===Dt.STROKE||k===Dt.FILL_STROKE)&&(g=this.getSinglePixelWidth())}else g/=_;if(a!==1&&(r.scale(a,a),g/=a),r.lineWidth=g,s.isInvalidPDFjsFont){const k=[];let T=0;for(const R of e)k.push(R.unicode),T+=R.width;r.fillText(k.join(""),0,0),t.x+=T*v*h,r.restore(),this.compose();return}let E=0,C;for(C=0;C<d;++C){const k=e[C];if(typeof k=="number"){E+=p*k*i/1e3;continue}let T=!1;const R=(k.isSpace?l:0)+o,N=k.fontChar,P=k.accent;let L,z,Q=k.width;if(f){const re=k.vmetric||m,de=-(k.vmetric?re[1]:Q*.5)*v,G=re[2]*v;Q=re?-re[0]:Q,L=de/a,z=(E+G)/a}else L=E/a,z=0;if(s.remeasure&&Q>0){const re=r.measureText(N).width*1e3/i*a;if(Q<re&&this.isFontSubpixelAAEnabled){const de=Q/re;T=!0,r.save(),r.scale(de,1),L/=de}else Q!==re&&(L+=(Q-re)/2e3*i/a)}if(this.contentVisible&&(k.isInFont||s.missingFile)){if(b&&!P)r.fillText(N,L,z);else if(this.paintChar(N,L,z,y),P){const re=L+i*P.offset.x/a,de=z-i*P.offset.y/a;this.paintChar(P.fontChar,re,de,y)}}const ne=f?Q*v-R*u:Q*v+R*u;E+=ne,T&&r.restore()}f?t.y-=E:t.x+=E*h,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,i=s.font,r=s.fontSize,a=s.fontDirection,o=i.vertical?1:-1,l=s.charSpacing,u=s.wordSpacing,h=s.textHScale*a,d=s.fontMatrix||lv,f=e.length,p=s.textRenderingMode===Dt.INVISIBLE;let m,v,b,y;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...s.textMatrix),t.translate(s.x,s.y),t.scale(h,a),m=0;m<f;++m){if(v=e[m],typeof v=="number"){y=o*v*r/1e3,this.ctx.translate(y,0),s.x+=y*h;continue}const g=(v.isSpace?u:0)+l,_=i.charProcOperatorList[v.operatorListId];if(!_){se(`Type3 character "${v.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=v,this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(_),this.restore()),b=H.applyTransform([v.width,0],d)[0]*r+g,t.translate(b,0),s.x+=b*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,i,r,a){this.ctx.rect(s,i,r-s,a-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=e[1],i=this.baseTransform||Be(this.ctx),r={createCanvasGraphics:a=>new fb(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Ov(e,s,this.ctx,r,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,s){this.ctx.strokeStyle=this.current.strokeColor=H.makeHexColor(e,t,s)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,s){this.ctx.fillStyle=this.current.fillColor=H.makeHexColor(e,t,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=IL(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,pi(t),Qt.SHADING);const i=pi(t);if(i){const{width:r,height:a}=t.canvas,[o,l,u,h]=H.getAxialAlignedBoundingBox([0,0,r,a],i);this.ctx.fillRect(o,l,u-o,h-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){st("Should not call beginInlineImage")}beginImageData(){st("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Be(this.ctx),t)){const s=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],s,i),this.current.updateRectMinMax(Be(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||zg("TODO: Support non-isolated groups."),e.knockout&&se("Knockout groups not supported.");const s=Be(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=H.getAxialAlignedBoundingBox(e.bbox,Be(t));const r=[0,0,t.canvas.width,t.canvas.height];i=H.intersect(i,r)||[0,0,0,0];const a=Math.floor(i[0]),o=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-a,1),u=Math.max(Math.ceil(i[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,l,u),f=d.context;f.translate(-a,-o),f.transform(...s),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),cu(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Be(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=H.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,s,i,r){if(A(this,ca,jv).call(this),Mf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[l,u]=H.singularValueDecompose2dScale(Be(this.ctx)),{viewportScale:h}=this,d=Math.ceil(a*this.outputScaleX*h),f=Math.ceil(o*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(l,0,0,-u,0,o*u),Mf(this.ctx)}else Mf(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new y1(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,ca,$v).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=jL(e)),i.compiled)){i.compiled(s);return}const r=this._createMaskCanvas(e),a=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,i=0,r,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=Be(o);o.transform(t,s,i,r,0,0);const u=this._createMaskCanvas(e);o.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let h=0,d=a.length;h<d;h+=2){const f=H.transform(l,[t,s,i,r,a[h],a[h+1]]),[p,m]=H.applyTransform([0,0],f);o.drawImage(u.canvas,p,m)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of e){const{data:a,width:o,height:l,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",o,l),d=h.context;d.save();const f=this.getObject(a,r);w1(d,f),d.globalCompositeOperation="source-in",d.fillStyle=i?s.getPattern(d,this,pi(t),Qt.FILL):s,d.fillRect(0,0,o,l),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),Pf(t,h.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){se("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,i){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){se("Dependent image isn't ready yet");return}const a=r.width,o=r.height,l=[];for(let u=0,h=i.length;u<h;u+=2)l.push({transform:[t,0,0,s,i[u],i[u+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,i=this.ctx;if(this.save(),!Wt){const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none")}i.scale(1/t,-1/s);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,s).context;v1(l,e),r=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(r,pi(i));i.imageSmoothingEnabled=x1(Be(i),e.interpolate),Pf(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const r=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",r,a).context;v1(l,e),i=this.applyTransferMapsToCanvas(l)}for(const r of t)s.save(),s.transform(...r.transform),s.scale(1,-1),Pf(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(t||(this.pendingClip===b1?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Be(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let a,o;if(s===0&&i===0){const l=Math.abs(t),u=Math.abs(r);if(l===u)if(e===0)a=o=1/l;else{const h=l*e;a=o=h<1?1/h:1}else if(e===0)a=1/l,o=1/u;else{const h=l*e,d=u*e;a=h<1?1/h:1,o=d<1?1/d:1}}else{const l=Math.abs(t*r-s*i),u=Math.hypot(t,s),h=Math.hypot(i,r);if(e===0)a=h/l,o=u/l;else{const d=e*l;a=h>d?h/d:1,o=u>d?u/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:s}=this.current,[i,r]=this.getScaleForStroking();if(t.lineWidth=s||1,i===1&&r===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(i,r),a.length>0){const o=Math.max(i,r);t.setLineDash(a.map(l=>l/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ca=new WeakSet,jv=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},$v=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Dl=fb;for(const n in hs)Dl.prototype[n]!==void 0&&(Dl.prototype[hs[n]]=Dl.prototype[n]);var Kh,Qh;class Vi{static get workerPort(){return c(this,Kh)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");x(this,Kh,e)}static get workerSrc(){return c(this,Qh)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");x(this,Qh,e)}}Kh=new WeakMap,Qh=new WeakMap,S(Vi,Kh,null),S(Vi,Qh,"");const Nf={UNKNOWN:0,DATA:1,ERROR:2},Je={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Sn(n){switch(n instanceof Error||typeof n=="object"&&n!==null||st('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Go(n.message);case"MissingPDFException":return new qo(n.message);case"PasswordException":return new uv(n.message,n.code);case"UnexpectedResponseException":return new Bg(n.message,n.status);case"UnknownErrorException":return new hv(n.message,n.details);default:return new hv(n.message,n.toString())}}var ui,bC,_C,mp;class Iu{constructor(e,t,s){S(this,ui);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=i=>{const r=i.data;if(r.targetName!==this.sourceName)return;if(r.stream){A(this,ui,_C).call(this,r);return}if(r.callback){const o=r.callbackId,l=this.callbackCapabilities[o];if(!l)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],r.callback===Nf.DATA)l.resolve(r.data);else if(r.callback===Nf.ERROR)l.reject(Sn(r.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[r.action];if(!a)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const o=this.sourceName,l=r.sourceName;new Promise(function(u){u(a(r.data))}).then(function(u){s.postMessage({sourceName:o,targetName:l,callback:Nf.DATA,callbackId:r.callbackId,data:u})},function(u){s.postMessage({sourceName:o,targetName:l,callback:Nf.ERROR,callbackId:r.callbackId,reason:Sn(u)})});return}if(r.streamId){A(this,ui,bC).call(this,r);return}a(r.data)},s.addEventListener("message",this._onComObjOnMessage)}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:r,data:t,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,l.postMessage({sourceName:a,targetName:o,stream:Je.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{pt(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Je.CANCEL,streamId:r,reason:Sn(u)}),h.promise}},s)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}ui=new WeakSet,bC=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:Je.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Je.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){pt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Je.ERROR,streamId:t,reason:Sn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(u){u(o(e.data,l))}).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Je.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Je.START_COMPLETE,streamId:t,reason:Sn(u)})})},_C=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Je.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Sn(e.reason));break;case Je.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Sn(e.reason));break;case Je.PULL:if(!o){r.postMessage({sourceName:s,targetName:i,stream:Je.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,new Promise(function(l){var u;l((u=o.onPull)==null?void 0:u.call(o))}).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Je.PULL_COMPLETE,streamId:t,success:!0})},function(l){r.postMessage({sourceName:s,targetName:i,stream:Je.PULL_COMPLETE,streamId:t,reason:Sn(l)})});break;case Je.ENQUEUE:if(pt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Je.CLOSE:if(pt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),A(this,ui,mp).call(this,a,t);break;case Je.ERROR:pt(a,"error should have stream controller"),a.controller.error(Sn(e.reason)),A(this,ui,mp).call(this,a,t);break;case Je.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Sn(e.reason)),A(this,ui,mp).call(this,a,t);break;case Je.CANCEL:if(!o)break;new Promise(function(l){var u;l((u=o.onCancel)==null?void 0:u.call(o,Sn(e.reason)))}).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Je.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){r.postMessage({sourceName:s,targetName:i,stream:Je.CANCEL_COMPLETE,streamId:t,reason:Sn(l)})}),o.sinkCapability.reject(Sn(e.reason)),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},mp=async function(e,t){var s,i,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(i=e.pullCall)==null?void 0:i.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var Ka,Yh;class HL{constructor({parsedData:e,rawData:t}){S(this,Ka);S(this,Yh);x(this,Ka,e),x(this,Yh,t)}getRaw(){return c(this,Yh)}get(e){return c(this,Ka).get(e)??null}getAll(){return qx(c(this,Ka))}has(e){return c(this,Ka).has(e)}}Ka=new WeakMap,Yh=new WeakMap;const fr=Symbol("INTERNAL");var Jh,Zh,ed,Zl;class UL{constructor(e,{name:t,intent:s,usage:i}){S(this,Jh,!1);S(this,Zh,!1);S(this,ed,!1);S(this,Zl,!0);x(this,Jh,!!(e&In.DISPLAY)),x(this,Zh,!!(e&In.PRINT)),this.name=t,this.intent=s,this.usage=i}get visible(){if(c(this,ed))return c(this,Zl);if(!c(this,Zl))return!1;const{print:e,view:t}=this.usage;return c(this,Jh)?(t==null?void 0:t.viewState)!=="OFF":c(this,Zh)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==fr&&st("Internal method `_setVisible` called."),x(this,ed,s),x(this,Zl,t)}}Jh=new WeakMap,Zh=new WeakMap,ed=new WeakMap,Zl=new WeakMap;var Pr,Se,ec,tc,td,zv;class WL{constructor(e,t=In.DISPLAY){S(this,td);S(this,Pr,null);S(this,Se,new Map);S(this,ec,null);S(this,tc,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,x(this,tc,e.order);for(const s of e.groups)c(this,Se).set(s.id,new UL(t,s));if(e.baseState==="OFF")for(const s of c(this,Se).values())s._setVisible(fr,!1);for(const s of e.on)c(this,Se).get(s)._setVisible(fr,!0);for(const s of e.off)c(this,Se).get(s)._setVisible(fr,!1);x(this,ec,this.getHash())}}isVisible(e){if(c(this,Se).size===0)return!0;if(!e)return zg("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,Se).has(e.id)?c(this,Se).get(e.id).visible:(se(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return A(this,td,zv).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,Se).has(t))return se(`Optional content group not found: ${t}`),!0;if(c(this,Se).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,Se).has(t))return se(`Optional content group not found: ${t}`),!0;if(!c(this,Se).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,Se).has(t))return se(`Optional content group not found: ${t}`),!0;if(!c(this,Se).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,Se).has(t))return se(`Optional content group not found: ${t}`),!0;if(c(this,Se).get(t).visible)return!1}return!0}return se(`Unknown optional content policy ${e.policy}.`),!0}return se(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const s=c(this,Se).get(e);if(!s){se(`Optional content group not found: ${e}`);return}s._setVisible(fr,!!t,!0),x(this,Pr,null)}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=c(this,Se).get(i);if(r)switch(s){case"ON":r._setVisible(fr,!0);break;case"OFF":r._setVisible(fr,!1);break;case"Toggle":r._setVisible(fr,!r.visible);break}}x(this,Pr,null)}get hasInitialVisibility(){return c(this,ec)===null||this.getHash()===c(this,ec)}getOrder(){return c(this,Se).size?c(this,tc)?c(this,tc).slice():[...c(this,Se).keys()]:null}getGroups(){return c(this,Se).size>0?qx(c(this,Se)):null}getGroup(e){return c(this,Se).get(e)||null}getHash(){if(c(this,Pr)!==null)return c(this,Pr);const e=new yC;for(const[t,s]of c(this,Se))e.update(`${t}:${s.visible}`);return x(this,Pr,e.hexdigest())}}Pr=new WeakMap,Se=new WeakMap,ec=new WeakMap,tc=new WeakMap,td=new WeakSet,zv=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let a;if(Array.isArray(r))a=A(this,td,zv).call(this,r);else if(c(this,Se).has(r))a=c(this,Se).get(r).visible;else return se(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return s==="And"};class VL{constructor(e,{disableRange:t=!1,disableStream:s=!1}){pt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});pt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,i,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){pt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new qL(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new GL(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class qL{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=Qx(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class GL{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function XL(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let h=o(t);return h=unescape(h),h=l(h),h=u(h),r(h)}if(t=a(n),t){const h=u(t);return r(h)}if(t=s("filename","i").exec(n),t){t=t[1];let h=o(t);return h=u(h),r(h)}function s(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=Hg(d);d=f.decode(p),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function a(h){const d=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,v,b,y]=f;if(v=parseInt(v,10),v in d){if(v===0)break;continue}d[v]=[b,y]}const m=[];for(let v=0;v<d.length&&v in d;++v){let[b,y]=d[v];y=o(y),b&&(y=unescape(y),v===0&&(y=l(y))),m.push(y)}return m.join("")}function o(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function l(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),m=h.slice(d+1).replace(/^[^']*'/,"");return i(f,m)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,b){return String.fromCharCode(parseInt(b,16))}),i(f,m);try{m=atob(m)}catch{}return i(f,m)})}return""}function eb(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function tb({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function nb(n){const e=n.get("Content-Disposition");if(e){let t=XL(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Qx(t))return t}return null}function Vg(n,e){return n===404||n===0&&e.startsWith("file:")?new qo('Missing PDF "'+e+'".'):new Bg(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function AC(n){return n===200||n===206}function SC(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function EC(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(se(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class _1{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=eb(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return pt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new KL(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new QL(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class KL{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,SC(s,this._withCredentials,this._abortController)).then(r=>{if(!AC(r.status))throw Vg(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:o,suggestedLength:l}=tb({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=nb(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Go("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:EC(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class QL{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const a=i.url;fetch(a,SC(r,this._withCredentials,this._abortController)).then(o=>{if(!AC(o.status))throw Vg(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:EC(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const By=200,Hy=206;function YL(n){const e=n.response;return typeof e!="string"?e:Hg(e).buffer}class JL{constructor({url:e,httpHeaders:t,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=eb(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,s){const i={begin:e,end:t};for(const r in s)i[r]=s[r];return this.request(i)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,a]of this.headers)t.setRequestHeader(r,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Hy):i.expectedStatus=By,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var i;const s=this.pendingRequests[e];s&&((i=s.onProgress)==null||i.call(s,t))}onStateChange(e,t){var l,u,h;const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){(l=s.onError)==null||l.call(s,i.status);return}const r=i.status||By;if(!(r===By&&s.expectedStatus===Hy)&&r!==s.expectedStatus){(u=s.onError)==null||u.call(s,i.status);return}const o=YL(i);if(r===Hy){const d=i.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);s.onDone({begin:parseInt(f[1],10),chunk:o})}else o?s.onDone({begin:0,chunk:o}):(h=s.onError)==null||h.call(s,i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class ZL{constructor(e){this._source=e,this._manager=new JL(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return pt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new eF(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new tF(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class eF{constructor(e,t){this._manager=e;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(s),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),s=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[o,...l]=a.split(": ");return[o,l.join(": ")]})),{allowRangeRequests:i,suggestedLength:r}=tb({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=nb(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Vg(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class tF{constructor(e,t,s){this._manager=e;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,s,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Vg(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const nF=/^[a-z][a-z0-9\-+.]+:/i;function sF(n){if(nF.test(n))return new URL(n);const e=oa.get("url");return new URL(e.pathToFileURL(n))}function kC(n,e,t){return n.protocol==="http:"?oa.get("http").request(n,{headers:e},t):oa.get("https").request(n,{headers:e},t)}class iF{constructor(e){this.source=e,this.url=sF(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=eb(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return pt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new oF(this):new rF(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=this.isFsUrl?new lF(this,e,t):new aF(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class CC{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Go("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class TC{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class rF extends CC{constructor(e){super(e);const t=Object.fromEntries(e.headers),s=i=>{if(i.statusCode===404){const l=new qo(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(i);const r=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:o}=tb({responseHeaders:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=nb(r)};this._request=kC(this._url,t,s),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class aF extends TC{constructor(e,t,s){super(e);const i=Object.fromEntries(e.headers);i.Range=`bytes=${t}-${s-1}`;const r=a=>{if(a.statusCode===404){const o=new qo(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(a)};this._request=kC(this._url,i,r),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class oF extends CC{constructor(e){super(e);const t=oa.get("fs");t.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new qo(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class lF extends TC{constructor(e,t,s){super(e);const i=oa.get("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:s-1}))}}const cF=1e5,rn=30,uF=.8;var B1,Mr,un,nd,sd,Qa,Ti,id,rd,Ya,nc,sc,Nr,ic,ad,rc,Ja,od,ld,Za,eo,cd,Ir,ac,ir,RC,PC,Bv,$n,gp,Hv,MC,NC;const ot=class ot{constructor({textContentSource:e,container:t,viewport:s}){S(this,ir);S(this,Mr,Promise.withResolvers());S(this,un,null);S(this,nd,!1);S(this,sd,!!((B1=globalThis.FontInspector)!=null&&B1.enabled));S(this,Qa,null);S(this,Ti,null);S(this,id,0);S(this,rd,0);S(this,Ya,null);S(this,nc,null);S(this,sc,0);S(this,Nr,0);S(this,ic,Object.create(null));S(this,ad,[]);S(this,rc,null);S(this,Ja,[]);S(this,od,new WeakMap);S(this,ld,null);var l;if(e instanceof ReadableStream)x(this,rc,e);else if(typeof e=="object")x(this,rc,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,un,x(this,nc,t)),x(this,Nr,s.scale*(globalThis.devicePixelRatio||1)),x(this,sc,s.rotation),x(this,Ti,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:a,pageY:o}=s.rawDims;x(this,ld,[1,0,0,-1,-a,o+r]),x(this,rd,i),x(this,id,r),A(l=ot,$n,MC).call(l),Do(t,s),c(this,Mr).promise.finally(()=>{c(ot,ac).delete(this),x(this,Ti,null),x(this,ic,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=wn.platform;return he(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,Ya).read().then(({value:t,done:s})=>{if(s){c(this,Mr).resolve();return}c(this,Qa)??x(this,Qa,t.lang),Object.assign(c(this,ic),t.styles),A(this,ir,RC).call(this,t.items),e()},c(this,Mr).reject)};return x(this,Ya,c(this,rc).getReader()),c(ot,ac).add(this),e(),c(this,Mr).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==c(this,sc)&&(t==null||t(),x(this,sc,i),Do(c(this,nc),{rotation:i})),s!==c(this,Nr)){t==null||t(),x(this,Nr,s);const a={div:null,properties:null,ctx:A(r=ot,$n,gp).call(r,c(this,Qa))};for(const o of c(this,Ja))a.properties=c(this,od).get(o),a.div=o,A(this,ir,Bv).call(this,a)}}cancel(){var t;const e=new Go("TextLayer task cancelled.");(t=c(this,Ya))==null||t.cancel(e).catch(()=>{}),x(this,Ya,null),c(this,Mr).reject(e)}get textDivs(){return c(this,Ja)}get textContentItemsStr(){return c(this,ad)}static cleanup(){if(!(c(this,ac).size>0)){c(this,Za).clear();for(const{canvas:e}of c(this,eo).values())e.remove();c(this,eo).clear()}}};Mr=new WeakMap,un=new WeakMap,nd=new WeakMap,sd=new WeakMap,Qa=new WeakMap,Ti=new WeakMap,id=new WeakMap,rd=new WeakMap,Ya=new WeakMap,nc=new WeakMap,sc=new WeakMap,Nr=new WeakMap,ic=new WeakMap,ad=new WeakMap,rc=new WeakMap,Ja=new WeakMap,od=new WeakMap,ld=new WeakMap,Za=new WeakMap,eo=new WeakMap,cd=new WeakMap,Ir=new WeakMap,ac=new WeakMap,ir=new WeakSet,RC=function(e){var i,r;if(c(this,nd))return;(r=c(this,Ti)).ctx??(r.ctx=A(i=ot,$n,gp).call(i,c(this,Qa)));const t=c(this,Ja),s=c(this,ad);for(const a of e){if(t.length>cF){se("Ignoring additional textDivs for performance reasons."),x(this,nd,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=c(this,un);x(this,un,document.createElement("span")),c(this,un).classList.add("markedContent"),a.id!==null&&c(this,un).setAttribute("id",`${a.id}`),o.append(c(this,un))}else a.type==="endMarkedContent"&&x(this,un,c(this,un).parentNode);continue}s.push(a.str),A(this,ir,PC).call(this,a)}},PC=function(e){var v;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,Ja).push(t);const i=H.transform(c(this,ld),e.transform);let r=Math.atan2(i[1],i[0]);const a=c(this,ic)[e.fontName];a.vertical&&(r+=Math.PI/2);let o=c(this,sd)&&a.fontSubstitution||a.fontFamily;o=ot.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),u=l*A(v=ot,$n,NC).call(v,o,c(this,Qa));let h,d;r===0?(h=i[4],d=i[5]-u):(h=i[4]+u*Math.sin(r),d=i[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=t.style;c(this,un)===c(this,nc)?(p.left=`${(100*h/c(this,rd)).toFixed(2)}%`,p.top=`${(100*d/c(this,id)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(c(ot,Ir)*l).toFixed(2)}px)`,p.fontFamily=o,s.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,sd)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);b!==y&&Math.max(b,y)/Math.min(b,y)>1.5&&(m=!0)}if(m&&(s.canvasWidth=a.vertical?e.height:e.width),c(this,od).set(t,s),c(this,Ti).div=t,c(this,Ti).properties=s,A(this,ir,Bv).call(this,c(this,Ti)),s.hasText&&c(this,un).append(t),s.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),c(this,un).append(b)}},Bv=function(e){var o;const{div:t,properties:s,ctx:i}=e,{style:r}=t;let a="";if(c(ot,Ir)>1&&(a=`scale(${1/c(ot,Ir)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=r,{canvasWidth:u,fontSize:h}=s;A(o=ot,$n,Hv).call(o,i,h*c(this,Nr),l);const{width:d}=i.measureText(t.textContent);d>0&&(a=`scaleX(${u*c(this,Nr)/d}) ${a}`)}s.angle!==0&&(a=`rotate(${s.angle}deg) ${a}`),a.length>0&&(r.transform=a)},$n=new WeakSet,gp=function(e=null){let t=c(this,eo).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,eo).set(e,t),c(this,cd).set(t,{size:0,family:""})}return t},Hv=function(e,t,s){const i=c(this,cd).get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)},MC=function(){if(c(this,Ir)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),x(this,Ir,e.getBoundingClientRect().height),e.remove()},NC=function(e,t){const s=c(this,Za).get(e);if(s)return s;const i=A(this,$n,gp).call(this,t);i.canvas.width=i.canvas.height=rn,A(this,$n,Hv).call(this,i,rn,e);const r=i.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const h=a/(a+o);return c(this,Za).set(e,h),i.canvas.width=i.canvas.height=0,h}i.strokeStyle="red",i.clearRect(0,0,rn,rn),i.strokeText("g",0,0);let l=i.getImageData(0,0,rn,rn).data;o=0;for(let h=l.length-1-3;h>=0;h-=4)if(l[h]>0){o=Math.ceil(h/4/rn);break}i.clearRect(0,0,rn,rn),i.strokeText("A",0,rn),l=i.getImageData(0,0,rn,rn).data,a=0;for(let h=0,d=l.length;h<d;h+=4)if(l[h]>0){a=rn-Math.floor(h/4/rn);break}i.canvas.width=i.canvas.height=0;const u=a?a/(a+o):uF;return c(this,Za).set(e,u),u},S(ot,$n),S(ot,Za,new Map),S(ot,eo,new Map),S(ot,cd,new WeakMap),S(ot,Ir,null),S(ot,ac,new Set);let kh=ot;class Ch{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){var l;if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(Ch.shouldBuildText(o))(l=r==null?void 0:r.attributes)!=null&&l.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&t.push({str:a}),!!r.children)for(const u of r.children)i(u)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const hF=65536,dF=100,fF=5e3,pF=Wt?kL:fL,mF=Wt?CL:Wk,gF=Wt?EL:dL,yF=Wt?TL:Vk;function vF(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Uv,{docId:t}=e,s=n.url?wF(n.url):null,i=n.data?xF(n.data):null,r=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,l=n.range instanceof IC?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:hF;let h=n.worker instanceof Ol?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Wg(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,v=n.CMapReaderFactory||mF,b=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,y=n.StandardFontDataFactory||yF,g=n.stopAtErrors!==!0,_=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,E=n.isEvalSupported!==!1,C=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Wt,k=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,T=typeof n.disableFontFace=="boolean"?n.disableFontFace:Wt,R=n.fontExtraProperties===!0,N=n.enableXfa===!0,P=n.ownerDocument||globalThis.document,L=n.disableRange===!0,z=n.disableStream===!0,Q=n.disableAutoFetch===!0,ne=n.pdfBug===!0,re=n.CanvasFactory||pF,de=n.FilterFactory||gF,G=n.enableHWA===!0,M=l?l.length:n.length??NaN,W=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Wt&&!T,q=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:v===Wk&&y===Vk&&p&&b&&Pu(p,document.baseURI)&&Pu(b,document.baseURI);n.canvasFactory&&c1("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&c1("`filterFactory`-instance option, please use `FilterFactory` instead.");const J=null;eL(d);const ce={canvasFactory:new re({ownerDocument:P,enableHWA:G}),filterFactory:new de({docId:t,ownerDocument:P}),cMapReaderFactory:q?null:new v({baseUrl:p,isCompressed:m}),standardFontDataFactory:q?null:new y({baseUrl:b})};if(!h){const _n={verbosity:d,port:Vi.workerPort};h=_n.port?Ol.fromPort(_n):new Ol(_n),e._worker=h}const Le={docId:t,apiVersion:"4.7.76",data:i,password:o,disableAutoFetch:Q,rangeChunkSize:u,length:M,docBaseUrl:f,enableXfa:N,evaluatorOptions:{maxImageSize:_,disableFontFace:T,ignoreErrors:g,isEvalSupported:E,isOffscreenCanvasSupported:C,canvasMaxAreaInBytes:k,fontExtraProperties:R,useSystemFonts:W,cMapUrl:q?p:null,standardFontDataUrl:q?b:null}},sn={disableFontFace:T,fontExtraProperties:R,ownerDocument:P,pdfBug:ne,styleElement:J,loadingParams:{disableAutoFetch:Q,enableXfa:N}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const _n=h.messageHandler.sendWithPromise("GetDocRequest",Le,i?[i.buffer]:null);let Ye;if(l)Ye=new VL(l,{disableRange:L,disableStream:z});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");let me;Wt?me=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Pu(s)?_1:iF:me=Pu(s)?_1:ZL,Ye=new me({url:s,length:M,httpHeaders:r,withCredentials:a,rangeChunkSize:u,disableRange:L,disableStream:z})}return _n.then(me=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Kg=new Iu(t,me,h.port),cR=new SF(Kg,e,Ye,sn,ce);e._transport=cR,Kg.send("Ready",null)})}).catch(e._capability.reject),e}function wF(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Wt&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function xF(n){if(Wt&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Hg(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function A1(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var lg;const cg=class cg{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Gt(cg,lg)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};lg=new WeakMap,S(cg,lg,0);let Uv=cg;class IC{constructor(e,t,s=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const s of this._rangeListeners)s(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){st("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class bF{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return he(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Lr,Ri,Jn,ol,yp;class _F{constructor(e,t,s,i=!1){S(this,Jn);S(this,Lr,null);S(this,Ri,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new l1:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new LC,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new tf({viewBox:this.view,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return he(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:i=wr.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var E,C;(E=this._stats)==null||E.time("Overall");const f=this._transport.getRenderingIntent(s,i,h,d),{renderingIntent:p,cacheKey:m}=f;x(this,Ri,!1),A(this,Jn,yp).call(this),o||(o=this._transport.getOptionalContentConfig(p));let v=this._intentStates.get(m);v||(v=Object.create(null),this._intentStates.set(m,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const b=!!(p&In.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(C=this._stats)==null||C.time("Page Request"),this._pumpOperatorList(f));const y=k=>{var T;v.renderTasks.delete(g),(this._maybeCleanupAfterRender||b)&&x(this,Ri,!0),A(this,Jn,ol).call(this,!b),k?(g.capability.reject(k),this._abortOperatorList({intentState:v,reason:k instanceof Error?k:new Error(k)})):g.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(T=globalThis.Stats)!=null&&T.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},g=new Vv({callback:y,params:{canvasContext:e,viewport:t,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:u});(v.renderTasks||(v.renderTasks=new Set)).add(g);const _=g.task;return Promise.all([v.displayReadyCapability.promise,o]).then(([k,T])=>{var R;if(this.destroyed){y();return}if((R=this._stats)==null||R.time("Rendering"),!(T.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");g.initializeGraphics({transparency:k,optionalContentConfig:T}),g.operatorListChanged()}).catch(y),_}getOperatorList({intent:e="display",annotationMode:t=wr.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var u;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,s,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Ch.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){a.read().then(function({value:l,done:u}){if(u){s(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),r()},i)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),x(this,Ri,!1),A(this,Jn,yp).call(this),Promise.all(e)}cleanup(e=!1){x(this,Ri,!0);const t=A(this,Jn,ol).call(this,!1);return e&&t&&this._stats&&(this._stats=new l1),t}_startRenderPage(e,t){var i,r;const s=this._intentStates.get(t);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&A(this,Jn,ol).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:a}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},a).getReader(),u=this._intentStates.get(t);u.streamReader=l;const h=()=>{l.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();A(this,Jn,ol).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof Kx){let i=dF;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Go(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Lr=new WeakMap,Ri=new WeakMap,Jn=new WeakSet,ol=function(e=!1){if(A(this,Jn,yp).call(this),!c(this,Ri)||this.destroyed)return!1;if(e)return x(this,Lr,setTimeout(()=>{x(this,Lr,null),A(this,Jn,ol).call(this,!1)},fF)),!1;for(const{renderTasks:t,operatorList:s}of this._intentStates.values())if(t.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,Ri,!1),!0},yp=function(){c(this,Lr)&&(clearTimeout(c(this,Lr)),x(this,Lr,null))};var to,ug;class AF{constructor(){S(this,to,new Set);S(this,ug,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};c(this,ug).then(()=>{for(const i of c(this,to))i.call(this,s)})}addEventListener(e,t){c(this,to).add(t)}removeEventListener(e,t){c(this,to).delete(t)}terminate(){c(this,to).clear()}}to=new WeakMap,ug=new WeakMap;var hg,no,so,oc,vp,lc,wp;const Fe=class Fe{constructor({name:e=null,port:t=null,verbosity:s=tL()}={}){S(this,oc);var i;if(this.name=e,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((i=c(Fe,so))!=null&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(c(Fe,so)||x(Fe,so,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Wt?Promise.all([oa.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Iu("main","worker",e),this._messageHandler.on("ready",function(){}),A(this,oc,vp).call(this)}_initialize(){if(c(Fe,no)||c(Fe,lc,wp)){this._setupFakeWorker();return}let{workerSrc:e}=Fe;try{Fe._isSameOrigin(window.location.href,e)||(e=Fe._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Iu("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),s.on("test",o=>{if(r.abort(),this.destroyed||!o){i();return}this._messageHandler=s,this._port=t,this._webWorker=t,A(this,oc,vp).call(this)}),s.on("ready",o=>{if(r.abort(),this.destroyed){i();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;s.send("test",o,[o.buffer])};a();return}catch{zg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(Fe,no)||(se("Setting up fake worker."),x(Fe,no,!0)),Fe._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new AF;this._port=t;const s=`fake${Gt(Fe,hg)._++}`,i=new Iu(s+"_worker",s,t);e.setup(i,t),this._messageHandler=new Iu(s,s+"_worker",t),A(this,oc,vp).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=c(Fe,so))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var s;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(s=c(this,so))==null?void 0:s.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Fe(e)}static get workerSrc(){if(Vi.workerSrc)return Vi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return he(this,"_setupFakeWorkerGlobal",(async()=>c(this,lc,wp)?c(this,lc,wp):(await import(this.workerSrc)).WorkerMessageHandler)())}};hg=new WeakMap,no=new WeakMap,so=new WeakMap,oc=new WeakSet,vp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},lc=new WeakSet,wp=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},S(Fe,lc),S(Fe,hg,0),S(Fe,no,!1),S(Fe,so),Wt&&(x(Fe,no,!0),Vi.workerSrc||(Vi.workerSrc="./pdf.worker.mjs")),Fe._isSameOrigin=(e,t)=>{let s;try{if(s=new URL(e),!s.origin||s.origin==="null")return!1}catch{return!1}const i=new URL(t,s);return s.origin===i.origin},Fe._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Ol=Fe;var Pi,Ks,cc,uc,Qs,io,Lu;class SF{constructor(e,t,s,i,r){S(this,io);S(this,Pi,new Map);S(this,Ks,new Map);S(this,cc,new Map);S(this,uc,new Map);S(this,Qs,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new LC,this.fontLoader=new AL({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return he(this,"annotationStorage",new Jx)}getRenderingIntent(e,t=wr.ENABLE,s=null,i=!1,r=!1){let a=In.DISPLAY,o=Lv;switch(e){case"any":a=In.ANY;break;case"display":break;case"print":a=In.PRINT;break;default:se(`getRenderingIntent - invalid intent: ${e}`)}const l=a&In.PRINT&&s instanceof wC?s:this.annotationStorage;switch(t){case wr.DISABLE:a+=In.ANNOTATIONS_DISABLE;break;case wr.ENABLE:break;case wr.ENABLE_FORMS:a+=In.ANNOTATIONS_FORMS;break;case wr.ENABLE_STORAGE:a+=In.ANNOTATIONS_STORAGE,o=l.serializable;break;default:se(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(a+=In.IS_EDITING),r&&(a+=In.OPLIST);const{ids:u,hash:h}=l.modifiedIds,d=[a,o.hash,h];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=c(this,Qs))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of c(this,Ks).values())e.push(i._destroy());c(this,Ks).clear(),c(this,cc).clear(),c(this,uc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Pi).clear(),this.filterFactory.destroy(),kh.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Go("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{pt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){i.close();return}pt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",s=>{const i=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then(()=>{var a;(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),r.onProgress=o=>{var l;(l=t.onProgress)==null||l.call(t,{loaded:o.loaded,total:o.total})}),i.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},i.reject),i.promise}),e.on("GetRangeReader",(s,i)=>{pt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){i.close();return}pt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{r.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new bF(s,this))}),e.on("DocException",function(s){let i;switch(s.name){case"PasswordException":i=new uv(s.message,s.code);break;case"InvalidPDFException":i=new Ok(s.message);break;case"MissingPDFException":i=new qo(s.message);break;case"UnexpectedResponseException":i=new Bg(s.message,s.status);break;case"UnknownErrorException":i=new hv(s.message,s.details);break;default:st("DocException - expected a valid Error.")}t._capability.reject(i)}),e.on("PasswordRequest",s=>{if(x(this,Qs,Promise.withResolvers()),t.onPassword){const i=r=>{r instanceof Error?c(this,Qs).reject(r):c(this,Qs).resolve({password:r})};try{t.onPassword(i,s.code)}catch(r){c(this,Qs).reject(r)}}else c(this,Qs).reject(new uv(s.message,s.code));return c(this,Qs).promise}),e.on("DataLoaded",s=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;c(this,Ks).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{var a;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":const{disableFontFace:o,fontExtraProperties:l,pdfBug:u}=this._params;if("error"in r){const p=r.error;se(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const h=u&&((a=globalThis.FontInspector)!=null&&a.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new SL(r,{disableFontFace:o,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!l&&d.data&&(d.data=null),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=r;pt(f,"The imageRef must be defined.");for(const p of c(this,Ks).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,a])=>{var l;if(this.destroyed)return;const o=c(this,Ks).get(i);if(!o.objs.has(s)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(r){case"Image":o.objs.resolve(s,a),(a==null?void 0:a.dataLen)>Q2&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(s,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBuiltInCMap",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(s):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(s):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&se("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=c(this,cc).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&c(this,uc).set(r.refStr,e);const a=new _F(t,r,this,this._params.pdfBug);return c(this,Ks).set(t,a),a});return c(this,cc).set(t,i),i}getPageIndex(e){return A1(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return A(this,io,Lu).call(this,"GetFieldObjects")}hasJSActions(){return A(this,io,Lu).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,io,Lu).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return A(this,io,Lu).call(this,"GetOptionalContentConfig").then(t=>new WL(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,Pi).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>{var r,a;return{info:i[0],metadata:i[1]?new HL(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return c(this,Pi).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,Ks).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,Pi).clear(),this.filterFactory.destroy(!0),kh.cleanup()}}cachedPageNumber(e){if(!A1(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,uc).get(t)??null}}Pi=new WeakMap,Ks=new WeakMap,cc=new WeakMap,uc=new WeakMap,Qs=new WeakMap,io=new WeakSet,Lu=function(e,t=null){const s=c(this,Pi).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return c(this,Pi).set(e,i),i};const If=Symbol("INITIAL_DATA");var ys,ud,Wv;class LC{constructor(){S(this,ud);S(this,ys,Object.create(null))}get(e,t=null){if(t){const i=A(this,ud,Wv).call(this,e);return i.promise.then(()=>t(i.data)),null}const s=c(this,ys)[e];if(!s||s.data===If)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=c(this,ys)[e];return!!t&&t.data!==If}resolve(e,t=null){const s=A(this,ud,Wv).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in c(this,ys)){const{data:s}=c(this,ys)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}x(this,ys,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,ys)){const{data:t}=c(this,ys)[e];t!==If&&(yield[e,t])}}}ys=new WeakMap,ud=new WeakSet,Wv=function(e){var t;return(t=c(this,ys))[e]||(t[e]={...Promise.withResolvers(),data:If})};var Fr;class EF{constructor(e){S(this,Fr,null);x(this,Fr,e),this.onContinue=null}get promise(){return c(this,Fr).capability.promise}cancel(e=0){c(this,Fr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,Fr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,Fr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Fr=new WeakMap;var Dr,ro;const Sa=class Sa{constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){S(this,Dr,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new EF(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,l;if(this.cancelled)return;if(this._canvas){if(c(Sa,ro).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(Sa,ro).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:a}=this.params;this.gfx=new Dl(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),c(this,Dr)&&(window.cancelAnimationFrame(c(this,Dr)),x(this,Dr,null)),c(Sa,ro).delete(this._canvas),this.callback(e||new Kx(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,Dr,window.requestAnimationFrame(()=>{x(this,Dr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(Sa,ro).delete(this._canvas),this.callback())))}};Dr=new WeakMap,ro=new WeakMap,S(Sa,ro,new WeakSet);let Vv=Sa;const kF="4.7.76",CF="8b73b828b";function S1(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function uu(n){return Math.max(0,Math.min(255,255*n))}class E1{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=uu(e),[e,e,e]}static G_HTML([e]){const t=S1(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(uu)}static RGB_HTML(e){return`#${e.map(S1).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[uu(1-Math.min(1,e+i)),uu(1-Math.min(1,s+i)),uu(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,a=1-s,o=Math.min(i,r,a);return["CMYK",i,r,a,o]}}class FC{static setupStorage(e,t,s,i,r){const a=i.getValue(t,{value:null});switch(s.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(a.value===s.attributes.xfaOn?e.setAttribute("checked",!0):a.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",o=>{i.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of s.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[l,u]of Object.entries(a))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&r.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,t,s)}static render(e){var d,f;const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:r,linkService:s});const o=r!=="richText",l=e.div;if(l.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=p}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);a.append(p),o&&Ch.shouldBuildText(i.name)&&u.push(p)}return{textDivs:u}}const h=[[i,-1,a]];for(;h.length>0;){const[p,m,v]=h.at(-1);if(m+1===p.children.length){h.pop();continue}const b=p.children[++h.at(-1)[1]];if(b===null)continue;const{name:y}=b;if(y==="#text"){const _=document.createTextNode(b.value);u.push(_),v.append(_);continue}const g=(d=b==null?void 0:b.attributes)!=null&&d.xmlns?document.createElementNS(b.attributes.xmlns,y):document.createElement(y);if(v.append(g),b.attributes&&this.setAttributes({html:g,element:b,storage:t,intent:r,linkService:s}),((f=b.children)==null?void 0:f.length)>0)h.push([b,-1,g]);else if(b.value){const _=document.createTextNode(b.value);o&&Ch.shouldBuildText(y)&&u.push(_),g.append(_)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const sf=1e3,TF=9,jo=new WeakSet;function Ki(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class RF{static create(e){switch(e.data.annotationType){case at.LINK:return new DC(e);case at.TEXT:return new PF(e);case at.WIDGET:switch(e.data.fieldType){case"Tx":return new MF(e);case"Btn":return e.data.radioButton?new $C(e):e.data.checkBox?new IF(e):new LF(e);case"Ch":return new FF(e);case"Sig":return new NF(e)}return new Xo(e);case at.POPUP:return new Gv(e);case at.FREETEXT:return new WC(e);case at.LINE:return new OF(e);case at.SQUARE:return new jF(e);case at.CIRCLE:return new $F(e);case at.POLYLINE:return new VC(e);case at.CARET:return new BF(e);case at.INK:return new sb(e);case at.POLYGON:return new zF(e);case at.HIGHLIGHT:return new qC(e);case at.UNDERLINE:return new HF(e);case at.SQUIGGLY:return new UF(e);case at.STRIKEOUT:return new WF(e);case at.STAMP:return new GC(e);case at.FILEATTACHMENT:return new VF(e);default:return new Qe(e)}}}var ao,hc,dc,hd,qv;const pb=class pb{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){S(this,hd);S(this,ao,null);S(this,hc,!1);S(this,dc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:s}){return!!(e!=null&&e.str||t!=null&&t.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return pb._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;c(this,ao)||x(this,ao,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&A(this,hd,qv).call(this,t),(s=c(this,dc))==null||s.popup.updateEdited(e)}resetEdited(){var e;c(this,ao)&&(A(this,hd,qv).call(this,c(this,ao).rect),(e=c(this,dc))==null||e.popup.resetEdited(),x(this,ao,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Xo||(r.tabIndex=sf);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.popupRef&&r.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Gv){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,r),r}const{width:o,height:l}=Ki(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(v>0||b>0){const g=`calc(${v}px * var(--scale-factor)) / calc(${b}px * var(--scale-factor))`;a.borderRadius=g}else if(this instanceof $C){const g=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=g}switch(t.borderStyle.style){case lu.SOLID:a.borderStyle="solid";break;case lu.DASHED:a.borderStyle="dashed";break;case lu.BEVELED:se("Unimplemented border style: beveled");break;case lu.INSET:se("Unimplemented border style: inset");break;case lu.UNDERLINE:a.borderBottomStyle="solid";break}const y=t.borderColor||null;y?(x(this,hc,!0),a.borderColor=H.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):a.borderWidth=0}const u=H.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=i.rawDims;a.left=`${100*(u[0]-f)/h}%`,a.top=`${100*(u[1]-p)/d}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(a.width=`${100*o/h}%`,a.height=`${100*l/d}%`):this.setRotation(m,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:a}=Ki(this.data.rect);let o,l;e%180===0?(o=100*r/s,l=100*a/i):(o=100*a/s,l=100*r/i),t.style.width=`${o}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],a=r[0],o=r.slice(1);i.target.style[s]=E1[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[s]:E1[`${a}_rgb`](o)})};return he(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||s[i];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const a=s[i];if(a){const o={detail:{[i]:r},target:e};a(o),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,b,y,g]=e.subarray(2,6);if(i===v&&r===b&&t===y&&s===g)return}const{style:a}=this.container;let o;if(c(this,hc)){const{borderColor:v,borderWidth:b}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const l=i-t,u=r-s,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let v=2,b=e.length;v<b;v+=8){const y=e[v],g=e[v+1],_=e[v+2],E=e[v+3],C=h.createElement("rect"),k=(_-t)/l,T=(r-g)/u,R=(y-_)/l,N=(g-E)/u;C.setAttribute("x",k),C.setAttribute("y",T),C.setAttribute("width",R),C.setAttribute("height",N),p.append(C),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${T}" width="${R}" height="${N}"/>`)}c(this,hc)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const s=x(this,dc,new Gv({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(s.render())}render(){st("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:a,exportValues:o}of i){if(r===-1||a===t)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!jo.has(u)){se(`_getElementsByName - element not allowed: ${a}`);continue}s.push({id:a,exportValue:l,domElement:u})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,a=i.getAttribute("data-element-id");a!==t&&jo.has(i)&&s.push({id:a,exportValue:r,domElement:i})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};ao=new WeakMap,hc=new WeakMap,dc=new WeakMap,hd=new WeakSet,qv=function(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:l}}}}=this;s==null||s.splice(0,4,...e);const{width:u,height:h}=Ki(e);t.left=`${100*(e[0]-o)/r}%`,t.top=`${100*(a-e[3]+l)/a}%`,i===0?(t.width=`${100*u/r}%`,t.height=`${100*h/a}%`):this.setRotation(i)};let Qe=pb;var Dn,va,OC,jC;class DC extends Qe{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});S(this,Dn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action),r=!0):t.attachment?(A(this,Dn,OC).call(this,i,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(A(this,Dn,jC).call(this,i,t.setOCGState),r=!0):t.dest?(this._bindLink(i,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&A(this,Dn,va).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),A(this,Dn,va).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const a=i.get(r);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),A(this,Dn,va).call(this)}_bindResetFormAction(t,s){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),A(this,Dn,va).call(this),!this._fieldObjects){se('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var d;i==null||i();const{fields:r,refs:a,include:o}=s,l=[];if(r.length!==0||a.length!==0){const f=new Set(a);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:v}of m)f.add(v)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===o&&l.push(m)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const u=this.annotationStorage,h=[];for(const f of l){const{id:p}=f;switch(h.push(p),f.type){case"text":{const v=f.defaultValue||"";u.setValue(p,{value:v});break}case"checkbox":case"radiobutton":{const v=f.defaultValue===f.exportValues;u.setValue(p,{value:v});break}case"combobox":case"listbox":{const v=f.defaultValue||"";u.setValue(p,{value:v});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!jo.has(m)){se(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Dn=new WeakSet,va=function(){this.container.setAttribute("data-internal-link","")},OC=function(t,s,i=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},A(this,Dn,va).call(this)},jC=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),A(this,Dn,va).call(this)};class PF extends Qe{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Xo extends Qe{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return wn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(s,a=>{var o;if(s==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a)}}))})}_setEventListeners(e,t,s,i){var r,a,o;for(const[l,u]of s)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,i),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":H.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||TF,r=e.style;let a;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(u/(Oy*i))||1,d=u/h;a=Math.min(i,l(d/Oy))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,l(u/Oy))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=H.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class MF extends Xo{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=s),r.setValue(a.id,{[i]:s})}render(){var i,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),jo.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=sf,this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(s,"value",f.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";s.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",p=>{var v;if(h.focused)return;const{target:m}=p;h.userValue&&(m.value=h.userValue),h.lastCommittedValue=m.value,h.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(v){h.userValue=v.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),v.target.value=h.userValue},formattedValue(v){const{formattedValue:b}=v.detail;h.formattedValue=b,b!=null&&v.target!==document.activeElement&&(v.target.value=b),e.setValue(t,{formattedValue:b})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var _;const{charLimit:b}=v.detail,{target:y}=v;if(b===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",b);let g=h.userValue;!g||g.length<=b||(g=g.slice(0,b),y.value=h.userValue=g,e.setValue(t,{value:g}),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),s.addEventListener("keydown",p=>{var b;h.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(h.commitKey=3),m===-1)return;const{value:v}=p.target;h.lastCommittedValue!==v&&(h.lastCommittedValue=v,h.userValue=v,(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,s.addEventListener("blur",p=>{var v,b;if(!h.focused||!p.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(h.focused=!1);const{value:m}=p.target;h.userValue=m,h.lastCommittedValue!==m&&((b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",p=>{var C;h.lastCommittedValue=null;const{data:m,target:v}=p,{value:b,selectionStart:y,selectionEnd:g}=v;let _=y,E=g;switch(p.inputType){case"deleteWordBackward":{const k=b.substring(0,y).match(/\w*[^\w]*$/);k&&(_-=k[0].length);break}case"deleteWordForward":{const k=b.substring(y).match(/^[^\w]*\w*/);k&&(E+=k[0].length);break}case"deleteContentBackward":y===g&&(_-=1);break;case"deleteContentForward":y===g&&(E+=1);break}p.preventDefault(),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,change:m||"",willCommit:!1,selStart:_,selEnd:E}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&s.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class NF extends Xo{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class IF extends Xo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return jo.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=sf,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,s)){const h=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(s,{value:l})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class $C extends Xo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const a of this._getElementsByName(t.fieldName,s))e.setValue(a.id,{value:!1});const r=document.createElement("input");if(jo.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=sf,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:l})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;r.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const h=a===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===s;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class LF extends DC{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class FF extends Xo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");jo.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=sf;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,s.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let a=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),a=()=>{h.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=o(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){a==null||a();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const v of i.options)v.selected=m.has(v.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,m=f.detail.remove;p[m].selected=!1,i.remove(m),p.length>0&&Array.prototype.findIndex.call(p,b=>b.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),l=o(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(f){const{index:p,displayValue:m,exportValue:v}=f.detail.insert,b=i.children[p],y=document.createElement("option");y.textContent=m,y.value=v,b?b.before(y):i.append(y),e.setValue(t,{value:o(!0),items:u(f)}),l=o(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const m of p){const{displayValue:v,exportValue:b}=m,y=document.createElement("option");y.textContent=v,y.value=b,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),l=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var p;const d=o(!0),f=o(!1);e.setValue(t,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Gv extends Qe{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:Qe._hasPopupData(t)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new DF({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const s of this.elements)s.popup=e,t.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(s=>`${Gx}${s}`).join(",")),this.container}}var fc,dg,fg,pc,oo,Ve,Mi,mc,dd,fd,gc,Ni,vs,Ii,pd,Li,md,lo,co,ke,xp,Xv,zC,BC,HC,UC,bp,_p,Kv;class DF{constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:a,richText:o,parent:l,rect:u,parentRect:h,open:d}){S(this,ke);S(this,fc,A(this,ke,HC).bind(this));S(this,dg,A(this,ke,Kv).bind(this));S(this,fg,A(this,ke,_p).bind(this));S(this,pc,A(this,ke,bp).bind(this));S(this,oo,null);S(this,Ve,null);S(this,Mi,null);S(this,mc,null);S(this,dd,null);S(this,fd,null);S(this,gc,null);S(this,Ni,!1);S(this,vs,null);S(this,Ii,null);S(this,pd,null);S(this,Li,null);S(this,md,null);S(this,lo,null);S(this,co,!1);var f;x(this,Ve,e),x(this,md,i),x(this,Mi,a),x(this,Li,o),x(this,fd,l),x(this,oo,t),x(this,pd,u),x(this,gc,h),x(this,dd,s),x(this,mc,qk.toDateObject(r)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",c(this,pc)),p.addEventListener("mouseenter",c(this,fg)),p.addEventListener("mouseleave",c(this,dg)),p.classList.add("popupTriggerArea");for(const p of s)(f=p.container)==null||f.addEventListener("keydown",c(this,fc));c(this,Ve).hidden=!0,d&&A(this,ke,bp).call(this)}render(){if(c(this,vs))return;const e=x(this,vs,document.createElement("div"));if(e.className="popup",c(this,oo)){const r=e.style.outlineColor=H.makeHexColor(...c(this,oo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=H.makeHexColor(...c(this,oo).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=c(this,md),e.append(t),c(this,mc)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,mc).valueOf()})),t.append(r)}const i=c(this,ke,xp);if(i)FC.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(c(this,Mi));e.append(r)}c(this,Ve).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let r=0,a=i.length;r<a;++r){const o=i[r];s.append(document.createTextNode(o)),r<a-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;c(this,lo)||x(this,lo,{contentsObj:c(this,Mi),richText:c(this,Li)}),e&&x(this,Ii,null),t&&(x(this,Li,A(this,ke,BC).call(this,t)),x(this,Mi,null)),(s=c(this,vs))==null||s.remove(),x(this,vs,null)}resetEdited(){var e;c(this,lo)&&({contentsObj:Gt(this,Mi)._,richText:Gt(this,Li)._}=c(this,lo),x(this,lo,null),(e=c(this,vs))==null||e.remove(),x(this,vs,null),x(this,Ii,null))}forceHide(){x(this,co,this.isVisible),c(this,co)&&(c(this,Ve).hidden=!0)}maybeShow(){c(this,co)&&(c(this,vs)||A(this,ke,_p).call(this),x(this,co,!1),c(this,Ve).hidden=!1)}get isVisible(){return c(this,Ve).hidden===!1}}fc=new WeakMap,dg=new WeakMap,fg=new WeakMap,pc=new WeakMap,oo=new WeakMap,Ve=new WeakMap,Mi=new WeakMap,mc=new WeakMap,dd=new WeakMap,fd=new WeakMap,gc=new WeakMap,Ni=new WeakMap,vs=new WeakMap,Ii=new WeakMap,pd=new WeakMap,Li=new WeakMap,md=new WeakMap,lo=new WeakMap,co=new WeakMap,ke=new WeakSet,xp=function(){const e=c(this,Li),t=c(this,Mi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,Li).html||null},Xv=function(){var e,t,s;return((s=(t=(e=c(this,ke,xp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},zC=function(){var e,t,s;return((s=(t=(e=c(this,ke,xp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},BC=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:c(this,ke,zC),fontSize:c(this,ke,Xv)?`calc(${c(this,ke,Xv)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s},HC=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,Ni))&&A(this,ke,bp).call(this)},UC=function(){if(c(this,Ii)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=c(this,fd);let a=!!c(this,gc),o=a?c(this,gc):c(this,pd);for(const m of c(this,dd))if(!o||H.intersect(m.data.rect,o)!==null){o=m.data.rect,a=!0;break}const l=H.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),h=a?o[2]-o[0]+5:0,d=l[0]+h,f=l[1];x(this,Ii,[100*(d-i)/t,100*(f-r)/s]);const{style:p}=c(this,Ve);p.left=`${c(this,Ii)[0]}%`,p.top=`${c(this,Ii)[1]}%`},bp=function(){x(this,Ni,!c(this,Ni)),c(this,Ni)?(A(this,ke,_p).call(this),c(this,Ve).addEventListener("click",c(this,pc)),c(this,Ve).addEventListener("keydown",c(this,fc))):(A(this,ke,Kv).call(this),c(this,Ve).removeEventListener("click",c(this,pc)),c(this,Ve).removeEventListener("keydown",c(this,fc)))},_p=function(){c(this,vs)||this.render(),this.isVisible?c(this,Ni)&&c(this,Ve).classList.add("focused"):(A(this,ke,UC).call(this),c(this,Ve).hidden=!1,c(this,Ve).style.zIndex=parseInt(c(this,Ve).style.zIndex)+1e3)},Kv=function(){c(this,Ve).classList.remove("focused"),!(c(this,Ni)||!this.isVisible)&&(c(this,Ve).hidden=!0,c(this,Ve).style.zIndex=parseInt(c(this,Ve).style.zIndex)-1e3)};class WC extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ee.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var gd;class OF extends Qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,gd,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:s,height:i}=Ki(t.rect),r=this.svgFactory.create(s,i,!0),a=x(this,gd,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,gd)}addHighlightArea(){this.container.classList.add("highlightArea")}}gd=new WeakMap;var yd;class jF extends Qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,yd,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:s,height:i}=Ki(t.rect),r=this.svgFactory.create(s,i,!0),a=t.borderStyle.width,o=x(this,yd,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",s-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,yd)}addHighlightArea(){this.container.classList.add("highlightArea")}}yd=new WeakMap;var vd;class $F extends Qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,vd,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:s,height:i}=Ki(t.rect),r=this.svgFactory.create(s,i,!0),a=t.borderStyle.width,o=x(this,vd,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",s/2),o.setAttribute("cy",i/2),o.setAttribute("rx",s/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,vd)}addHighlightArea(){this.container.classList.add("highlightArea")}}vd=new WeakMap;var wd;class VC extends Qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,wd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:i,popupRef:r}}=this;if(!s)return this.container;const{width:a,height:o}=Ki(t),l=this.svgFactory.create(a,o,!0);let u=[];for(let d=0,f=s.length;d<f;d+=2){const p=s[d]-t[0],m=t[3]-s[d+1];u.push(`${p},${m}`)}u=u.join(" ");const h=x(this,wd,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,wd)}addHighlightArea(){this.container.classList.add("highlightArea")}}wd=new WeakMap;class zF extends VC{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class BF extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var xd;class sb extends Qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,xd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ee.HIGHLIGHT:ee.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:s,borderStyle:i,popupRef:r}}=this,{width:a,height:o}=Ki(t),l=this.svgFactory.create(a,o,!0);for(const u of s){let h=[];for(let f=0,p=u.length;f<p;f+=2){const m=u[f]-t[0],v=t[3]-u[f+1];h.push(`${m},${v}`)}h=h.join(" ");const d=this.svgFactory.createElement(this.svgElementName);c(this,xd).push(d),d.setAttribute("points",h),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),!r&&this.hasPopupData&&this._createPopup(),l.append(d)}return this.container.append(l),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return c(this,xd)}addHighlightArea(){this.container.classList.add("highlightArea")}}xd=new WeakMap;class qC extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ee.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class HF extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class UF extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class WF extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class GC extends Qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ee.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var bd,_d,Qv;class VF extends Qe{constructor(t){var i;super(t,{isRenderable:!0});S(this,_d);S(this,bd,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",A(this,_d,Qv).bind(this)),x(this,bd,i);const{isMac:r}=wn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&A(this,_d,Qv).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return c(this,bd)}addHighlightArea(){this.container.classList.add("highlightArea")}}bd=new WeakMap,_d=new WeakSet,Qv=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Ad,uo,ho,Sd,Bo,XC,Yv;class qF{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:a,structTreeLayer:o}){S(this,Bo);S(this,Ad,null);S(this,uo,null);S(this,ho,new Map);S(this,Sd,null);this.div=e,x(this,Ad,t),x(this,uo,s),x(this,Sd,o||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return c(this,ho).size>0}async render(e){var a;const{annotations:t}=e,s=this.div;Do(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Xx,annotationStorage:e.annotationStorage||new Jx,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const l=o.annotationType===at.POPUP;if(l){const d=i.get(o.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=Ki(o.rect);if(d<=0||f<=0)continue}r.data=o;const u=RF.create(r);if(!u.isRenderable)continue;if(!l&&o.popupRef){const d=i.get(o.popupRef);d?d.push(u):i.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),await A(this,Bo,XC).call(this,h,o.id),u._isEditable&&(c(this,ho).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}A(this,Bo,Yv).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Do(t,{rotation:e.rotation}),A(this,Bo,Yv).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,ho).values())}getEditableAnnotation(e){return c(this,ho).get(e)}}Ad=new WeakMap,uo=new WeakMap,ho=new WeakMap,Sd=new WeakMap,Bo=new WeakSet,XC=async function(e,t){var a,o;const s=e.firstChild||e,i=s.id=`${Gx}${t}`,r=await((a=c(this,Sd))==null?void 0:a.getAriaAttributes(i));if(r)for(const[l,u]of r)s.setAttribute(l,u);this.div.append(e),(o=c(this,Ad))==null||o.moveElementInDOM(this.div,e,s,!1)},Yv=function(){if(!c(this,uo))return;const e=this.div;for(const[t,s]of c(this,uo)){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s)}c(this,uo).clear()};const Lf=/\r\n?|\n/g;var ws,Tn,Ed,fo,Rn,nt,KC,QC,YC,Ap,Yi,Sp,Ep,JC,Zv,ZC;const Re=class Re extends ve{constructor(t){super({...t,name:"freeTextEditor"});S(this,nt);S(this,ws);S(this,Tn,"");S(this,Ed,`${this.id}-editor`);S(this,fo,null);S(this,Rn);x(this,ws,t.color||Re._defaultColor||ve._defaultLineColor),x(this,Rn,t.fontSize||Re._defaultFontSize)}static get _keyboardManager(){const t=Re.prototype,s=a=>a.isEmpty(),i=Oo.TRANSLATE_SMALL,r=Oo.TRANSLATE_BIG;return he(this,"_keyboardManager",new nf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){ve.initialize(t,s,{strings:["pdfjs-free-text-default-content"]});const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case X.FREETEXT_SIZE:Re._defaultFontSize=s;break;case X.FREETEXT_COLOR:Re._defaultColor=s;break}}updateParams(t,s){switch(t){case X.FREETEXT_SIZE:A(this,nt,KC).call(this,s);break;case X.FREETEXT_COLOR:A(this,nt,QC).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[X.FREETEXT_SIZE,Re._defaultFontSize],[X.FREETEXT_COLOR,Re._defaultColor||ve._defaultLineColor]]}get propertiesToUpdate(){return[[X.FREETEXT_SIZE,c(this,Rn)],[X.FREETEXT_COLOR,c(this,ws)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-Re._internalPadding*t,-(Re._internalPadding+c(this,Rn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ee.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,fo,new AbortController);const t=this._uiManager.combinedSignal(c(this,fo));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Ed)),this._isDraggable=!0,(t=c(this,fo))==null||t.abort(),x(this,fo,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,Tn),s=x(this,Tn,A(this,nt,YC).call(this).trimEnd());if(t===s)return;const i=r=>{if(x(this,Tn,r),!r){this.remove();return}A(this,nt,Ep).call(this),this._uiManager.rebuild(this),A(this,nt,Ap).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(t)},mustExec:!1}),A(this,nt,Ap).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Re._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Ed)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),ve._l10nPromise.get("pdfjs-free-text-default-content").then(r=>{var a;return(a=this.editorDiv)==null?void 0:a.setAttribute("default-content",r)}),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${c(this,Rn)}px * var(--scale-factor))`,i.color=c(this,ws),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Um(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let m,v;switch(this.rotation){case 0:m=t+(o[0]-f)/h,v=s+this.height-(o[1]-p)/d;break;case 90:m=t+(o[0]-f)/h,v=s-(o[1]-p)/d,[l,u]=[u,-l];break;case 180:m=t-this.width+(o[0]-f)/h,v=s-(o[1]-p)/d,[l,u]=[-l,-u];break;case 270:m=t+(o[0]-f-this.height*d)/h,v=s+(o[1]-p-this.width*h)/d,[l,u]=[-u,l];break}this.setAt(m*r,v*a,l,u)}else this.setAt(t*r,s*a,this.width*r,this.height*a);A(this,nt,Ep).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,v,b;const s=t.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=A(m=Re,Yi,Zv).call(m,s.getData("text")||"").replaceAll(Lf,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:u}=o,h=[],d=[];if(l.nodeType===Node.TEXT_NODE){const y=l.parentElement;if(d.push(l.nodeValue.slice(u).replaceAll(Lf,"")),y!==this.editorDiv){let g=h;for(const _ of this.editorDiv.childNodes){if(_===y){g=d;continue}g.push(A(v=Re,Yi,Sp).call(v,_))}}h.push(l.nodeValue.slice(0,u).replaceAll(Lf,""))}else if(l===this.editorDiv){let y=h,g=0;for(const _ of this.editorDiv.childNodes)g++===u&&(y=d),y.push(A(b=Re,Yi,Sp).call(b,_))}x(this,Tn,`${h.join(`
`)}${r}${d.join(`
`)}`),A(this,nt,Ep).call(this);const f=new Range;let p=h.reduce((y,g)=>y+g.length,0);for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const g=y.nodeValue.length;if(p<=g){f.setStart(y,p),f.setEnd(y,p);break}p-=g}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,i){var o;let r=null;if(t instanceof WC){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:m,textPosition:v,parent:{page:{pageNumber:b}}}=t;if(!m||m.length===0)return null;r=t={annotationType:ee.FREETEXT,color:Array.from(u),fontSize:l,value:m.join(`
`),position:v,pageIndex:b-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const a=await super.deserialize(t,s,i);return x(a,Rn,t.fontSize),x(a,ws,H.makeHexColor(...t.color)),x(a,Tn,A(o=Re,Yi,Zv).call(o,t.value)),a.annotationElementId=t.id||null,a._initialData=r,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Re._internalPadding*this.parentScale,i=this.getRect(s,s),r=ve._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,ws)),a={annotationType:ee.FREETEXT,color:r,fontSize:c(this,Rn),value:A(this,nt,JC).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!A(this,nt,ZC).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${c(this,Rn)}px * var(--scale-factor))`,i.color=c(this,ws),s.replaceChildren();for(const a of c(this,Tn).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),s.append(o)}const r=Re._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:c(this,Tn)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ws=new WeakMap,Tn=new WeakMap,Ed=new WeakMap,fo=new WeakMap,Rn=new WeakMap,nt=new WeakSet,KC=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-c(this,Rn))*this.parentScale),x(this,Rn,r),A(this,nt,Ap).call(this)},i=c(this,Rn);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},QC=function(t){const s=r=>{x(this,ws,this.editorDiv.style.color=r)},i=c(this,ws);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},YC=function(){var i;const t=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(A(i=Re,Yi,Sp).call(i,r)),s=r);return t.join(`
`)},Ap=function(){const[t,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/s):(this.width=i.height/t,this.height=i.width/s),this.fixAndSetPosition()},Yi=new WeakSet,Sp=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Lf,"")},Ep=function(){if(this.editorDiv.replaceChildren(),!!c(this,Tn))for(const t of c(this,Tn).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},JC=function(){return c(this,Tn).replaceAll(" "," ")},Zv=function(t){return t.replaceAll(" "," ")},ZC=function(t){const{value:s,fontSize:i,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==i||t.color.some((o,l)=>o!==r[l])||t.pageIndex!==a},S(Re,Yi),j(Re,"_freeTextDefaultContent",""),j(Re,"_internalPadding",0),j(Re,"_defaultColor",null),j(Re,"_defaultFontSize",10),j(Re,"_type","freetext"),j(Re,"_editorType",ee.FREETEXT);let Jv=Re;var kd,Or,xs,en,eT,kp,tT,nT,ew;class k1{constructor(e,t=0,s=0,i=!0){S(this,en);S(this,kd);S(this,Or,[]);S(this,xs,[]);let r=1/0,a=-1/0,o=1/0,l=-1/0;const h=10**-4;for(const{x:y,y:g,width:_,height:E}of e){const C=Math.floor((y-t)/h)*h,k=Math.ceil((y+_+t)/h)*h,T=Math.floor((g-t)/h)*h,R=Math.ceil((g+E+t)/h)*h,N=[C,T,R,!0],P=[k,T,R,!1];c(this,Or).push(N,P),r=Math.min(r,C),a=Math.max(a,k),o=Math.min(o,T),l=Math.max(l,R)}const d=a-r+2*s,f=l-o+2*s,p=r-s,m=o-s,v=c(this,Or).at(i?-1:-2),b=[v[0],v[2]];for(const y of c(this,Or)){const[g,_,E]=y;y[0]=(g-p)/d,y[1]=(_-m)/f,y[2]=(E-m)/f}x(this,kd,{x:p,y:m,width:d,height:f,lastPoint:b})}getOutlines(){c(this,Or).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of c(this,Or))t[3]?(e.push(...A(this,en,ew).call(this,t)),A(this,en,tT).call(this,t)):(A(this,en,nT).call(this,t),e.push(...A(this,en,ew).call(this,t)));return A(this,en,eT).call(this,e)}}kd=new WeakMap,Or=new WeakMap,xs=new WeakMap,en=new WeakSet,eT=function(e){const t=[],s=new Set;for(const a of e){const[o,l,u]=a;t.push([o,l,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],u=t[a+1][2];l.push(u),u.push(l),s.add(l),s.add(u)}const i=[];let r;for(;s.size>0;){const a=s.values().next().value;let[o,l,u,h,d]=a;s.delete(a);let f=o,p=l;for(r=[o,u],i.push(r);;){let m;if(s.has(h))m=h;else if(s.has(d))m=d;else break;s.delete(m),[o,l,u,h,d]=m,f!==o&&(r.push(f,p,o,p===l?l:u),f=o),p=p===l?u:l}r.push(f,p)}return new GF(i,c(this,kd))},kp=function(e){const t=c(this,xs);let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,a=t[r][0];if(a===e)return r;a<e?s=r+1:i=r-1}return i+1},tT=function([,e,t]){const s=A(this,en,kp).call(this,e);c(this,xs).splice(s,0,[e,t])},nT=function([,e,t]){const s=A(this,en,kp).call(this,e);for(let i=s;i<c(this,xs).length;i++){const[r,a]=c(this,xs)[i];if(r!==e)break;if(r===e&&a===t){c(this,xs).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,a]=c(this,xs)[i];if(r!==e)break;if(r===e&&a===t){c(this,xs).splice(i,1);return}}},ew=function(e){const[t,s,i]=e,r=[[t,s,i]],a=A(this,en,kp).call(this,i);for(let o=0;o<a;o++){const[l,u]=c(this,xs)[o];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=l)){if(f>=l){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=l,p>u&&r.push([t,u,p])}}}return r};class sT{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof nw}}var Cd,yc;class GF extends sT{constructor(t,s){super();S(this,Cd);S(this,yc);x(this,yc,t),x(this,Cd,s)}toSVGPath(){const t=[];for(const s of c(this,yc)){let[i,r]=s;t.push(`M${i} ${r}`);for(let a=2;a<s.length;a+=2){const o=s[a],l=s[a+1];o===i?(t.push(`V${l}`),r=l):l===r&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,s,i,r],a){const o=[],l=i-t,u=r-s;for(const h of c(this,yc)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*l,d[f+1]=r-h[f+1]*u;o.push(d)}return o}get box(){return c(this,Cd)}}Cd=new WeakMap,yc=new WeakMap;var Ys,Fi,vc,wc,Js,ue,po,mo,Td,Rd,xc,bc,jr,Pd,pg,mg,Md,tw;const xi=class xi{constructor({x:e,y:t},s,i,r,a,o=0){S(this,Md);S(this,Ys);S(this,Fi,[]);S(this,vc);S(this,wc);S(this,Js,[]);S(this,ue,new Float64Array(18));S(this,po);S(this,mo);S(this,Td);S(this,Rd);S(this,xc);S(this,bc);S(this,jr,[]);x(this,Ys,s),x(this,bc,r*i),x(this,wc,a),c(this,ue).set([NaN,NaN,NaN,NaN,e,t],6),x(this,vc,o),x(this,Rd,c(xi,Pd)*i),x(this,Td,c(xi,mg)*i),x(this,xc,i),c(this,jr).push(e,t)}get free(){return!0}isEmpty(){return isNaN(c(this,ue)[8])}add({x:e,y:t}){var N;x(this,po,e),x(this,mo,t);const[s,i,r,a]=c(this,Ys);let[o,l,u,h]=c(this,ue).subarray(8,12);const d=e-u,f=t-h,p=Math.hypot(d,f);if(p<c(this,Td))return!1;const m=p-c(this,Rd),v=m/p,b=v*d,y=v*f;let g=o,_=l;o=u,l=h,u+=b,h+=y,(N=c(this,jr))==null||N.push(e,t);const E=-y/m,C=b/m,k=E*c(this,bc),T=C*c(this,bc);return c(this,ue).set(c(this,ue).subarray(2,8),0),c(this,ue).set([u+k,h+T],4),c(this,ue).set(c(this,ue).subarray(14,18),12),c(this,ue).set([u-k,h-T],16),isNaN(c(this,ue)[6])?(c(this,Js).length===0&&(c(this,ue).set([o+k,l+T],2),c(this,Js).push(NaN,NaN,NaN,NaN,(o+k-s)/r,(l+T-i)/a),c(this,ue).set([o-k,l-T],14),c(this,Fi).push(NaN,NaN,NaN,NaN,(o-k-s)/r,(l-T-i)/a)),c(this,ue).set([g,_,o,l,u,h],6),!this.isEmpty()):(c(this,ue).set([g,_,o,l,u,h],6),Math.abs(Math.atan2(_-l,g-o)-Math.atan2(y,b))<Math.PI/2?([o,l,u,h]=c(this,ue).subarray(2,6),c(this,Js).push(NaN,NaN,NaN,NaN,((o+u)/2-s)/r,((l+h)/2-i)/a),[o,l,g,_]=c(this,ue).subarray(14,18),c(this,Fi).push(NaN,NaN,NaN,NaN,((g+o)/2-s)/r,((_+l)/2-i)/a),!0):([g,_,o,l,u,h]=c(this,ue).subarray(0,6),c(this,Js).push(((g+5*o)/6-s)/r,((_+5*l)/6-i)/a,((5*o+u)/6-s)/r,((5*l+h)/6-i)/a,((o+u)/2-s)/r,((l+h)/2-i)/a),[u,h,o,l,g,_]=c(this,ue).subarray(12,18),c(this,Fi).push(((g+5*o)/6-s)/r,((_+5*l)/6-i)/a,((5*o+u)/6-s)/r,((5*l+h)/6-i)/a,((o+u)/2-s)/r,((l+h)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,Js),t=c(this,Fi),s=c(this,ue).subarray(4,6),i=c(this,ue).subarray(16,18),[r,a,o,l]=c(this,Ys),[u,h,d,f]=A(this,Md,tw).call(this);if(isNaN(c(this,ue)[6])&&!this.isEmpty())return`M${(c(this,ue)[2]-r)/o} ${(c(this,ue)[3]-a)/l} L${(c(this,ue)[4]-r)/o} ${(c(this,ue)[5]-a)/l} L${u} ${h} L${d} ${f} L${(c(this,ue)[16]-r)/o} ${(c(this,ue)[17]-a)/l} L${(c(this,ue)[14]-r)/o} ${(c(this,ue)[15]-a)/l} Z`;const p=[];p.push(`M${e[4]} ${e[5]}`);for(let m=6;m<e.length;m+=6)isNaN(e[m])?p.push(`L${e[m+4]} ${e[m+5]}`):p.push(`C${e[m]} ${e[m+1]} ${e[m+2]} ${e[m+3]} ${e[m+4]} ${e[m+5]}`);p.push(`L${(s[0]-r)/o} ${(s[1]-a)/l} L${u} ${h} L${d} ${f} L${(i[0]-r)/o} ${(i[1]-a)/l}`);for(let m=t.length-6;m>=6;m-=6)isNaN(t[m])?p.push(`L${t[m+4]} ${t[m+5]}`):p.push(`C${t[m]} ${t[m+1]} ${t[m+2]} ${t[m+3]} ${t[m+4]} ${t[m+5]}`);return p.push(`L${t[4]} ${t[5]} Z`),p.join(" ")}getOutlines(){var y;const e=c(this,Js),t=c(this,Fi),s=c(this,ue),i=s.subarray(4,6),r=s.subarray(16,18),[a,o,l,u]=c(this,Ys),h=new Float64Array((((y=c(this,jr))==null?void 0:y.length)??0)+2);for(let g=0,_=h.length-2;g<_;g+=2)h[g]=(c(this,jr)[g]-a)/l,h[g+1]=(c(this,jr)[g+1]-o)/u;h[h.length-2]=(c(this,po)-a)/l,h[h.length-1]=(c(this,mo)-o)/u;const[d,f,p,m]=A(this,Md,tw).call(this);if(isNaN(s[6])&&!this.isEmpty()){const g=new Float64Array(36);return g.set([NaN,NaN,NaN,NaN,(s[2]-a)/l,(s[3]-o)/u,NaN,NaN,NaN,NaN,(s[4]-a)/l,(s[5]-o)/u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(s[16]-a)/l,(s[17]-o)/u,NaN,NaN,NaN,NaN,(s[14]-a)/l,(s[15]-o)/u],0),new nw(g,h,c(this,Ys),c(this,xc),c(this,vc),c(this,wc))}const v=new Float64Array(c(this,Js).length+24+c(this,Fi).length);let b=e.length;for(let g=0;g<b;g+=2){if(isNaN(e[g])){v[g]=v[g+1]=NaN;continue}v[g]=e[g],v[g+1]=e[g+1]}v.set([NaN,NaN,NaN,NaN,(i[0]-a)/l,(i[1]-o)/u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(r[0]-a)/l,(r[1]-o)/u],b),b+=24;for(let g=t.length-6;g>=6;g-=6)for(let _=0;_<6;_+=2){if(isNaN(t[g+_])){v[b]=v[b+1]=NaN,b+=2;continue}v[b]=t[g+_],v[b+1]=t[g+_+1],b+=2}return v.set([NaN,NaN,NaN,NaN,t[4],t[5]],b),new nw(v,h,c(this,Ys),c(this,xc),c(this,vc),c(this,wc))}};Ys=new WeakMap,Fi=new WeakMap,vc=new WeakMap,wc=new WeakMap,Js=new WeakMap,ue=new WeakMap,po=new WeakMap,mo=new WeakMap,Td=new WeakMap,Rd=new WeakMap,xc=new WeakMap,bc=new WeakMap,jr=new WeakMap,Pd=new WeakMap,pg=new WeakMap,mg=new WeakMap,Md=new WeakSet,tw=function(){const e=c(this,ue).subarray(4,6),t=c(this,ue).subarray(16,18),[s,i,r,a]=c(this,Ys);return[(c(this,po)+(e[0]-t[0])/2-s)/r,(c(this,mo)+(e[1]-t[1])/2-i)/a,(c(this,po)+(t[0]-e[0])/2-s)/r,(c(this,mo)+(t[1]-e[1])/2-i)/a]},S(xi,Pd,8),S(xi,pg,2),S(xi,mg,c(xi,Pd)+c(xi,pg));let Th=xi;var _c,go,Di,Nd,Pn,Id,Xe,mn,Fu,Du,iT;class nw extends sT{constructor(t,s,i,r,a,o){super();S(this,mn);S(this,_c);S(this,go,null);S(this,Di);S(this,Nd);S(this,Pn);S(this,Id);S(this,Xe);x(this,Xe,t),x(this,Pn,s),x(this,_c,i),x(this,Id,r),x(this,Di,a),x(this,Nd,o),A(this,mn,iT).call(this,o);const{x:l,y:u,width:h,height:d}=c(this,go);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-l)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,p=s.length;f<p;f+=2)s[f]=(s[f]-l)/h,s[f+1]=(s[f+1]-u)/d}toSVGPath(){const t=[`M${c(this,Xe)[4]} ${c(this,Xe)[5]}`];for(let s=6,i=c(this,Xe).length;s<i;s+=6){if(isNaN(c(this,Xe)[s])){t.push(`L${c(this,Xe)[s+4]} ${c(this,Xe)[s+5]}`);continue}t.push(`C${c(this,Xe)[s]} ${c(this,Xe)[s+1]} ${c(this,Xe)[s+2]} ${c(this,Xe)[s+3]} ${c(this,Xe)[s+4]} ${c(this,Xe)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,i,r],a){const o=i-t,l=r-s;let u,h;switch(a){case 0:u=A(this,mn,Fu).call(this,c(this,Xe),t,r,o,-l),h=A(this,mn,Fu).call(this,c(this,Pn),t,r,o,-l);break;case 90:u=A(this,mn,Du).call(this,c(this,Xe),t,s,o,l),h=A(this,mn,Du).call(this,c(this,Pn),t,s,o,l);break;case 180:u=A(this,mn,Fu).call(this,c(this,Xe),i,s,-o,l),h=A(this,mn,Fu).call(this,c(this,Pn),i,s,-o,l);break;case 270:u=A(this,mn,Du).call(this,c(this,Xe),i,r,-o,-l),h=A(this,mn,Du).call(this,c(this,Pn),i,r,-o,-l);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return c(this,go)}getNewOutline(t,s){const{x:i,y:r,width:a,height:o}=c(this,go),[l,u,h,d]=c(this,_c),f=a*h,p=o*d,m=i*h+l,v=r*d+u,b=new Th({x:c(this,Pn)[0]*f+m,y:c(this,Pn)[1]*p+v},c(this,_c),c(this,Id),t,c(this,Nd),s??c(this,Di));for(let y=2;y<c(this,Pn).length;y+=2)b.add({x:c(this,Pn)[y]*f+m,y:c(this,Pn)[y+1]*p+v});return b.getOutlines()}}_c=new WeakMap,go=new WeakMap,Di=new WeakMap,Nd=new WeakMap,Pn=new WeakMap,Id=new WeakMap,Xe=new WeakMap,mn=new WeakSet,Fu=function(t,s,i,r,a){const o=new Float64Array(t.length);for(let l=0,u=t.length;l<u;l+=2)o[l]=s+t[l]*r,o[l+1]=i+t[l+1]*a;return o},Du=function(t,s,i,r,a){const o=new Float64Array(t.length);for(let l=0,u=t.length;l<u;l+=2)o[l]=s+t[l+1]*r,o[l+1]=i+t[l]*a;return o},iT=function(t){const s=c(this,Xe);let i=s[4],r=s[5],a=i,o=r,l=i,u=r,h=i,d=r;const f=t?Math.max:Math.min;for(let y=6,g=s.length;y<g;y+=6){if(isNaN(s[y]))a=Math.min(a,s[y+4]),o=Math.min(o,s[y+5]),l=Math.max(l,s[y+4]),u=Math.max(u,s[y+5]),d<s[y+5]?(h=s[y+4],d=s[y+5]):d===s[y+5]&&(h=f(h,s[y+4]));else{const _=H.bezierBoundingBox(i,r,...s.slice(y,y+6));a=Math.min(a,_[0]),o=Math.min(o,_[1]),l=Math.max(l,_[2]),u=Math.max(u,_[3]),d<_[3]?(h=_[2],d=_[3]):d===_[3]&&(h=f(h,_[2]))}i=s[y+4],r=s[y+5]}const p=a-c(this,Di),m=o-c(this,Di),v=l-a+2*c(this,Di),b=u-o+2*c(this,Di);x(this,go,{x:p,y:m,width:v,height:b,lastPoint:[h,d]})};var Ld,Fd,bs,yo,Ac,ut,Dd,Sc,Od,jd,_s,Ec,$d,Te,sw,iw,rT,wa,aT,pr;const ln=class ln{constructor({editor:e=null,uiManager:t=null}){S(this,Te);S(this,Ld,A(this,Te,rT).bind(this));S(this,Fd,A(this,Te,aT).bind(this));S(this,bs,null);S(this,yo,null);S(this,Ac);S(this,ut,null);S(this,Dd,!1);S(this,Sc,!1);S(this,Od,null);S(this,jd);S(this,_s,null);S(this,Ec);var s;e?(x(this,Sc,!1),x(this,Ec,X.HIGHLIGHT_COLOR),x(this,Od,e)):(x(this,Sc,!0),x(this,Ec,X.HIGHLIGHT_DEFAULT_COLOR)),x(this,_s,(e==null?void 0:e._uiManager)||t),x(this,jd,c(this,_s)._eventBus),x(this,Ac,(e==null?void 0:e.color)||((s=c(this,_s))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),c(ln,$d)||x(ln,$d,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return he(this,"_keyboardManager",new nf([[["Escape","mac+Escape"],ln.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ln.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ln.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ln.prototype._moveToPrevious],[["Home","mac+Home"],ln.prototype._moveToBeginning],[["End","mac+End"],ln.prototype._moveToEnd]]))}renderButton(){const e=x(this,bs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=c(this,_s)._signal;e.addEventListener("click",A(this,Te,wa).bind(this),{signal:t}),e.addEventListener("keydown",c(this,Ld),{signal:t});const s=x(this,yo,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=c(this,Ac),e.append(s),e}renderMainDropdown(){const e=x(this,ut,A(this,Te,sw).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===c(this,bs)){A(this,Te,wa).call(this,e);return}const t=e.target.getAttribute("data-color");t&&A(this,Te,iw).call(this,t,e)}_moveToNext(e){var t,s;if(!c(this,Te,pr)){A(this,Te,wa).call(this,e);return}if(e.target===c(this,bs)){(t=c(this,ut).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=c(this,ut))==null?void 0:t.firstChild)||e.target===c(this,bs)){c(this,Te,pr)&&this._hideDropdownFromKeyboard();return}c(this,Te,pr)||A(this,Te,wa).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!c(this,Te,pr)){A(this,Te,wa).call(this,e);return}(t=c(this,ut).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,Te,pr)){A(this,Te,wa).call(this,e);return}(t=c(this,ut).lastChild)==null||t.focus()}hideDropdown(){var e;(e=c(this,ut))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",c(this,Fd))}_hideDropdownFromKeyboard(){var e;if(!c(this,Sc)){if(!c(this,Te,pr)){(e=c(this,Od))==null||e.unselect();return}this.hideDropdown(),c(this,bs).focus({preventScroll:!0,focusVisible:c(this,Dd)})}}updateColor(e){if(c(this,yo)&&(c(this,yo).style.backgroundColor=e),!c(this,ut))return;const t=c(this,_s).highlightColors.values();for(const s of c(this,ut).children)s.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=c(this,bs))==null||e.remove(),x(this,bs,null),x(this,yo,null),(t=c(this,ut))==null||t.remove(),x(this,ut,null)}};Ld=new WeakMap,Fd=new WeakMap,bs=new WeakMap,yo=new WeakMap,Ac=new WeakMap,ut=new WeakMap,Dd=new WeakMap,Sc=new WeakMap,Od=new WeakMap,jd=new WeakMap,_s=new WeakMap,Ec=new WeakMap,$d=new WeakMap,Te=new WeakSet,sw=function(){const e=document.createElement("div"),t=c(this,_s)._signal;e.addEventListener("contextmenu",rs,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,i]of c(this,_s).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",c(ln,$d)[s]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=i,r.setAttribute("aria-selected",i===c(this,Ac)),r.addEventListener("click",A(this,Te,iw).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",c(this,Ld),{signal:t}),e},iw=function(e,t){t.stopPropagation(),c(this,jd).dispatch("switchannotationeditorparams",{source:this,type:c(this,Ec),value:e})},rT=function(e){ln._keyboardManager.exec(this,e)},wa=function(e){if(c(this,Te,pr)){this.hideDropdown();return}if(x(this,Dd,e.detail===0),window.addEventListener("pointerdown",c(this,Fd),{signal:c(this,_s)._signal}),c(this,ut)){c(this,ut).classList.remove("hidden");return}const t=x(this,ut,A(this,Te,sw).call(this));c(this,bs).append(t)},aT=function(e){var t;(t=c(this,ut))!=null&&t.contains(e.target)||this.hideDropdown()},pr=function(){return c(this,ut)&&!c(this,ut).classList.contains("hidden")},S(ln,$d,null);let Vm=ln;var kc,zd,Oi,vo,Cc,Gn,Bd,Hd,wo,As,Bt,hn,Tc,ji,ht,Rc,Xn,Ud,Y,rw,Cp,oT,lT,cT,aw,xa,Zn,ll,uT,Tp,Ou,hT,dT,fT,pT,mT;const ye=class ye extends ve{constructor(t){super({...t,name:"highlightEditor"});S(this,Y);S(this,kc,null);S(this,zd,0);S(this,Oi);S(this,vo,null);S(this,Cc,null);S(this,Gn,null);S(this,Bd,null);S(this,Hd,0);S(this,wo,null);S(this,As,null);S(this,Bt,null);S(this,hn,!1);S(this,Tc,null);S(this,ji);S(this,ht,null);S(this,Rc,"");S(this,Xn);S(this,Ud,"");this.color=t.color||ye._defaultColor,x(this,Xn,t.thickness||ye._defaultThickness),x(this,ji,t.opacity||ye._defaultOpacity),x(this,Oi,t.boxes||null),x(this,Ud,t.methodOfCreation||""),x(this,Rc,t.text||""),this._isDraggable=!1,t.highlightId>-1?(x(this,hn,!0),A(this,Y,Cp).call(this,t),A(this,Y,xa).call(this)):c(this,Oi)&&(x(this,kc,t.anchorNode),x(this,zd,t.anchorOffset),x(this,Bd,t.focusNode),x(this,Hd,t.focusOffset),A(this,Y,rw).call(this),A(this,Y,xa).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=ye.prototype;return he(this,"_keyboardManager",new nf([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,hn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,Xn),methodOfCreation:c(this,Ud)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var i;ve.initialize(t,s),ye._defaultColor||(ye._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case X.HIGHLIGHT_DEFAULT_COLOR:ye._defaultColor=s;break;case X.HIGHLIGHT_THICKNESS:ye._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return c(this,Tc)}updateParams(t,s){switch(t){case X.HIGHLIGHT_COLOR:A(this,Y,oT).call(this,s);break;case X.HIGHLIGHT_THICKNESS:A(this,Y,lT).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[X.HIGHLIGHT_DEFAULT_COLOR,ye._defaultColor],[X.HIGHLIGHT_THICKNESS,ye._defaultThickness]]}get propertiesToUpdate(){return[[X.HIGHLIGHT_COLOR,this.color||ye._defaultColor],[X.HIGHLIGHT_THICKNESS,c(this,Xn)||ye._defaultThickness],[X.HIGHLIGHT_FREE,c(this,hn)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(x(this,Cc,new Vm({editor:this})),t.addColorPicker(c(this,Cc))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,Y,Ou).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,A(this,Y,Ou).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){A(this,Y,aw).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Y,xa).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?A(this,Y,aw).call(this):t&&(A(this,Y,xa).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,a,o;const{drawLayer:s}=this.parent;let i;c(this,hn)?(t=(t-this.rotation+360)%360,i=A(r=ye,Zn,ll).call(r,c(this,As).box,t)):i=A(a=ye,Zn,ll).call(a,this,t),s.rotate(c(this,Bt),t),s.rotate(c(this,ht),t),s.updateBox(c(this,Bt),i),s.updateBox(c(this,ht),A(o=ye,Zn,ll).call(o,c(this,Gn).box,t))}render(){if(this.div)return this.div;const t=super.render();c(this,Rc)&&(t.setAttribute("aria-label",c(this,Rc)),t.setAttribute("role","mark")),c(this,hn)?t.classList.add("free"):this.div.addEventListener("keydown",A(this,Y,uT).bind(this),{signal:this._uiManager._signal});const s=x(this,wo,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=c(this,vo);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),Um(this,c(this,wo),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(c(this,ht),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(c(this,ht),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:A(this,Y,Tp).call(this,!0);break;case 1:case 3:A(this,Y,Tp).call(this,!1);break}}select(){var t,s;super.select(),c(this,ht)&&((t=this.parent)==null||t.drawLayer.removeClass(c(this,ht),"hovered"),(s=this.parent)==null||s.drawLayer.addClass(c(this,ht),"selected"))}unselect(){var t;super.unselect(),c(this,ht)&&((t=this.parent)==null||t.drawLayer.removeClass(c(this,ht),"selected"),c(this,hn)||A(this,Y,Tp).call(this,!1))}get _mustFixPosition(){return!c(this,hn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(c(this,Bt),t),this.parent.drawLayer.show(c(this,ht),t))}static startHighlighting(t,s,{target:i,x:r,y:a}){const{x:o,y:l,width:u,height:h}=i.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),p=v=>{v.preventDefault(),v.stopPropagation()},m=v=>{d.abort(),A(this,Zn,pT).call(this,t,v)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",p,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",rs,{signal:f}),i.addEventListener("pointermove",A(this,Zn,fT).bind(this,t),{signal:f}),this._freeHighlight=new Th({x:r,y:a},[o,l,u,h],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,s,i){var v,b,y,g;let r=null;if(t instanceof qC){const{data:{quadPoints:_,rect:E,rotation:C,id:k,color:T,opacity:R,popupRef:N},parent:{page:{pageNumber:P}}}=t;r=t={annotationType:ee.HIGHLIGHT,color:Array.from(T),opacity:R,quadPoints:_,boxes:null,pageIndex:P-1,rect:E.slice(0),rotation:C,id:k,deleted:!1,popupRef:N}}else if(t instanceof sb){const{data:{inkLists:_,rect:E,rotation:C,id:k,color:T,borderStyle:{rawWidth:R},popupRef:N},parent:{page:{pageNumber:P}}}=t;r=t={annotationType:ee.HIGHLIGHT,color:Array.from(T),thickness:R,inkLists:_,boxes:null,pageIndex:P-1,rect:E.slice(0),rotation:C,id:k,deleted:!1,popupRef:N}}const{color:a,quadPoints:o,inkLists:l,opacity:u}=t,h=await super.deserialize(t,s,i);h.color=H.makeHexColor(...a),x(h,ji,u||1),l&&x(h,Xn,t.thickness),h.annotationElementId=t.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,m]=h.pageTranslation;if(o){const _=x(h,Oi,[]);for(let E=0;E<o.length;E+=8)_.push({x:(o[E]-p)/d,y:1-(o[E+1]-m)/f,width:(o[E+2]-o[E])/d,height:(o[E+1]-o[E+5])/f});A(v=h,Y,rw).call(v),A(b=h,Y,xa).call(b),h.rotate(h.rotation)}else if(l){x(h,hn,!0);const _=l[0],E={x:_[0]-p,y:f-(_[1]-m)},C=new Th(E,[0,0,d,f],1,c(h,Xn)/2,!0,.001);for(let R=0,N=_.length;R<N;R+=2)E.x=_[R]-p,E.y=f-(_[R+1]-m),C.add(E);const{id:k,clipPathId:T}=s.drawLayer.highlight(C,h.color,h._defaultOpacity,!0);A(y=h,Y,Cp).call(y,{highlightOutlines:C.getOutlines(),highlightId:k,clipPathId:T}),A(g=h,Y,xa).call(g)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=ve._colorManager.convert(this.color),r={annotationType:ee.HIGHLIGHT,color:i,opacity:c(this,ji),thickness:c(this,Xn),quadPoints:A(this,Y,hT).call(this),outlines:A(this,Y,dT).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:A(this,Y,Ou).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!A(this,Y,mT).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};kc=new WeakMap,zd=new WeakMap,Oi=new WeakMap,vo=new WeakMap,Cc=new WeakMap,Gn=new WeakMap,Bd=new WeakMap,Hd=new WeakMap,wo=new WeakMap,As=new WeakMap,Bt=new WeakMap,hn=new WeakMap,Tc=new WeakMap,ji=new WeakMap,ht=new WeakMap,Rc=new WeakMap,Xn=new WeakMap,Ud=new WeakMap,Y=new WeakSet,rw=function(){const t=new k1(c(this,Oi),.001);x(this,As,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=c(this,As).box;const s=new k1(c(this,Oi),.0025,.001,this._uiManager.direction==="ltr");x(this,Gn,s.getOutlines());const{lastPoint:i}=c(this,Gn).box;x(this,Tc,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Cp=function({highlightOutlines:t,highlightId:s,clipPathId:i}){var d,f;if(x(this,As,t),x(this,Gn,t.getNewOutline(c(this,Xn)/2+1.5,.0025)),s>=0)x(this,Bt,s),x(this,vo,i),this.parent.drawLayer.finalizeLine(s,t),x(this,ht,this.parent.drawLayer.highlightOutline(c(this,Gn)));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(c(this,Bt),t),this.parent.drawLayer.updateBox(c(this,Bt),A(d=ye,Zn,ll).call(d,c(this,As).box,(p-this.rotation+360)%360)),this.parent.drawLayer.updateLine(c(this,ht),c(this,Gn)),this.parent.drawLayer.updateBox(c(this,ht),A(f=ye,Zn,ll).call(f,c(this,Gn).box,p))}const{x:a,y:o,width:l,height:u}=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*m/p,this.height=u*p/m;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*m/p,this.height=u*p/m;break}}const{lastPoint:h}=c(this,Gn).box;x(this,Tc,[(h[0]-a)/l,(h[1]-o)/u])},oT=function(t){const s=(a,o)=>{var l,u,h;this.color=a,(l=this.parent)==null||l.drawLayer.changeColor(c(this,Bt),a),(u=c(this,Cc))==null||u.updateColor(a),x(this,ji,o),(h=this.parent)==null||h.drawLayer.changeOpacity(c(this,Bt),o)},i=this.color,r=c(this,ji);this.addCommands({cmd:s.bind(this,t,ye._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},lT=function(t){const s=c(this,Xn),i=r=>{x(this,Xn,r),A(this,Y,cT).call(this,r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},cT=function(t){if(!c(this,hn))return;A(this,Y,Cp).call(this,{highlightOutlines:c(this,As).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},aw=function(){c(this,Bt)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Bt)),x(this,Bt,null),this.parent.drawLayer.remove(c(this,ht)),x(this,ht,null))},xa=function(t=this.parent){c(this,Bt)===null&&({id:Gt(this,Bt)._,clipPathId:Gt(this,vo)._}=t.drawLayer.highlight(c(this,As),this.color,c(this,ji)),x(this,ht,t.drawLayer.highlightOutline(c(this,Gn))),c(this,wo)&&(c(this,wo).style.clipPath=c(this,vo)))},Zn=new WeakSet,ll=function({x:t,y:s,width:i,height:r},a){switch(a){case 90:return{x:1-s-r,y:t,width:r,height:i};case 180:return{x:1-t-i,y:1-s-r,width:i,height:r};case 270:return{x:s,y:1-t-i,width:r,height:i}}return{x:t,y:s,width:i,height:r}},uT=function(t){ye._keyboardManager.exec(this,t)},Tp=function(t){if(!c(this,kc))return;const s=window.getSelection();t?s.setPosition(c(this,kc),c(this,zd)):s.setPosition(c(this,Bd),c(this,Hd))},Ou=function(){return c(this,hn)?this.rotation:0},hT=function(){if(c(this,hn))return null;const[t,s]=this.pageDimensions,[i,r]=this.pageTranslation,a=c(this,Oi),o=new Float32Array(a.length*8);let l=0;for(const{x:u,y:h,width:d,height:f}of a){const p=u*t+i,m=(1-h-f)*s+r;o[l]=o[l+4]=p,o[l+1]=o[l+3]=m,o[l+2]=o[l+6]=p+d*t,o[l+5]=o[l+7]=m+f*s,l+=8}return o},dT=function(t){return c(this,As).serialize(t,A(this,Y,Ou).call(this))},fT=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},pT=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},mT=function(t){const{color:s}=this._initialData;return t.color.some((i,r)=>i!==s[r])},S(ye,Zn),j(ye,"_defaultColor",null),j(ye,"_defaultOpacity",1),j(ye,"_defaultThickness",12),j(ye,"_type","highlight"),j(ye,"_editorType",ee.HIGHLIGHT),j(ye,"_freeHighlightId",-1),j(ye,"_freeHighlight",null),j(ye,"_freeHighlightClipId","");let qm=ye;var xo,bo,Zs,$i,Kn,_o,Ao,So,zi,Pc,Eo,ko,$r,D,gT,yT,vT,wT,lw,xT,cw,bT,_T,AT,ST,ET,ba,uw,hw,dw,Rp,Pp,cl,fw,Mp,rr,kT,pw,CT,TT,mw,Np,ju;const je=class je extends ve{constructor(t){super({...t,name:"inkEditor"});S(this,D);S(this,xo,0);S(this,bo,0);S(this,Zs,null);S(this,$i,new Path2D);S(this,Kn,!1);S(this,_o,null);S(this,Ao,!1);S(this,So,!1);S(this,zi,null);S(this,Pc,null);S(this,Eo,0);S(this,ko,0);S(this,$r,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,s){ve.initialize(t,s)}static updateDefaultParams(t,s){switch(t){case X.INK_THICKNESS:je._defaultThickness=s;break;case X.INK_COLOR:je._defaultColor=s;break;case X.INK_OPACITY:je._defaultOpacity=s/100;break}}updateParams(t,s){switch(t){case X.INK_THICKNESS:A(this,D,gT).call(this,s);break;case X.INK_COLOR:A(this,D,yT).call(this,s);break;case X.INK_OPACITY:A(this,D,vT).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[X.INK_THICKNESS,je._defaultThickness],[X.INK_COLOR,je._defaultColor||ve._defaultLineColor],[X.INK_OPACITY,Math.round(je._defaultOpacity*100)]]}get propertiesToUpdate(){return[[X.INK_THICKNESS,this.thickness||je._defaultThickness],[X.INK_COLOR,this.color||je._defaultColor||ve._defaultLineColor],[X.INK_OPACITY,Math.round(100*(this.opacity??je._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(A(this,D,Rp).call(this),A(this,D,Pp).call(this)),this.isAttachedToDOM||(this.parent.add(this),A(this,D,cl).call(this)),A(this,D,ju).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,c(this,Zs)&&(clearTimeout(c(this,Zs)),x(this,Zs,null)),(t=c(this,zi))==null||t.disconnect(),x(this,zi,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,s]=this.parentDimensions,i=this.width*t,r=this.height*s;this.setDimensions(i,r)}enableEditMode(){c(this,Kn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,A(this,D,uw).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),A(this,D,hw).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){c(this,Kn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),x(this,Kn,!0),this.div.classList.add("disabled"),A(this,D,ju).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||c(this,Kn)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),A(this,D,xT).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),A(this,D,cw).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),A(this,D,dw).call(this,t)}canvasPointerleave(t){A(this,D,dw).call(this,t)}get isResizable(){return!this.isEmpty()&&c(this,Kn)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,r,a,o]=A(this,D,wT).call(this);if(this.setAt(i,r,0,0),this.setDims(a,o),A(this,D,Rp).call(this),this.width){const[l,u]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*u),this.setAt(t*l,s*u,this.width*l,this.height*u),x(this,So,!0),A(this,D,cl).call(this),this.setDims(this.width*l,this.height*u),A(this,D,ba).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return A(this,D,Pp).call(this),this.div}setDimensions(t,s){const i=Math.round(t),r=Math.round(s);if(c(this,Eo)===i&&c(this,ko)===r)return;x(this,Eo,i),x(this,ko,r),this.canvas.style.visibility="hidden";const[a,o]=this.parentDimensions;this.width=t/a,this.height=s/o,this.fixAndSetPosition(),c(this,Kn)&&A(this,D,fw).call(this,t,s),A(this,D,cl).call(this),A(this,D,ba).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,s,i){var b,y,g;if(t instanceof sb)return null;const r=await super.deserialize(t,s,i);r.thickness=t.thickness,r.color=H.makeHexColor(...t.color),r.opacity=t.opacity;const[a,o]=r.pageDimensions,l=r.width*a,u=r.height*o,h=r.parentScale,d=t.thickness/2;x(r,Kn,!0),x(r,Eo,Math.round(l)),x(r,ko,Math.round(u));const{paths:f,rect:p,rotation:m}=t;for(let{bezier:_}of f){_=A(b=je,rr,CT).call(b,_,p,m);const E=[];r.paths.push(E);let C=h*(_[0]-d),k=h*(_[1]-d);for(let R=2,N=_.length;R<N;R+=6){const P=h*(_[R]-d),L=h*(_[R+1]-d),z=h*(_[R+2]-d),Q=h*(_[R+3]-d),ne=h*(_[R+4]-d),re=h*(_[R+5]-d);E.push([[C,k],[P,L],[z,Q],[ne,re]]),C=ne,k=re}const T=A(this,rr,kT).call(this,E);r.bezierPath2D.push(T)}const v=A(y=r,D,mw).call(y);return x(r,bo,Math.max(ve.MIN_SIZE,v[2]-v[0])),x(r,xo,Math.max(ve.MIN_SIZE,v[3]-v[1])),A(g=r,D,fw).call(g,l,u),r}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),s=ve._colorManager.convert(this.ctx.strokeStyle);return{annotationType:ee.INK,color:s,thickness:this.thickness,opacity:this.opacity,paths:A(this,D,TT).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};xo=new WeakMap,bo=new WeakMap,Zs=new WeakMap,$i=new WeakMap,Kn=new WeakMap,_o=new WeakMap,Ao=new WeakMap,So=new WeakMap,zi=new WeakMap,Pc=new WeakMap,Eo=new WeakMap,ko=new WeakMap,$r=new WeakMap,D=new WeakSet,gT=function(t){const s=r=>{this.thickness=r,A(this,D,ju).call(this)},i=this.thickness;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},yT=function(t){const s=r=>{this.color=r,A(this,D,ba).call(this)},i=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},vT=function(t){const s=r=>{this.opacity=r,A(this,D,ba).call(this)};t/=100;const i=this.opacity;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},wT=function(){const{parentRotation:t,parentDimensions:[s,i]}=this;switch(t){case 90:return[0,i,i,s];case 180:return[s,i,s,i];case 270:return[s,0,i,s];default:return[0,0,s,i]}},lw=function(){const{ctx:t,color:s,opacity:i,thickness:r,parentScale:a,scaleFactor:o}=this;t.lineWidth=r*a/o,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${s}${wL(i)}`},xT=function(t,s){this.canvas.addEventListener("contextmenu",rs,{signal:this._uiManager._signal}),A(this,D,hw).call(this),x(this,_o,new AbortController);const i=this._uiManager.combinedSignal(c(this,_o));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:i}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:i}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:i}),this.isEditing=!0,c(this,So)||(x(this,So,!0),A(this,D,cl).call(this),this.thickness||(this.thickness=je._defaultThickness),this.color||(this.color=je._defaultColor||ve._defaultLineColor),this.opacity??(this.opacity=je._defaultOpacity)),this.currentPath.push([t,s]),x(this,Ao,!1),A(this,D,lw).call(this),x(this,$r,()=>{A(this,D,AT).call(this),c(this,$r)&&window.requestAnimationFrame(c(this,$r))}),window.requestAnimationFrame(c(this,$r))},cw=function(t,s){const[i,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===i&&s===r)return;const a=this.currentPath;let o=c(this,$i);if(a.push([t,s]),x(this,Ao,!0),a.length<=2){o.moveTo(...a[0]),o.lineTo(t,s);return}a.length===3&&(x(this,$i,o=new Path2D),o.moveTo(...a[0])),A(this,D,ST).call(this,o,...a.at(-3),...a.at(-2),t,s)},bT=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);c(this,$i).lineTo(...t)},_T=function(t,s){x(this,$r,null),t=Math.min(Math.max(t,0),this.canvas.width),s=Math.min(Math.max(s,0),this.canvas.height),A(this,D,cw).call(this,t,s),A(this,D,bT).call(this);let i;if(this.currentPath.length!==1)i=A(this,D,ET).call(this);else{const u=[t,s];i=[[u,u.slice(),u.slice(),u]]}const r=c(this,$i),a=this.currentPath;this.currentPath=[],x(this,$i,new Path2D);const o=()=>{this.allRawPaths.push(a),this.paths.push(i),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(A(this,D,Rp).call(this),A(this,D,Pp).call(this)),A(this,D,ju).call(this))};this.addCommands({cmd:o,undo:l,mustExec:!0})},AT=function(){if(!c(this,Ao))return;x(this,Ao,!1);const t=Math.ceil(this.thickness*this.parentScale),s=this.currentPath.slice(-3),i=s.map(o=>o[0]),r=s.map(o=>o[1]);Math.min(...i)-t,Math.max(...i)+t,Math.min(...r)-t,Math.max(...r)+t;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const o of this.bezierPath2D)a.stroke(o);a.stroke(c(this,$i)),a.restore()},ST=function(t,s,i,r,a,o,l){const u=(s+r)/2,h=(i+a)/2,d=(r+o)/2,f=(a+l)/2;t.bezierCurveTo(u+2*(r-u)/3,h+2*(a-h)/3,d+2*(r-d)/3,f+2*(a-f)/3,d,f)},ET=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const s=[];let i,[r,a]=t[0];for(i=1;i<t.length-2;i++){const[p,m]=t[i],[v,b]=t[i+1],y=(p+v)/2,g=(m+b)/2,_=[r+2*(p-r)/3,a+2*(m-a)/3],E=[y+2*(p-y)/3,g+2*(m-g)/3];s.push([[r,a],_,E,[y,g]]),[r,a]=[y,g]}const[o,l]=t[i],[u,h]=t[i+1],d=[r+2*(o-r)/3,a+2*(l-a)/3],f=[u+2*(o-u)/3,h+2*(l-h)/3];return s.push([[r,a],d,f,[u,h]]),s},ba=function(){if(this.isEmpty()){A(this,D,Mp).call(this);return}A(this,D,lw).call(this);const{canvas:t,ctx:s}=this;s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.width,t.height),A(this,D,Mp).call(this);for(const i of this.bezierPath2D)s.stroke(i)},uw=function(){if(c(this,Pc))return;x(this,Pc,new AbortController);const t=this._uiManager.combinedSignal(c(this,Pc));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},hw=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},dw=function(t){var s;(s=c(this,_o))==null||s.abort(),x(this,_o,null),A(this,D,uw).call(this),c(this,Zs)&&clearTimeout(c(this,Zs)),x(this,Zs,setTimeout(()=>{x(this,Zs,null),this.canvas.removeEventListener("contextmenu",rs)},10)),A(this,D,_T).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Rp=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Pp=function(){x(this,zi,new ResizeObserver(t=>{const s=t[0].contentRect;s.width&&s.height&&this.setDimensions(s.width,s.height)})),c(this,zi).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=c(this,zi))==null||t.disconnect(),x(this,zi,null)},{once:!0})},cl=function(){if(!c(this,So))return;const[t,s]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*s),A(this,D,Mp).call(this)},fw=function(t,s){const i=A(this,D,Np).call(this),r=(t-i)/c(this,bo),a=(s-i)/c(this,xo);this.scaleFactor=Math.min(r,a)},Mp=function(){const t=A(this,D,Np).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},rr=new WeakSet,kT=function(t){const s=new Path2D;for(let i=0,r=t.length;i<r;i++){const[a,o,l,u]=t[i];i===0&&s.moveTo(...a),s.bezierCurveTo(o[0],o[1],l[0],l[1],u[0],u[1])}return s},pw=function(t,s,i){const[r,a,o,l]=s;switch(i){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]+=r,t[u+1]=l-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]+r,t[u+1]=d+a}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=o-t[u],t[u+1]+=a;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=o-t[u+1],t[u+1]=l-d}break;default:throw new Error("Invalid rotation")}return t},CT=function(t,s,i){const[r,a,o,l]=s;switch(i){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]-=r,t[u+1]=l-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]-a,t[u+1]=d-r}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=o-t[u],t[u+1]-=a;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=l-t[u+1],t[u+1]=o-d}break;default:throw new Error("Invalid rotation")}return t},TT=function(t,s,i,r){var h,d;const a=[],o=this.thickness/2,l=t*s+o,u=t*i+o;for(const f of this.paths){const p=[],m=[];for(let v=0,b=f.length;v<b;v++){const[y,g,_,E]=f[v];if(y[0]===E[0]&&y[1]===E[1]&&b===1){const Q=t*y[0]+l,ne=t*y[1]+u;p.push(Q,ne),m.push(Q,ne);break}const C=t*y[0]+l,k=t*y[1]+u,T=t*g[0]+l,R=t*g[1]+u,N=t*_[0]+l,P=t*_[1]+u,L=t*E[0]+l,z=t*E[1]+u;v===0&&(p.push(C,k),m.push(C,k)),p.push(T,R,N,P,L,z),m.push(T,R),v===b-1&&m.push(L,z)}a.push({bezier:A(h=je,rr,pw).call(h,p,r,this.rotation),points:A(d=je,rr,pw).call(d,m,r,this.rotation)})}return a},mw=function(){let t=1/0,s=-1/0,i=1/0,r=-1/0;for(const a of this.paths)for(const[o,l,u,h]of a){const d=H.bezierBoundingBox(...o,...l,...u,...h);t=Math.min(t,d[0]),i=Math.min(i,d[1]),s=Math.max(s,d[2]),r=Math.max(r,d[3])}return[t,i,s,r]},Np=function(){return c(this,Kn)?Math.ceil(this.thickness*this.parentScale):0},ju=function(t=!1){if(this.isEmpty())return;if(!c(this,Kn)){A(this,D,ba).call(this);return}const s=A(this,D,mw).call(this),i=A(this,D,Np).call(this);x(this,bo,Math.max(ve.MIN_SIZE,s[2]-s[0])),x(this,xo,Math.max(ve.MIN_SIZE,s[3]-s[1]));const r=Math.ceil(i+c(this,bo)*this.scaleFactor),a=Math.ceil(i+c(this,xo)*this.scaleFactor),[o,l]=this.parentDimensions;this.width=r/o,this.height=a/l,this.setAspectRatio(r,a);const u=this.translationX,h=this.translationY;this.translationX=-s[0],this.translationY=-s[1],A(this,D,cl).call(this),A(this,D,ba).call(this),x(this,Eo,r),x(this,ko,a),this.setDims(r,a);const d=t?i/this.scaleFactor/2:0;this.translate(u-this.translationX-d,h-this.translationY-d)},S(je,rr),j(je,"_defaultColor",null),j(je,"_defaultOpacity",1),j(je,"_defaultThickness",1),j(je,"_type","ink"),j(je,"_editorType",ee.INK);let ow=je;var ze,Tt,zr,Bi,Br,Mc,ei,Hi,ti,Mn,Nc,le,$u,zu,Ip,yw,RT,Lp,vw,Fp,PT,MT;const sh=class sh extends ve{constructor(t){super({...t,name:"stampEditor"});S(this,le);S(this,ze,null);S(this,Tt,null);S(this,zr,null);S(this,Bi,null);S(this,Br,null);S(this,Mc,"");S(this,ei,null);S(this,Hi,null);S(this,ti,null);S(this,Mn,!1);S(this,Nc,!1);x(this,Bi,t.bitmapUrl),x(this,Br,t.bitmapFile)}static initialize(t,s){ve.initialize(t,s)}static get supportedTypes(){return he(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return he(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,s){s.pasteEditor(ee.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t,s;c(this,Tt)&&(x(this,ze,null),this._uiManager.imageManager.deleteId(c(this,Tt)),(t=c(this,ei))==null||t.remove(),x(this,ei,null),(s=c(this,Hi))==null||s.disconnect(),x(this,Hi,null),c(this,ti)&&(clearTimeout(c(this,ti)),x(this,ti,null))),super.remove()}rebuild(){if(!this.parent){c(this,Tt)&&A(this,le,Ip).call(this);return}super.rebuild(),this.div!==null&&(c(this,Tt)&&c(this,ei)===null&&A(this,le,Ip).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(c(this,zr)||c(this,ze)||c(this,Bi)||c(this,Br)||c(this,Tt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;if(this.width&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(this,ze)?A(this,le,yw).call(this):A(this,le,Ip).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(t*i,s*r,this.width*i,this.height*r)}return this.div}copyCanvas(t,s,i=!1){var p;t||(t=224);const{width:r,height:a}=c(this,ze),o=new mv;let l=c(this,ze),u=r,h=a,d=null;if(s){if(r>s||a>s){const R=Math.min(s/r,s/a);u=Math.floor(r*R),h=Math.floor(a*R)}d=document.createElement("canvas");const m=d.width=Math.ceil(u*o.sx),v=d.height=Math.ceil(h*o.sy);c(this,Mn)||(l=A(this,le,Lp).call(this,m,v));const b=d.getContext("2d");b.filter=this._uiManager.hcmFilter;let y="white",g="#cfcfd8";this._uiManager.hcmFilter!=="none"?g="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",g="#42414d");const _=15,E=_*o.sx,C=_*o.sy,k=new OffscreenCanvas(E*2,C*2),T=k.getContext("2d");T.fillStyle=y,T.fillRect(0,0,E*2,C*2),T.fillStyle=g,T.fillRect(0,0,E,C),T.fillRect(E,C,E,C),b.fillStyle=b.createPattern(k,"repeat"),b.fillRect(0,0,m,v),b.drawImage(l,0,0,l.width,l.height,0,0,m,v)}let f=null;if(i){let m,v;if(o.symmetric&&l.width<t&&l.height<t)m=l.width,v=l.height;else if(l=c(this,ze),r>t||a>t){const g=Math.min(t/r,t/a);m=Math.floor(r*g),v=Math.floor(a*g),c(this,Mn)||(l=A(this,le,Lp).call(this,m,v))}const y=new OffscreenCanvas(m,v).getContext("2d",{willReadFrequently:!0});y.drawImage(l,0,0,l.width,l.height,0,0,m,v),f={width:m,height:v,data:y.getImageData(0,0,m,v).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return c(this,ei)}static async deserialize(t,s,i){var v;let r=null;if(t instanceof GC){const{data:{rect:b,rotation:y,id:g,structParent:_,popupRef:E},container:C,parent:{page:{pageNumber:k}}}=t,T=C.querySelector("canvas"),R=i.imageManager.getFromCanvas(C.id,T);T.remove();const N=((v=await s._structTree.getAriaAttributes(`${Gx}${g}`))==null?void 0:v.get("aria-label"))||"";r=t={annotationType:ee.STAMP,bitmapId:R.id,bitmap:R.bitmap,pageIndex:k-1,rect:b.slice(0),rotation:y,id:g,deleted:!1,accessibilityData:{decorative:!1,altText:N},isSvg:!1,structParent:_,popupRef:E}}const a=await super.deserialize(t,s,i),{rect:o,bitmap:l,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=t;h&&i.imageManager.isValidId(h)?(x(a,Tt,h),l&&x(a,ze,l)):x(a,Bi,u),x(a,Mn,d);const[p,m]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/m,a.annotationElementId=t.id||null,f&&(a.altTextData=f),a._initialData=r,x(a,Nc,!!r),a}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:ee.STAMP,bitmapId:c(this,Tt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,Mn),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=A(this,le,Fp).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=A(this,le,MT).call(this,i);if(l.isSame)return null;l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const o=c(this,Mn)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(c(this,Tt)))s.stamps.set(c(this,Tt),{area:o,serialized:i}),i.bitmap=A(this,le,Fp).call(this,!1);else if(c(this,Mn)){const l=s.stamps.get(c(this,Tt));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=A(this,le,Fp).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};ze=new WeakMap,Tt=new WeakMap,zr=new WeakMap,Bi=new WeakMap,Br=new WeakMap,Mc=new WeakMap,ei=new WeakMap,Hi=new WeakMap,ti=new WeakMap,Mn=new WeakMap,Nc=new WeakMap,le=new WeakSet,$u=function(t,s=!1){if(!t){this.remove();return}x(this,ze,t.bitmap),s||(x(this,Tt,t.id),x(this,Mn,t.isSvg)),t.file&&x(this,Mc,t.file.name),A(this,le,yw).call(this)},zu=function(){if(x(this,zr,null),this._uiManager.enableWaiting(!1),!!c(this,ei)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,ze)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,ze)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ip=function(){if(c(this,Tt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Tt)).then(i=>A(this,le,$u).call(this,i,!0)).finally(()=>A(this,le,zu).call(this));return}if(c(this,Bi)){const i=c(this,Bi);x(this,Bi,null),this._uiManager.enableWaiting(!0),x(this,zr,this._uiManager.imageManager.getFromUrl(i).then(r=>A(this,le,$u).call(this,r)).finally(()=>A(this,le,zu).call(this)));return}if(c(this,Br)){const i=c(this,Br);x(this,Br,null),this._uiManager.enableWaiting(!0),x(this,zr,this._uiManager.imageManager.getFromFile(i).then(r=>A(this,le,$u).call(this,r)).finally(()=>A(this,le,zu).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=sh.supportedTypesStr;const s=this._uiManager._signal;x(this,zr,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,le,$u).call(this,r)}i()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>A(this,le,zu).call(this))),t.click()},yw=function(){const{div:t}=this;let{width:s,height:i}=c(this,ze);const[r,a]=this.pageDimensions,o=.75;if(this.width)s=this.width*r,i=this.height*a;else if(s>o*r||i>o*a){const d=Math.min(o*r/s,o*a/i);s*=d,i*=d}const[l,u]=this.parentDimensions;this.setDims(s*l/r,i*u/a),this._uiManager.enableWaiting(!1);const h=x(this,ei,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),A(this,le,vw).call(this,s,i),A(this,le,PT).call(this),c(this,Nc)||(this.parent.addUndoableEditor(this),x(this,Nc,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Mc)&&h.setAttribute("aria-label",c(this,Mc))},RT=function(t,s){var o;const[i,r]=this.parentDimensions;this.width=t/i,this.height=s/r,(o=this._initialOptions)!=null&&o.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,c(this,ti)!==null&&clearTimeout(c(this,ti)),x(this,ti,setTimeout(()=>{x(this,ti,null),A(this,le,vw).call(this,t,s)},200))},Lp=function(t,s){const{width:i,height:r}=c(this,ze);let a=i,o=r,l=c(this,ze);for(;a>2*t||o>2*s;){const u=a,h=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*s&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(a,o);d.getContext("2d").drawImage(l,0,0,u,h,0,0,a,o),l=d.transferToImageBitmap()}return l},vw=function(t,s){const i=new mv,r=Math.ceil(t*i.sx),a=Math.ceil(s*i.sy),o=c(this,ei);if(!o||o.width===r&&o.height===a)return;o.width=r,o.height=a;const l=c(this,Mn)?c(this,ze):A(this,le,Lp).call(this,r,a),u=o.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(l,0,0,l.width,l.height,0,0,r,a)},Fp=function(t){if(t){if(c(this,Mn)){const r=this._uiManager.imageManager.getSvgUrl(c(this,Tt));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=c(this,ze),s.getContext("2d").drawImage(c(this,ze),0,0),s.toDataURL()}if(c(this,Mn)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*aa.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*aa.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(c(this,ze),0,0,c(this,ze).width,c(this,ze).height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(c(this,ze))},PT=function(){this._uiManager._signal&&(x(this,Hi,new ResizeObserver(t=>{const s=t[0].contentRect;s.width&&s.height&&A(this,le,RT).call(this,s.width,s.height)})),c(this,Hi).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=c(this,Hi))==null||t.disconnect(),x(this,Hi,null)},{once:!0}))},MT=function(t){var u;const{rect:s,pageIndex:i,accessibilityData:{altText:r}}=this._initialData,a=t.rect.every((h,d)=>Math.abs(h-s[d])<1),o=t.pageIndex===i,l=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:a&&o&&l,isSameAltText:l}},j(sh,"_type","stamp"),j(sh,"_editorType",ee.STAMP);let gw=sh;var Co,Ic,ni,Hr,Ui,Nn,Ur,Lc,Fc,Ht,Wi,V,Wr,Nt,NT,xw,bw,_w,Dp;const ls=class ls{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:l,viewport:u,l10n:h}){S(this,Nt);S(this,Co);S(this,Ic,!1);S(this,ni,null);S(this,Hr,null);S(this,Ui,null);S(this,Nn,new Map);S(this,Ur,!1);S(this,Lc,!1);S(this,Fc,!1);S(this,Ht,null);S(this,Wi,null);S(this,V);const d=[...c(ls,Wr).values()];if(!ls._initialized){ls._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),x(this,V,e),this.pageIndex=t,this.div=s,x(this,Co,r),x(this,ni,a),this.viewport=u,x(this,Ht,l),this.drawLayer=o,this._structTree=i,c(this,V).addLayer(this)}get isEmpty(){return c(this,Nn).size===0}get isInvisible(){return this.isEmpty&&c(this,V).getMode()===ee.NONE}updateToolbar(e){c(this,V).updateToolbar(e)}updateMode(e=c(this,V).getMode()){switch(A(this,Nt,Dp).call(this),e){case ee.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ee.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case ee.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of c(ls,Wr).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,Ht))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(c(this,V).getMode()!==ee.INK)return;if(!e){for(const s of c(this,Nn).values())if(s.isEmpty()){s.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){c(this,V).setEditingState(e)}addCommands(e){c(this,V).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,ni))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const s of c(this,Nn).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(c(this,V).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!c(this,ni))return;const t=c(this,ni).getEditableAnnotations();for(const s of t){if(s.hide(),c(this,V).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}}disable(){var i;x(this,Fc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of c(this,Nn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(c(this,ni)){const r=c(this,ni).getEditableAnnotations();for(const a of r){const{id:o}=a.data;if(c(this,V).isDeletedAnnotationElement(o))continue;let l=t.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(c(this,V).addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}A(this,Nt,Dp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of c(ls,Wr).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,Fc,!1)}getEditableAnnotation(e){var t;return((t=c(this,ni))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,V).getActive()!==e&&c(this,V).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,Ht))!=null&&e.div&&!c(this,Wi)){x(this,Wi,new AbortController);const t=c(this,V).combinedSignal(c(this,Wi));c(this,Ht).div.addEventListener("pointerdown",A(this,Nt,NT).bind(this),{signal:t}),c(this,Ht).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,Ht))!=null&&e.div&&c(this,Wi)&&(c(this,Wi).abort(),x(this,Wi,null),c(this,Ht).div.classList.remove("highlighting"))}enableClick(){if(c(this,Hr))return;x(this,Hr,new AbortController);const e=c(this,V).combinedSignal(c(this,Hr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=c(this,Hr))==null||e.abort(),x(this,Hr,null)}attach(e){c(this,Nn).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,V).isDeletedAnnotationElement(t)&&c(this,V).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,Nn).delete(e.id),(t=c(this,Co))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,Fc)&&e.annotationElementId&&c(this,V).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,V).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,c(this,Lc)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,V).addDeletedAnnotationElement(e.annotationElementId),ve.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,V).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),c(this,V).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,Ui)&&(e._focusEventsAllowed=!1,x(this,Ui,setTimeout(()=>{x(this,Ui,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,V)._signal}),t.focus())},0))),e._structTreeParentId=(s=c(this,Co))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return c(this,V).getId()}combinedSignal(e){return c(this,V).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,Nt,xw))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){c(this,V).updateToolbar(e),c(this,V).updateMode(e);const{offsetX:s,offsetY:i}=A(this,Nt,_w).call(this),r=this.getNextId(),a=A(this,Nt,bw).call(this,{parent:this,id:r,x:s,y:i,uiManager:c(this,V),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=c(ls,Wr).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,V)))||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=A(this,Nt,bw).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:c(this,V),isCentered:t,...s});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(A(this,Nt,_w).call(this),!0)}setSelected(e){c(this,V).setSelected(e)}toggleSelected(e){c(this,V).toggleSelected(e)}isSelected(e){return c(this,V).isSelected(e)}unselect(e){c(this,V).unselect(e)}pointerup(e){const{isMac:t}=wn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&c(this,Ur)){if(x(this,Ur,!1),!c(this,Ic)){x(this,Ic,!0);return}if(c(this,V).getMode()===ee.STAMP){c(this,V).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(c(this,V).getMode()===ee.HIGHLIGHT&&this.enableTextSelection(),c(this,Ur)){x(this,Ur,!1);return}const{isMac:t}=wn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;x(this,Ur,!0);const s=c(this,V).getActive();x(this,Ic,!s||s.isEmpty())}findNewParent(e,t,s){const i=c(this,V).findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}destroy(){var e,t;((e=c(this,V).getActive())==null?void 0:e.parent)===this&&(c(this,V).commitOrRemove(),c(this,V).setActiveEditor(null)),c(this,Ui)&&(clearTimeout(c(this,Ui)),x(this,Ui,null));for(const s of c(this,Nn).values())(t=c(this,Co))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,c(this,Nn).clear(),c(this,V).removeLayer(this)}render({viewport:e}){this.viewport=e,Do(this.div,e);for(const t of c(this,V).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,V).commitOrRemove(),A(this,Nt,Dp).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Do(this.div,{rotation:s}),t!==s)for(const i of c(this,Nn).values())i.rotate(s);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,V).viewParameters.realScale}};Co=new WeakMap,Ic=new WeakMap,ni=new WeakMap,Hr=new WeakMap,Ui=new WeakMap,Nn=new WeakMap,Ur=new WeakMap,Lc=new WeakMap,Fc=new WeakMap,Ht=new WeakMap,Wi=new WeakMap,V=new WeakMap,Wr=new WeakMap,Nt=new WeakSet,NT=function(e){c(this,V).unselectAll();const{target:t}=e;if(t===c(this,Ht).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,Ht).div.contains(t)){const{isMac:s}=wn.platform;if(e.button!==0||e.ctrlKey&&s)return;c(this,V).showAllEditors("highlight",!0,!0),c(this,Ht).div.classList.add("free"),this.toggleDrawing(),qm.startHighlighting(this,c(this,V).direction==="ltr",{target:c(this,Ht).div,x:e.x,y:e.y}),c(this,Ht).div.addEventListener("pointerup",()=>{c(this,Ht).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,V)._signal}),e.preventDefault()}},xw=function(){return c(ls,Wr).get(c(this,V).getMode())},bw=function(e){const t=c(this,Nt,xw);return t?new t.prototype.constructor(e):null},_w=function(){const{x:e,y:t,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+s),l=Math.min(window.innerHeight,t+i),u=(r+o)/2-e,h=(a+l)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},Dp=function(){x(this,Lc,!0);for(const e of c(this,Nn).values())e.isEmpty()&&e.remove();x(this,Lc,!1)},j(ls,"_initialized",!1),S(ls,Wr,new Map([Jv,ow,gw,qm].map(e=>[e._editorType,e])));let ww=ls;var si,Wd,Ze,Vr,Vd,Sw,Ho,Ew,IT;const Et=class Et{constructor({pageIndex:e}){S(this,Ho);S(this,si,null);S(this,Wd,0);S(this,Ze,new Map);S(this,Vr,new Map);this.pageIndex=e}setParent(e){if(!c(this,si)){x(this,si,e);return}if(c(this,si)!==e){if(c(this,Ze).size>0)for(const t of c(this,Ze).values())t.remove(),e.append(t);x(this,si,e)}}static get _svgFactory(){return he(this,"_svgFactory",new Xx)}highlight(e,t,s,i=!1){const r=Gt(this,Wd)._++,a=A(this,Ho,Ew).call(this,e.box);a.classList.add("highlight"),e.free&&a.classList.add("free");const o=Et._svgFactory.createElement("defs");a.append(o);const l=Et._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",u),l.setAttribute("d",e.toSVGPath()),i&&c(this,Vr).set(r,l);const h=A(this,Ho,IT).call(this,o,u),d=Et._svgFactory.createElement("use");return a.append(d),a.setAttribute("fill",t),a.setAttribute("fill-opacity",s),d.setAttribute("href",`#${u}`),c(this,Ze).set(r,a),{id:r,clipPathId:`url(#${h})`}}highlightOutline(e){const t=Gt(this,Wd)._++,s=A(this,Ho,Ew).call(this,e.box);s.classList.add("highlightOutline");const i=Et._svgFactory.createElement("defs");s.append(i);const r=Et._svgFactory.createElement("path");i.append(r);const a=`path_p${this.pageIndex}_${t}`;r.setAttribute("id",a),r.setAttribute("d",e.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let o;if(e.free){s.classList.add("free");const h=Et._svgFactory.createElement("mask");i.append(h),o=`mask_p${this.pageIndex}_${t}`,h.setAttribute("id",o),h.setAttribute("maskUnits","objectBoundingBox");const d=Et._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=Et._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const l=Et._svgFactory.createElement("use");s.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);const u=l.cloneNode();return s.append(u),l.classList.add("mainOutline"),u.classList.add("secondaryOutline"),c(this,Ze).set(t,s),t}finalizeLine(e,t){const s=c(this,Vr).get(e);c(this,Vr).delete(e),this.updateBox(e,t.box),s.setAttribute("d",t.toSVGPath())}updateLine(e,t){c(this,Ze).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),c(this,Vr).delete(e)}updatePath(e,t){c(this,Vr).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var s;A(s=Et,Vd,Sw).call(s,c(this,Ze).get(e),t)}show(e,t){c(this,Ze).get(e).classList.toggle("hidden",!t)}rotate(e,t){c(this,Ze).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){c(this,Ze).get(e).setAttribute("fill",t)}changeOpacity(e,t){c(this,Ze).get(e).setAttribute("fill-opacity",t)}addClass(e,t){c(this,Ze).get(e).classList.add(t)}removeClass(e,t){c(this,Ze).get(e).classList.remove(t)}getSVGRoot(e){return c(this,Ze).get(e)}remove(e){c(this,si)!==null&&(c(this,Ze).get(e).remove(),c(this,Ze).delete(e))}destroy(){x(this,si,null);for(const e of c(this,Ze).values())e.remove();c(this,Ze).clear()}};si=new WeakMap,Wd=new WeakMap,Ze=new WeakMap,Vr=new WeakMap,Vd=new WeakSet,Sw=function(e,{x:t=0,y:s=0,width:i=1,height:r=1}={}){const{style:a}=e;a.top=`${100*s}%`,a.left=`${100*t}%`,a.width=`${100*i}%`,a.height=`${100*r}%`},Ho=new WeakSet,Ew=function(e){var s;const t=Et._svgFactory.create(1,1,!0);return c(this,si).append(t),t.setAttribute("aria-hidden",!0),A(s=Et,Vd,Sw).call(s,t,e),t},IT=function(e,t){const s=Et._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=Et._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i},S(Et,Vd);let Aw=Et;K.AbortException;K.AnnotationEditorLayer;K.AnnotationEditorParamsType;K.AnnotationEditorType;K.AnnotationEditorUIManager;K.AnnotationLayer;K.AnnotationMode;K.CMapCompressionType;K.ColorPicker;K.DOMSVGFactory;K.DrawLayer;K.FeatureTest;var XF=K.GlobalWorkerOptions;K.ImageKind;K.InvalidPDFException;K.MissingPDFException;K.OPS;K.OutputScale;K.PDFDataRangeTransport;K.PDFDateString;K.PDFWorker;K.PasswordResponses;K.PermissionFlag;K.PixelsPerInch;K.RenderingCancelledException;K.TextLayer;K.UnexpectedResponseException;K.Util;K.VerbosityLevel;K.XfaLayer;K.build;K.createValidAbsoluteUrl;K.fetchData;var KF=K.getDocument;K.getFilenameFromUrl;K.getPdfFilenameFromUrl;K.getXfaPageViewport;K.isDataScheme;K.isPdfFile;K.noContextMenu;K.normalizeUnicode;K.setLayerDimensions;K.shadow;K.version;XF.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.worker.min.js";function QF(){const[n,e]=I.useState(!1),[t,s]=I.useState([]),[i,r]=I.useState([]),[a,o]=I.useState(!1),[l,u]=I.useState(null),h=b=>{b.preventDefault(),e(!0)},d=()=>{e(!1)},f=b=>{b.preventDefault(),e(!1);const y=Array.from(b.dataTransfer.files).filter(g=>g.type==="application/pdf"||g.type==="text/plain"||g.type.includes("word"));s(g=>[...g,...y])},p=b=>{if(b.target.files){const y=Array.from(b.target.files).filter(g=>g.type==="application/pdf"||g.type==="text/plain"||g.type.includes("word"));s(g=>[...g,...y])}},m=b=>{s(y=>y.filter((g,_)=>_!==b))},v=async()=>{o(!0),u(null);try{const b=[];for(const y of t)try{let g="";if(y.type==="application/pdf"){const C=await y.arrayBuffer(),k=await KF({data:C}).promise,T=k.numPages;for(let R=1;R<=T;R++){const P=await(await k.getPage(R)).getTextContent();g+=P.items.map(L=>L.str).join(" ")+`
`}}else y.type==="text/plain"&&(g=await y.text());sessionStorage.setItem("processedDocument",g);let _="";const E=void 0;b.push({id:crypto.randomUUID(),name:y.name,content:g,summary:_})}catch(g){throw console.error(`Error processing file ${y.name}:`,g),new Error(`Failed to process ${y.name}`)}r(b),s([])}catch(b){console.error("Processing error:",b),u("Failed to process documents. Please try again.")}finally{o(!1)}};return w.jsxs(Jt,{className:"mt-6",children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upload Documents"}),w.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Upload PDF, Word, or text documents to generate quiz questions"})]}),t.length>0&&w.jsx(pe,{onClick:v,disabled:a,className:"flex items-center",children:a?w.jsxs(w.Fragment,{children:[w.jsx(TE,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Process Files"})]}),l&&w.jsx("div",{className:"mb-4 p-4 text-sm text-red-800 bg-red-100 rounded-md",children:l}),w.jsxs("div",{className:Qc("flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-6","transition-colors duration-200",n?"border-blue-500 bg-blue-50":"border-gray-300",t.length>0&&"mb-4"),onDragOver:h,onDragLeave:d,onDrop:f,children:[w.jsx(VI,{className:"h-8 w-8 text-gray-400"}),w.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Drag and drop files here, or click to select files"}),w.jsx("input",{type:"file",className:"hidden",onChange:p,multiple:!0,accept:".pdf,.doc,.docx,.txt",id:"file-upload"}),w.jsx(pe,{variant:"outline",className:"mt-4",onClick:()=>{var b;return(b=document.getElementById("file-upload"))==null?void 0:b.click()},children:"Select Files"})]}),t.length>0&&w.jsxs("div",{className:"space-y-2",children:[w.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Selected Files:"}),w.jsx("div",{className:"divide-y divide-gray-200",children:t.map((b,y)=>w.jsxs("div",{className:"flex items-center justify-between py-2",children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx(Mx,{className:"h-4 w-4 text-gray-400 mr-2"}),w.jsx("span",{className:"text-sm text-gray-900",children:b.name})]}),w.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>m(y),className:"text-gray-500 hover:text-red-600",children:w.jsx(FE,{className:"h-4 w-4"})})]},y))})]}),i.length>0&&w.jsxs("div",{className:"mt-6",children:[w.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Processed Documents:"}),w.jsx("div",{className:"space-y-4",children:i.map(b=>w.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[w.jsx("h5",{className:"font-medium text-gray-900",children:b.name}),b.summary&&w.jsxs("div",{className:"mt-2",children:[w.jsx("h6",{className:"text-sm font-medium text-gray-700",children:"Summary:"}),w.jsx("p",{className:"text-sm text-gray-600 mt-1",children:b.summary})]})]},b.id))})]})]})}const sr=wE((n,e)=>({quizzes:[],currentQuiz:null,setCurrentQuiz:t=>n({currentQuiz:t}),addQuiz:t=>n(s=>({quizzes:[...s.quizzes,{...t,attempts:[],settings:{allowRetakes:!1,allowPause:!1,maxAttempts:1}}]})),updateQuiz:(t,s)=>n(i=>({quizzes:i.quizzes.map(r=>r.id===t?{...r,...s}:r)})),submitQuizAttempt:t=>n(s=>{const i=s.quizzes.find(o=>o.id===t.quizId);if(!i)return s;const r=i.questions.reduce((o,l,u)=>o+(l.correctAnswer===t.answers[u]?1:0),0),a={...t,score:r/i.questions.length*100,status:"completed",completedAt:new Date().toISOString()};return{quizzes:s.quizzes.map(o=>o.id===i.id?{...o,attempts:[...o.attempts.filter(l=>!(l.studentId===t.studentId&&l.status==="in-progress")),a]}:o)}}),pauseQuizAttempt:(t,s,i)=>n(r=>{const a=r.quizzes.find(u=>u.id===t);if(!a)return r;const o=a.attempts.find(u=>u.studentId===s&&u.status==="in-progress");if(!o)return r;const l={...o,status:"paused",remainingTime:i};return{quizzes:r.quizzes.map(u=>u.id===t?{...u,attempts:[...u.attempts.filter(h=>h.id!==o.id),l]}:u)}}),resumeQuizAttempt:(t,s)=>{const i=e().quizzes.find(a=>a.id===t);if(!i)return null;const r=i.attempts.find(a=>a.studentId===s&&a.status==="paused");return r?(n(a=>({quizzes:a.quizzes.map(o=>o.id===t?{...o,attempts:[...o.attempts.filter(l=>l.id!==r.id),{...r,status:"in-progress"}]}:o)})),{...r,status:"in-progress"}):null}}));function YF(){const n=pa(),e=sr(t=>t.quizzes);return w.jsxs(Jt,{children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Quizzes"}),w.jsxs(pe,{size:"sm",onClick:()=>n("/admin/create-quiz"),children:[w.jsx(ME,{className:"mr-2 h-4 w-4"}),"Create Quiz"]})]}),w.jsx("div",{className:"mt-6 divide-y divide-gray-200",children:e.length===0?w.jsx("p",{className:"py-4 text-center text-sm text-gray-500",children:"No quizzes created yet. Click the button above to create your first quiz."}):e.map(t=>w.jsxs("div",{className:"flex items-center justify-between py-4",children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx(Mx,{className:"h-5 w-5 text-gray-400"}),w.jsxs("div",{className:"ml-4",children:[w.jsx("h4",{className:"text-sm font-medium text-gray-900",children:t.title}),w.jsxs("p",{className:"text-sm text-gray-500",children:[t.questionsCount," questions • Created on"," ",new Date(t.createdAt).toLocaleDateString()]})]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:Qc("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",t.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:t.status}),w.jsx(pe,{variant:"outline",size:"sm",onClick:()=>n(`/admin/quiz/${t.id}`),children:"Edit"})]})]},t.id))})]})}function JF(){return w.jsx(Yc,{children:w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),w.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your quizzes and upload documents"})]}),w.jsx(QF,{}),w.jsx(YF,{})]})})}const ib=I.forwardRef(({className:n,label:e,error:t,...s},i)=>w.jsxs("div",{className:"w-full",children:[e&&w.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:e}),w.jsx("textarea",{className:Qc("block w-full rounded-md border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset transition-colors","placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6",t?"ring-red-300 focus:ring-red-500":"ring-gray-300 focus:ring-blue-500",n),ref:i,...s}),t&&w.jsx("p",{className:"mt-1 text-sm text-red-500",children:t})]}));ib.displayName="Textarea";function ZF(){const n=pa(),e=sr(E=>E.addQuiz),[t,s]=I.useState(""),[i,r]=I.useState(""),[a,o]=I.useState(30),[l,u]=I.useState(10),[h,d]=I.useState(!1),[f,p]=I.useState(!1),[m,v]=I.useState(1),[b,y]=I.useState({}),g=()=>{const E={};return t.trim()||(E.title="Title is required"),i.trim()||(E.description="Description is required"),a<1&&(E.duration="Duration must be at least 1 minute"),l<1&&(E.questionsCount="Must have at least 1 question"),f&&m<2&&(E.maxAttempts="Maximum attempts must be at least 2 if retakes are allowed"),y(E),Object.keys(E).length===0},_=E=>{if(E.preventDefault(),!g())return;const C={id:crypto.randomUUID(),title:t,description:i,duration:a,questionsCount:l,status:"draft",questions:[],createdAt:new Date().toISOString(),settings:{allowPause:h,allowRetakes:f,maxAttempts:f?m:1}};e(C),n("/admin")};return w.jsx(Jt,{children:w.jsxs("form",{onSubmit:_,className:"space-y-6",children:[w.jsx(ts,{label:"Quiz Title",value:t,onChange:E=>s(E.target.value),error:b.title,icon:w.jsx(Mx,{className:"h-5 w-5 text-gray-400"}),placeholder:"Enter quiz title"}),w.jsx(ib,{label:"Description",value:i,onChange:E=>r(E.target.value),error:b.description,placeholder:"Enter quiz description",rows:3}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsx(ts,{type:"number",label:"Duration (minutes)",value:a,onChange:E=>o(Number(E.target.value)),error:b.duration,min:1,icon:w.jsx(WI,{className:"h-5 w-5 text-gray-400"})}),w.jsx(ts,{type:"number",label:"Number of Questions",value:l,onChange:E=>u(Number(E.target.value)),error:b.questionsCount,min:1,icon:w.jsx(CE,{className:"h-5 w-5 text-gray-400"})})]}),w.jsxs("div",{className:"space-y-4 rounded-lg border border-gray-200 p-4",children:[w.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Quiz Settings"}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx($I,{className:"h-5 w-5 text-gray-400"}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Allow Pause"}),w.jsx("p",{className:"text-xs text-gray-500",children:"Students can pause and resume later"})]})]}),w.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[w.jsx("input",{type:"checkbox",className:"sr-only peer",checked:h,onChange:E=>d(E.target.checked)}),w.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(HI,{className:"h-5 w-5 text-gray-400"}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Allow Retakes"}),w.jsx("p",{className:"text-xs text-gray-500",children:"Students can retake the quiz multiple times"})]})]}),w.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[w.jsx("input",{type:"checkbox",className:"sr-only peer",checked:f,onChange:E=>p(E.target.checked)}),w.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),f&&w.jsx("div",{className:"mt-4",children:w.jsx(ts,{type:"number",label:"Maximum Attempts",value:m,onChange:E=>v(Number(E.target.value)),error:b.maxAttempts,min:2,max:10})})]}),w.jsxs("div",{className:"flex justify-end gap-4",children:[w.jsx(pe,{type:"button",variant:"outline",onClick:()=>n("/admin"),children:"Cancel"}),w.jsx(pe,{type:"submit",children:"Create Quiz"})]})]})})}function eD(){return w.jsx(Yc,{children:w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New Quiz"}),w.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Configure your quiz settings and generate questions"})]}),w.jsx(ZF,{})]})})}function tD({quiz:n}){const e=sr(o=>o.updateQuiz),[t,s]=I.useState(null),i=o=>{const l=n.questions.filter(u=>u.id!==o);e(n.id,{questions:l})},r=o=>{s({...o})},a=()=>{if(!t)return;const o=n.questions.map(l=>l.id===t.id?t:l);e(n.id,{questions:o}),s(null)};return n.questions.length===0?w.jsx(Jt,{children:w.jsx("div",{className:"text-center py-6",children:w.jsx("p",{className:"text-sm text-gray-500",children:'No questions yet. Click "Generate Questions" to create some.'})})}):w.jsx("div",{className:"space-y-4",children:n.questions.map((o,l)=>w.jsx(Jt,{children:(t==null?void 0:t.id)===o.id?w.jsxs("div",{className:"p-6 space-y-4",children:[w.jsx(ts,{label:"Question Text",value:t.text,onChange:u=>s({...t,text:u.target.value})}),w.jsxs("div",{className:"space-y-3",children:[w.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Options"}),t.options.map((u,h)=>w.jsx(ts,{value:u,onChange:d=>{const f=[...t.options];f[h]=d.target.value,s({...t,options:f})},label:`Option ${String.fromCharCode(65+h)}`},h))]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer"}),w.jsx("select",{value:t.correctAnswer,onChange:u=>s({...t,correctAnswer:Number(u.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:t.options.map((u,h)=>w.jsxs("option",{value:h,children:["Option ",String.fromCharCode(65+h)]},h))})]}),w.jsx(ib,{label:"Explanation",value:t.explanation,onChange:u=>s({...t,explanation:u.target.value})}),w.jsxs("div",{className:"flex justify-end gap-2",children:[w.jsxs(pe,{variant:"outline",size:"sm",onClick:()=>s(null),children:[w.jsx(FE,{className:"h-4 w-4 mr-2"}),"Cancel"]}),w.jsxs(pe,{size:"sm",onClick:a,children:[w.jsx(NE,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}):w.jsxs("div",{className:"flex justify-between items-start p-6",children:[w.jsxs("div",{className:"flex-1",children:[w.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Question ",l+1]}),w.jsx("p",{className:"mt-1 text-sm text-gray-700",children:o.text}),w.jsx("div",{className:"mt-4 space-y-2",children:o.options.map((u,h)=>w.jsx("div",{className:`flex items-center p-2 rounded-md ${h===o.correctAnswer?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:w.jsxs("span",{className:"text-sm",children:[String.fromCharCode(65+h),". ",u]})},h))}),o.explanation&&w.jsx("div",{className:"mt-4",children:w.jsxs("p",{className:"text-sm text-gray-500",children:[w.jsx("span",{className:"font-medium",children:"Explanation:"})," ",o.explanation]})})]}),w.jsxs("div",{className:"flex gap-2 ml-4",children:[w.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>r(o),className:"text-blue-600 hover:text-blue-700",children:w.jsx(zI,{className:"h-4 w-4"})}),w.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>i(o.id),className:"text-red-600 hover:text-red-700",children:w.jsx(IE,{className:"h-4 w-4"})})]})]})},o.id))})}const nD=[{value:"lite",label:"Lite",description:"Basic understanding and recall of main concepts",icon:w.jsx(ky,{className:"h-5 w-5 text-green-500"})},{value:"medium",label:"Medium",description:"Deeper understanding and application of concepts",icon:w.jsx(ky,{className:"h-5 w-5 text-yellow-500"})},{value:"expert",label:"Expert",description:"Advanced analysis and complex problem-solving",icon:w.jsx(ky,{className:"h-5 w-5 text-red-500"})}];function sD({quiz:n,onClose:e}){const[t,s]=I.useState(!1),[i,r]=I.useState(null),[a,o]=I.useState("medium"),l=sr(f=>f.updateQuiz),u=n.questionsCount-n.questions.length,h=f=>f.every(p=>typeof p.text=="string"&&p.text.length>0&&Array.isArray(p.options)&&p.options.length===4&&p.options.every(m=>typeof m=="string"&&m.length>0)&&typeof p.correctAnswer=="number"&&p.correctAnswer>=0&&p.correctAnswer<=3&&typeof p.explanation=="string"&&p.explanation.length>0),d=async()=>{var f,p;if(u<=0){r("All required questions have already been generated.");return}s(!0),r(null);try{const m=sessionStorage.getItem("processedDocument");if(!m)throw new Error("No document content found. Please upload and process a document first.");const v="sk-1234567890abcdef1234567890abcdef",b="openai",y=new Ge({apiKey:v,dangerouslyAllowBrowser:!0}),g={lite:`
          - Focus on basic comprehension and recall
          - Use straightforward language
          - Test fundamental concepts
          - Make options clearly distinct
          - Include simple explanations
        `,medium:`
          - Test understanding and application
          - Include some analytical thinking
          - Use moderate technical language
          - Require connecting multiple concepts
          - Provide detailed explanations
        `,expert:`
          - Focus on advanced analysis and synthesis
          - Use complex scenarios and edge cases
          - Include technical terminology
          - Require deep understanding
          - Test problem-solving abilities
          - Provide comprehensive explanations
        `},_=`
        Based on the following document content, generate ${u} multiple-choice questions at ${a.toUpperCase()} complexity level.

        Complexity Guidelines:
        ${g[a]}

        Each question MUST:
        - Be relevant to the main topics in the document
        - Have exactly 4 options (A, B, C, D)
        - Include one correct answer
        - Include a detailed explanation
        - Match the specified complexity level
        - Test understanding rather than mere recall
        
        Format each question as a JSON object with this EXACT structure:
        {
          "text": "question text",
          "options": ["option A", "option B", "option C", "option D"],
          "correctAnswer": 0-3 (index of correct option),
          "explanation": "explanation for the correct answer"
        }

        Return an array of these question objects.

        Document content:
        ${m.slice(0,8e3)} // Limit content length to avoid token limits
      `,C=(p=(f=(await y.chat.completions.create({model:"gpt-4",messages:[{role:"system",content:"You are an expert quiz generator that creates high-quality, relevant multiple-choice questions based on document content. Always return valid JSON arrays containing question objects."},{role:"user",content:_}],temperature:.7,max_tokens:2500,response_format:{type:"json_object"}})).choices[0])==null?void 0:f.message)==null?void 0:p.content;if(!C)throw new Error("No response received from AI service");let k;try{const T=JSON.parse(C);k=Array.isArray(T)?T:T.questions}catch{throw new Error("Failed to parse AI response as JSON")}if(!Array.isArray(k)||k.length===0)throw new Error("Invalid question format received from AI service");if(!h(k))throw new Error("Generated questions do not meet the required format");l(n.id,{questions:[...n.questions,...k.map(T=>({...T,id:crypto.randomUUID()}))]}),e()}catch(m){console.error("Question generation error:",m),r(m instanceof Error?m.message:"An unexpected error occurred while generating questions. Please try again.")}finally{s(!1)}};return w.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:w.jsx(Jt,{className:"w-full max-w-md",children:w.jsxs("div",{className:"space-y-6 p-6",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Generate Questions"}),w.jsx("p",{className:"mt-1 text-sm text-gray-500",children:u>0?`Generate ${u} more questions (${n.questions.length}/${n.questionsCount} created)`:"All required questions have been generated"})]}),u<=0&&w.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-yellow-50 rounded-lg",children:[w.jsx(kE,{className:"h-5 w-5 text-yellow-500 flex-shrink-0"}),w.jsx("p",{className:"text-sm text-yellow-700",children:"You have already generated all required questions. You can delete existing questions if you want to generate new ones."})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Complexity Level"}),w.jsx("div",{className:"grid gap-4",children:nD.map(f=>w.jsxs("button",{onClick:()=>o(f.value),className:`flex items-start space-x-4 p-4 rounded-lg border-2 transition-colors ${a===f.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-200"}`,children:[w.jsx("div",{className:"flex-shrink-0",children:f.icon}),w.jsxs("div",{className:"flex-1",children:[w.jsx("p",{className:"font-medium text-gray-900",children:f.label}),w.jsx("p",{className:"text-sm text-gray-500",children:f.description})]})]},f.value))})]}),i&&w.jsx("div",{className:"p-4 text-sm text-red-800 bg-red-100 rounded-md",children:i}),w.jsxs("div",{className:"flex justify-end gap-4",children:[w.jsx(pe,{variant:"outline",onClick:e,disabled:t,children:"Cancel"}),w.jsx(pe,{onClick:d,disabled:t||u<=0,className:"min-w-[100px]",children:t?w.jsxs(w.Fragment,{children:[w.jsx(TE,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):"Generate"})]})]})})})}function iD({quiz:n,onClose:e}){const{students:t,addStudent:s,removeStudent:i,assignQuiz:r,unassignQuiz:a}=nr(),[o,l]=I.useState(""),[u,h]=I.useState(""),[d,f]=I.useState(""),[p,m]=I.useState(!1),v=t.filter(g=>g.name.toLowerCase().includes(d.toLowerCase())||g.email.toLowerCase().includes(d.toLowerCase())),b=()=>{!o||!u||(s({name:u,email:o}),l(""),h(""),m(!1))},y=g=>{const _=t.find(E=>E.id===g);_&&(_.assignedQuizzes.includes(n.id)?a(g,n.id):r(g,n.id))};return w.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 overflow-y-auto",children:w.jsx(Jt,{className:"w-full max-w-2xl",children:w.jsxs("div",{className:"p-6",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Assign Students to Quiz"}),w.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:['Manage student access to "',n.title,'"']}),w.jsxs("div",{className:"mt-6 space-y-4",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"flex-1",children:w.jsx(ts,{placeholder:"Search students...",value:d,onChange:g=>f(g.target.value),icon:w.jsx(UI,{className:"h-5 w-5 text-gray-400"})})}),w.jsxs(pe,{variant:"outline",onClick:()=>m(!0),children:[w.jsx(qI,{className:"mr-2 h-4 w-4"}),"Add Student"]})]}),p&&w.jsxs(Jt,{className:"p-4 bg-gray-50",children:[w.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Add New Student"}),w.jsxs("div",{className:"space-y-4",children:[w.jsx(ts,{placeholder:"Student Name",value:u,onChange:g=>h(g.target.value)}),w.jsx(ts,{type:"email",placeholder:"Student Email",value:o,onChange:g=>l(g.target.value),icon:w.jsx(RE,{className:"h-5 w-5 text-gray-400"})}),w.jsxs("div",{className:"flex justify-end gap-2",children:[w.jsx(pe,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),w.jsxs(pe,{onClick:b,children:[w.jsx(ME,{className:"mr-2 h-4 w-4"}),"Add Student"]})]})]})]}),w.jsxs("div",{className:"mt-4",children:[w.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:["Students (",v.length,")"]}),w.jsx("div",{className:"space-y-2",children:v.length===0?w.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No students found. Add students to assign them to this quiz."}):v.map(g=>w.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.name}),w.jsx("p",{className:"text-sm text-gray-500",children:g.email})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(pe,{variant:g.assignedQuizzes.includes(n.id)?"primary":"outline",size:"sm",onClick:()=>y(g.id),children:g.assignedQuizzes.includes(n.id)?"Assigned":"Assign"}),w.jsx(pe,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>i(g.id),children:w.jsx(IE,{className:"h-4 w-4"})})]})]},g.id))})]})]}),w.jsx("div",{className:"mt-6 flex justify-end",children:w.jsx(pe,{onClick:e,children:"Done"})})]})})})}function rD(){const{id:n}=Tx(),e=pa(),{quizzes:t,updateQuiz:s}=sr(),{students:i}=nr(),r=t.find(v=>v.id===n),[a,o]=I.useState(!1),[l,u]=I.useState(!1),[h,d]=I.useState(null);if(I.useEffect(()=>{r||e("/admin")},[r,e]),!r)return null;const f=i.filter(v=>v.assignedQuizzes.includes(r.id)),p=r.questions.length===r.questionsCount&&f.length>0&&r.status==="draft",m=()=>{if(!p){r.questions.length<r.questionsCount?d("Please generate all required questions before publishing."):f.length===0?d("Please assign at least one student before publishing."):r.status==="published"&&d("This quiz has already been published.");return}s(r.id,{status:"published"}),e("/admin")};return w.jsx(Yc,{children:w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>e("/admin"),className:"mb-2",children:[w.jsx(Px,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]}),w.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r.title}),w.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r.description})]}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs(pe,{variant:"outline",onClick:()=>u(!0),children:[w.jsx(XI,{className:"mr-2 h-4 w-4"}),"Assign Students (",f.length,")"]}),w.jsxs(pe,{variant:"outline",onClick:()=>o(!0),disabled:a||r.questions.length===r.questionsCount,children:["Generate Questions (",r.questions.length,"/",r.questionsCount,")"]}),w.jsxs(pe,{onClick:m,disabled:!p,children:[w.jsx(NE,{className:"mr-2 h-4 w-4"}),r.status==="published"?"Published":"Publish Quiz"]})]})]}),h&&w.jsxs("div",{className:"flex items-center gap-2 p-4 text-sm text-amber-800 bg-amber-50 rounded-lg",children:[w.jsx(kE,{className:"h-5 w-5 text-amber-500"}),h]}),w.jsxs(Jt,{children:[w.jsxs("div",{className:"flex items-center justify-between p-6",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quiz Details"}),w.jsx("div",{className:"flex items-center gap-4",children:w.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${r.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:r.status})})]}),w.jsxs("dl",{className:"grid grid-cols-3 gap-4 px-6 pb-6",children:[w.jsxs("div",{children:[w.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Duration"}),w.jsxs("dd",{className:"text-sm text-gray-900",children:[r.duration," minutes"]})]}),w.jsxs("div",{children:[w.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Questions"}),w.jsxs("dd",{className:"text-sm text-gray-900",children:[r.questions.length," / ",r.questionsCount]})]}),w.jsxs("div",{children:[w.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Assigned Students"}),w.jsx("dd",{className:"text-sm text-gray-900",children:f.length})]})]})]}),w.jsx(tD,{quiz:r}),a&&w.jsx(sD,{quiz:r,onClose:()=>o(!1)}),l&&w.jsx(iD,{quiz:r,onClose:()=>u(!1)})]})})}function aD(){const n=pa(),e=nr(o=>o.user),t=sr(o=>o.quizzes.filter(l=>l.status==="published"));if(!e)return null;const s=o=>{const l=o.attempts.filter(h=>h.studentId===e.id),u=l[l.length-1];return u?u.status==="paused"?"paused":u.status==="completed"?o.settings.allowRetakes&&l.length<o.settings.maxAttempts?"can-retry":"completed":"in-progress":"not-started"},i=o=>{switch(o){case"completed":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"can-retry":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},r=o=>{switch(o){case"completed":return"Completed";case"paused":return"Paused";case"can-retry":return"Can Retry";case"in-progress":return"In Progress";default:return"Not Started"}},a=o=>{switch(o){case"completed":return"View Results";case"paused":return"Resume Quiz";case"can-retry":return"Retry Quiz";case"in-progress":return"Continue Quiz";default:return"Start Quiz"}};return w.jsx(Yc,{children:w.jsxs("div",{className:"space-y-8",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Dashboard"}),w.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"View your quizzes and track your progress"})]}),w.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map(o=>{const l=s(o),u=o.attempts.filter(d=>d.studentId===e.id),h=u.length>0?Math.max(...u.map(d=>d.score)):null;return w.jsxs(Jt,{className:"flex flex-col",children:[w.jsxs("div",{className:"flex-1 p-6",children:[w.jsxs("div",{className:"flex items-start justify-between",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:o.title}),w.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${i(l)}`,children:r(l)})]}),w.jsx("p",{className:"mt-2 text-sm text-gray-500 line-clamp-2",children:o.description}),w.jsxs("div",{className:"mt-4 space-y-2",children:[w.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[w.jsx(um,{className:"mr-2 h-4 w-4"}),o.duration," minutes"]}),w.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[w.jsx(CE,{className:"mr-2 h-4 w-4"}),o.questionsCount," questions"]}),h!==null&&w.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[w.jsx(G0,{className:"mr-2 h-4 w-4"}),"Best Score: ",Math.round(h),"%"]}),u.length>0&&w.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[w.jsx(LE,{className:"mr-2 h-4 w-4"}),"Attempts: ",u.length,"/",o.settings.maxAttempts]})]})]}),w.jsx("div",{className:"border-t border-gray-200 p-6",children:w.jsxs(pe,{onClick:()=>n(l==="completed"?`/student/results/${o.id}`:`/student/quiz/${o.id}`),className:"w-full",disabled:l==="completed"&&!o.settings.allowRetakes,children:[l==="paused"?w.jsx(PE,{className:"mr-2 h-4 w-4"}):w.jsx(BI,{className:"mr-2 h-4 w-4"}),a(l)]})})]},o.id)})}),t.length===0&&w.jsx(Jt,{className:"p-6 text-center",children:w.jsx("p",{className:"text-sm text-gray-500",children:"No quizzes are available at the moment."})})]})})}function oD(){const{id:n}=Tx(),e=pa(),t=sr(T=>T.quizzes.find(R=>R.id===n)),{submitQuizAttempt:s,pauseQuizAttempt:i}=sr(),r=nr(T=>T.user),[a,o]=I.useState(0),[l,u]=I.useState([]),[h,d]=I.useState(0),[f]=I.useState(Date.now()),[p,m]=I.useState(!1),[v,b]=I.useState(!1),[y,g]=I.useState("exit");if(I.useEffect(()=>{if(!t||!r){e("/student");return}const T=t.attempts.filter(P=>P.studentId===r.id),R=T.filter(P=>P.status==="completed");if(!t.settings.allowRetakes&&R.length>0){e("/student");return}if(t.settings.allowRetakes&&R.length>=t.settings.maxAttempts){e("/student");return}const N=T.find(P=>P.status==="paused");N?(d(N.remainingTime||t.duration*60),u(N.answers)):(d(t.duration*60),u(new Array(t.questions.length).fill(-1)))},[t,r,e]),I.useEffect(()=>{if(h<=0)return;const T=setInterval(()=>{d(R=>R<=1?(clearInterval(T),C(!0),0):R-1)},1e3);return()=>clearInterval(T)},[h]),!t||!r)return null;const _=T=>{const R=Math.floor(T/60),N=T%60;return`${R}:${N.toString().padStart(2,"0")}`},E=async()=>{if(t.settings.allowPause)try{await i(t.id,r.id,h),e("/student")}catch(T){console.error("Failed to pause quiz:",T)}},C=async(T=!1)=>{if(!T&&l.filter(P=>P===-1).length>0){g("submit"),b(!0);return}m(!0);const R=Math.round((Date.now()-f)/1e3);try{await s({id:crypto.randomUUID(),quizId:t.id,studentId:r.id,answers:l,timeSpent:R,remainingTime:null,status:"completed"}),e("/student/results/"+t.id)}catch(N){console.error("Failed to submit quiz:",N),m(!1)}},k=l.filter(T=>T!==-1).length;return k/t.questions.length*100,t.questions[a],w.jsx(Yc,{children:w.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>{k>0?(g("exit"),b(!0)):e("/student")},children:[w.jsx(Px,{className:"mr-2 h-4 w-4"}),"Exit Quiz"]}),w.jsxs("div",{className:"flex items-center gap-4",children:[t.settings.allowPause&&w.jsxs(pe,{variant:"outline",size:"sm",onClick:()=>{g("pause"),b(!0)},children:[w.jsx(PE,{className:"mr-2 h-4 w-4"}),"Pause Quiz"]}),w.jsxs("div",{className:"flex items-center text-lg font-semibold text-gray-900",children:[w.jsx(um,{className:"mr-2 h-5 w-5 text-blue-500"}),_(h)]})]})]}),v&&w.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",children:w.jsxs(Jt,{className:"w-full max-w-md p-6",children:[w.jsxs("div",{className:"flex items-start",children:[w.jsx(OI,{className:"h-6 w-6 text-yellow-500 mr-3"}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:y==="pause"?"Pause Quiz?":y==="submit"?"Submit Quiz?":"Exit Quiz?"}),w.jsx("p",{className:"mt-2 text-sm text-gray-500",children:y==="pause"?"Your progress will be saved and you can resume later.":k<t.questions.length?`You have ${t.questions.length-k} unanswered questions. Are you sure you want to ${y==="submit"?"submit":"exit"}?`:`Are you sure you want to ${y==="submit"?"submit your quiz":"exit"}?`})]})]}),w.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[w.jsx(pe,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),w.jsx(pe,{variant:"primary",onClick:()=>{b(!1),y==="pause"?E():y==="submit"?C(!0):e("/student")},children:y==="pause"?"Pause Quiz":y==="submit"?"Submit Quiz":"Exit Quiz"})]})]})})]})})}function lD(){const{id:n}=Tx(),e=pa(),t=sr(u=>u.quizzes.find(h=>h.id===n)),s=nr(u=>u.user);if(I.useEffect(()=>{(!t||!s)&&e("/student")},[t,s,e]),!t||!s)return null;const i=t.attempts.filter(u=>u.studentId===s.id),r=i[i.length-1];if(!r)return e("/student"),null;const a=u=>{const h=Math.floor(u/60),d=u%60;return`${h}m ${d}s`},l=(()=>{const u=r.answers.reduce((h,d,f)=>d===t.questions[f].correctAnswer?h+1:h,0);return{totalQuestions:t.questions.length,correctAnswers:u,incorrectAnswers:t.questions.length-u,accuracy:u/t.questions.length*100,timePerQuestion:r.timeSpent/t.questions.length,attemptNumber:i.length,bestScore:Math.max(...i.map(h=>h.score)),averageScore:i.reduce((h,d)=>h+d.score,0)/i.length}})();return w.jsx(Yc,{children:w.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[w.jsx("div",{children:w.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>e("/student"),children:[w.jsx(Px,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Quiz Results"}),w.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t.title})]}),w.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[w.jsxs(Jt,{className:"p-6",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Attempt"}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(j_,{className:"h-5 w-5 text-blue-500"}),w.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Score"})]}),w.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[Math.round(r.score),"%"]})]}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(um,{className:"h-5 w-5 text-blue-500"}),w.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Time Taken"})]}),w.jsx("span",{className:"text-gray-900",children:a(r.timeSpent)})]}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(G0,{className:"h-5 w-5 text-green-500"}),w.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Correct Answers"})]}),w.jsxs("span",{className:"text-gray-900",children:[l.correctAnswers,"/",l.totalQuestions]})]})]})]}),w.jsxs(Jt,{className:"p-6",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Analysis"}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx($_,{className:"h-5 w-5 text-blue-500"}),w.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Accuracy"})]}),w.jsxs("span",{className:"text-gray-900",children:[Math.round(l.accuracy),"%"]})]}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(um,{className:"h-5 w-5 text-blue-500"}),w.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Avg. Time per Question"})]}),w.jsxs("span",{className:"text-gray-900",children:[Math.round(l.timePerQuestion),"s"]})]}),i.length>1&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(j_,{className:"h-5 w-5 text-blue-500"}),w.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Best Score"})]}),w.jsxs("span",{className:"text-gray-900",children:[Math.round(l.bestScore),"%"]})]}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx($_,{className:"h-5 w-5 text-blue-500"}),w.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Average Score"})]}),w.jsxs("span",{className:"text-gray-900",children:[Math.round(l.averageScore),"%"]})]})]})]})]})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Question Analysis"}),t.questions.map((u,h)=>w.jsx(Jt,{className:"p-6",children:w.jsxs("div",{className:"space-y-4",children:[w.jsx("div",{className:"flex items-start justify-between",children:w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("span",{className:"font-medium text-gray-900",children:["Question ",h+1]}),r.answers[h]===u.correctAnswer?w.jsx("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-1 text-xs font-medium text-green-700",children:"Correct"}):w.jsx("span",{className:"inline-flex items-center rounded-full bg-red-50 px-2 py-1 text-xs font-medium text-red-700",children:"Incorrect"})]}),w.jsx("p",{className:"mt-2 text-gray-900",children:u.text})]})}),w.jsx("div",{className:"space-y-2",children:u.options.map((d,f)=>w.jsx("div",{className:`p-3 rounded-lg ${f===u.correctAnswer?"bg-green-50 border border-green-200":f===r.answers[h]?"bg-red-50 border border-red-200":"bg-gray-50 border border-gray-200"}`,children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("span",{className:"text-sm",children:[w.jsxs("span",{className:"font-medium",children:[String.fromCharCode(65+f),"."]})," ",d]}),f===u.correctAnswer&&w.jsx(G0,{className:"h-4 w-4 text-green-500"}),f===r.answers[h]&&f!==u.correctAnswer&&w.jsx(LE,{className:"h-4 w-4 text-red-500"})]})},f))}),u.explanation&&w.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:w.jsxs("p",{className:"text-sm text-blue-900",children:[w.jsx("span",{className:"font-medium",children:"Explanation:"})," ",u.explanation]})})]})},u.id))]})]})})}function Zo({children:n,requiredRole:e}){const t=nr(i=>i.isAuthenticated),s=nr(i=>i.role);return t?e&&s!==e?w.jsx(cm,{to:s==="admin"?"/admin":"/student",replace:!0}):w.jsx(w.Fragment,{children:n}):w.jsx(cm,{to:"/login",replace:!0})}function cD(){return w.jsx(RN,{children:w.jsxs(kN,{children:[w.jsx(Fs,{path:"/",element:w.jsx(cm,{to:"/login",replace:!0})}),w.jsx(Fs,{path:"/login",element:w.jsx(KI,{})}),w.jsx(Fs,{path:"/admin",element:w.jsx(Zo,{requiredRole:"admin",children:w.jsx(JF,{})})}),w.jsx(Fs,{path:"/admin/create-quiz",element:w.jsx(Zo,{requiredRole:"admin",children:w.jsx(eD,{})})}),w.jsx(Fs,{path:"/admin/quiz/:id",element:w.jsx(Zo,{requiredRole:"admin",children:w.jsx(rD,{})})}),w.jsx(Fs,{path:"/student",element:w.jsx(Zo,{requiredRole:"student",children:w.jsx(aD,{})})}),w.jsx(Fs,{path:"/student/quiz/:id",element:w.jsx(Zo,{requiredRole:"student",children:w.jsx(oD,{})})}),w.jsx(Fs,{path:"/student/results/:id",element:w.jsx(Zo,{requiredRole:"student",children:w.jsx(lD,{})})}),w.jsx(Fs,{path:"*",element:w.jsx(cm,{to:"/login",replace:!0})})]})})}const ul="0.17.2";let C1=!1,eh,LT,kw,FT,DT,OT;function uD(n,e={auto:!1}){if(C1)throw new Error(`you must \`import '@anthropic-ai/sdk/shims/${n.kind}'\` before importing anything else from @anthropic-ai/sdk`);if(eh)throw new Error(`can't \`import '@anthropic-ai/sdk/shims/${n.kind}'\` after \`import '@anthropic-ai/sdk/shims/${eh}'\``);C1=e.auto,eh=n.kind,LT=n.fetch,kw=n.File,FT=n.ReadableStream,DT=n.getDefaultAgent,OT=n.fileFromPath}class hD{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function dD({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import … from '@anthropic-ai/sdk'`:\n- `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)\n- `import '@anthropic-ai/sdk/shims/web'` (otherwise)\n";let t,s,i,r;try{t=fetch,s=Request,i=Response,r=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:t,Request:s,Response:i,Headers:r,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new hD(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/anthropics/anthropic-sdk-typescript#file-uploads")},isFsReadStream:a=>!1}}eh||uD(dD(),{auto:!0});class dt extends Error{}class qt extends dt{constructor(e,t,s,i){super(`${qt.makeMessage(e,t,s)}`),this.status=e,this.headers=i,this.error=t}static makeMessage(e,t,s){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,s,i){if(!e)return new qg({cause:Cw(t)});const r=t;return e===400?new $T(e,r,s,i):e===401?new zT(e,r,s,i):e===403?new BT(e,r,s,i):e===404?new HT(e,r,s,i):e===409?new UT(e,r,s,i):e===422?new WT(e,r,s,i):e===429?new VT(e,r,s,i):e>=500?new qT(e,r,s,i):new qt(e,r,s,i)}}class Ra extends qt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class qg extends qt{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class jT extends qg{constructor({message:e}={}){super({message:e??"Request timed out."})}}class $T extends qt{constructor(){super(...arguments),this.status=400}}class zT extends qt{constructor(){super(...arguments),this.status=401}}class BT extends qt{constructor(){super(...arguments),this.status=403}}class HT extends qt{constructor(){super(...arguments),this.status=404}}class UT extends qt{constructor(){super(...arguments),this.status=409}}class WT extends qt{constructor(){super(...arguments),this.status=422}}class VT extends qt{constructor(){super(...arguments),this.status=429}}class qT extends qt{}class Kr{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let s=!1;const i=new fD;async function*r(){if(!e.body)throw t.abort(),new dt("Attempted to iterate over a response with no body");const o=new $o,l=T1(e.body);for await(const u of l)for(const h of o.decode(u)){const d=i.decode(h);d&&(yield d)}for(const u of o.flush()){const h=i.decode(u);h&&(yield h)}}async function*a(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of r()){if(l.event==="completion")try{yield JSON.parse(l.data)}catch(u){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),u}if(l.event==="message_start"||l.event==="message_delta"||l.event==="message_stop"||l.event==="content_block_start"||l.event==="content_block_delta"||l.event==="content_block_stop")try{yield JSON.parse(l.data)}catch(u){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),u}if(l.event!=="ping"&&l.event==="error"){const u=l.data,h=KT(u),d=h?void 0:u;throw qt.generate(void 0,h,d,XT(e.headers))}}o=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{o||t.abort()}}return new Kr(a,t)}static fromReadableStream(e,t){let s=!1;async function*i(){const a=new $o,o=T1(e);for await(const l of o)for(const u of a.decode(l))yield u;for(const l of a.flush())yield l}async function*r(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const o of i())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||t.abort()}}return new Kr(r,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),i=r=>({next:()=>{if(r.length===0){const a=s.next();e.push(a),t.push(a)}return r.shift()}});return[new Kr(()=>i(e),this.controller),new Kr(()=>i(t),this.controller)]}toReadableStream(){const e=this;let t;const s=new TextEncoder;return new FT({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await t.next();if(a)return i.close();const o=s.encode(JSON.stringify(r)+`
`);i.enqueue(o)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}}class fD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,i]=pD(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}}class $o{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const s=$o.NEWLINE_CHARS.has(t[t.length-1]||"");let i=t.split($o.NEWLINE_REGEXP);return s&&i.pop(),i.length===1&&!s?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),s||(this.buffer=[i.pop()||""]),i)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new dt(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new dt(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new dt("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}$o.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);$o.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function pD(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}function T1(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const mD=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",gD=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function";async function yD(n,e,t={}){var i;if(n=await n,mD(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new kw([r],e,t)}const s=await vD(n);if(e||(e=xD(n)??"unknown_file"),!t.type){const r=(i=s[0])==null?void 0:i.type;typeof r=="string"&&(t={...t,type:r})}return new kw(s,e,t)}async function vD(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(gD(n))e.push(await n.arrayBuffer());else if(bD(n))for await(const s of n)e.push(s);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${wD(n)}`);return e}function wD(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function xD(n){var e;return Uy(n.name)||Uy(n.filename)||((e=Uy(n.path))==null?void 0:e.split(/[\\/]/).pop())}const Uy=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},bD=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",R1=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody";var Op={};async function GT(n){const{response:e}=n;if(n.options.stream)return jl("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):Kr.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type");if((t==null?void 0:t.includes("application/json"))||(t==null?void 0:t.includes("application/vnd.api+json"))){const r=await e.json();return jl("response",e.status,e.url,e.headers,r),r}const i=await e.text();return jl("response",e.status,e.url,e.headers,i),i}class Gg extends Promise{constructor(e,t=GT){super(s=>{s(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Gg(this.responsePromise,async t=>e(await this.parseResponse(t)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class _D{constructor({baseURL:e,maxRetries:t=2,timeout:s=6e5,httpAgent:i,fetch:r}){this.baseURL=e,this.maxRetries=Wy("maxRetries",t),this.timeout=Wy("timeout",s),this.httpAgent=i,this.fetch=r??LT}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...kD(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${MD()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(i=>({method:e,path:t,...i})))}getAPIList(e,t,s){return this.requestAPIList(t,{method:"get",path:e,...s})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}return null}buildRequest(e){var m;const{method:t,path:s,query:i,headers:r={}}=e,a=R1(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,o=this.calculateContentLength(a),l=this.buildURL(s,i);"timeout"in e&&Wy("timeout",e.timeout);const u=e.timeout??this.timeout,h=e.httpAgent??this.httpAgent??DT(l),d=u+1e3;typeof((m=h==null?void 0:h.options)==null?void 0:m.timeout)=="number"&&d>(h.options.timeout??0)&&(h.options.timeout=d),this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const f=this.buildHeaders({options:e,headers:r,contentLength:o});return{req:{method:t,...a&&{body:a},headers:f,...h&&{agent:h},signal:e.signal??null},url:l,timeout:u}}buildHeaders({options:e,headers:t,contentLength:s}){const i={};s&&(i["content-length"]=s);const r=this.defaultHeaders(e);return I1(i,r),I1(i,t),R1(e.body)&&eh!=="node"&&delete i["content-type"],this.validateHeaders(i,t),i}async prepareOptions(e){}async prepareRequest(e,{url:t,options:s}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,s,i){return qt.generate(e,t,s,i)}request(e,t=null){return new Gg(this.makeRequest(e,t))}async makeRequest(e,t){var h,d;const s=await e;t==null&&(t=s.maxRetries??this.maxRetries),await this.prepareOptions(s);const{req:i,url:r,timeout:a}=this.buildRequest(s);if(await this.prepareRequest(i,{url:r,options:s}),jl("request",r,s,i.headers),(h=s.signal)!=null&&h.aborted)throw new Ra;const o=new AbortController,l=await this.fetchWithTimeout(r,i,a,o).catch(Cw);if(l instanceof Error){if((d=s.signal)!=null&&d.aborted)throw new Ra;if(t)return this.retryRequest(s,t);throw l.name==="AbortError"?new jT:new qg({cause:l})}const u=XT(l.headers);if(!l.ok){if(t&&this.shouldRetry(l)){const y=`retrying, ${t} attempts remaining`;return jl(`response (error; ${y})`,l.status,r,u),this.retryRequest(s,t,u)}const f=await l.text().catch(y=>Cw(y).message),p=KT(f),m=p?void 0:f;throw jl(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,l.status,r,u,m),this.makeStatusError(l.status,p,m,u)}return{response:l,options:s,controller:o}}requestAPIList(e,t){const s=this.makeRequest(t,null);return new AD(this,s,e)}buildURL(e,t){const s=TD(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return Tw(i)||(t={...i,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(s.search=this.stringifyQuery(t)),s.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new dt(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,s,i){const{signal:r,...a}=t||{};r&&r.addEventListener("abort",()=>i.abort());const o=setTimeout(()=>i.abort(),s);return this.getRequestClient().fetch.call(void 0,e,{signal:i.signal,...a}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s){let i;const r=s==null?void 0:s["retry-after-ms"];if(r){const o=parseFloat(r);Number.isNaN(o)||(i=o)}const a=s==null?void 0:s["retry-after"];if(a&&!i){const o=parseFloat(a);Number.isNaN(o)?i=Date.parse(a)-Date.now():i=o*1e3}if(!(i&&0<=i&&i<60*1e3)){const o=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,o)}return await RD(i),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const r=t-e,a=Math.min(.5*Math.pow(2,r),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${ul}`}}class AD extends Gg{constructor(e,t,s){super(t,async i=>new s(e,i.response,await GT(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const XT=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const s=t.toString();return e[s.toLowerCase()]||e[s]}}),SD=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ul,"X-Stainless-OS":M1(Deno.build.os),"X-Stainless-Arch":P1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ul,"X-Stainless-OS":M1(process.platform),"X-Stainless-Arch":P1(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=ED();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ED(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const i=s[1]||0,r=s[2]||0,a=s[3]||0;return{browser:e,version:`${i}.${r}.${a}`}}}return null}const P1=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",M1=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let N1;const kD=()=>N1??(N1=SD()),KT=n=>{try{return JSON.parse(n)}catch{return}},CD=new RegExp("^(?:[a-z]+:)?//","i"),TD=n=>CD.test(n),RD=n=>new Promise(e=>setTimeout(e,n)),Wy=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new dt(`${n} must be an integer`);if(e<0)throw new dt(`${n} must be a positive integer`);return e},Cw=n=>n instanceof Error?n:new Error(n),Vy=n=>{var e,t,s,i;if(typeof process<"u")return((e=Op==null?void 0:Op[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(s=(t=Deno.env)==null?void 0:t.get)==null?void 0:s.call(t,n))==null?void 0:i.trim()};function Tw(n){if(!n)return!0;for(const e in n)return!1;return!0}function PD(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function I1(n,e){for(const t in e){if(!PD(e,t))continue;const s=t.toLowerCase();if(!s)continue;const i=e[t];i===null?delete n[s]:i!==void 0&&(n[s]=i)}}function jl(n,...e){typeof process<"u"&&Op.DEBUG==="true"&&console.log(`Anthropic:DEBUG:${n}`,...e)}const MD=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)});class QT{constructor(e){this._client=e}}class Gm extends QT{create(e,t){return this._client.post("/v1/complete",{body:e,timeout:6e5,...t,stream:e.stream??!1})}}Gm||(Gm={});var an=function(n,e,t,s,i){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},ae=function(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)},Wn,hr,Ff,Df,hu,du,Of,fu,mi,pu,jf,$f,el,qy,L1,Gy,Xy,Ky,Qy,F1;class Xm{constructor(){Wn.add(this),this.messages=[],this.receivedMessages=[],hr.set(this,void 0),this.controller=new AbortController,Ff.set(this,void 0),Df.set(this,()=>{}),hu.set(this,()=>{}),du.set(this,void 0),Of.set(this,()=>{}),fu.set(this,()=>{}),mi.set(this,{}),pu.set(this,!1),jf.set(this,!1),$f.set(this,!1),el.set(this,!1),Gy.set(this,e=>{if(an(this,jf,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Ra),e instanceof Ra)return an(this,$f,!0,"f"),this._emit("abort",e);if(e instanceof dt)return this._emit("error",e);if(e instanceof Error){const t=new dt(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new dt(String(e)))}),an(this,Ff,new Promise((e,t)=>{an(this,Df,e,"f"),an(this,hu,t,"f")}),"f"),an(this,du,new Promise((e,t)=>{an(this,Of,e,"f"),an(this,fu,t,"f")}),"f"),ae(this,Ff,"f").catch(()=>{}),ae(this,du,"f").catch(()=>{})}static fromReadableStream(e){const t=new Xm;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,s){const i=new Xm;for(const r of t.messages)i._addMessageParam(r);return i._run(()=>i._createMessage(e,{...t,stream:!0},{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},ae(this,Gy,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,s){var a;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ae(this,Wn,"m",Xy).call(this);const r=await e.create({...t,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const o of r)ae(this,Wn,"m",Ky).call(this,o);if((a=r.controller.signal)!=null&&a.aborted)throw new Ra;ae(this,Wn,"m",Qy).call(this)}_connected(){this.ended||(ae(this,Df,"f").call(this),this._emit("connect"))}get ended(){return ae(this,pu,"f")}get errored(){return ae(this,jf,"f")}get aborted(){return ae(this,$f,"f")}abort(){this.controller.abort()}on(e,t){return(ae(this,mi,"f")[e]||(ae(this,mi,"f")[e]=[])).push({listener:t}),this}off(e,t){const s=ae(this,mi,"f")[e];if(!s)return this;const i=s.findIndex(r=>r.listener===t);return i>=0&&s.splice(i,1),this}once(e,t){return(ae(this,mi,"f")[e]||(ae(this,mi,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{an(this,el,!0,"f"),e!=="error"&&this.once("error",s),this.once(e,t)})}async done(){an(this,el,!0,"f"),await ae(this,du,"f")}get currentMessage(){return ae(this,hr,"f")}async finalMessage(){return await this.done(),ae(this,Wn,"m",qy).call(this)}async finalText(){return await this.done(),ae(this,Wn,"m",L1).call(this)}_emit(e,...t){if(ae(this,pu,"f"))return;e==="end"&&(an(this,pu,!0,"f"),ae(this,Of,"f").call(this));const s=ae(this,mi,"f")[e];if(s&&(ae(this,mi,"f")[e]=s.filter(i=>!i.once),s.forEach(({listener:i})=>i(...t))),e==="abort"){const i=t[0];!ae(this,el,"f")&&!(s!=null&&s.length)&&Promise.reject(i),ae(this,hu,"f").call(this,i),ae(this,fu,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=t[0];!ae(this,el,"f")&&!(s!=null&&s.length)&&Promise.reject(i),ae(this,hu,"f").call(this,i),ae(this,fu,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",ae(this,Wn,"m",qy).call(this))}async _fromReadableStream(e,t){var r;const s=t==null?void 0:t.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ae(this,Wn,"m",Xy).call(this),this._connected();const i=Kr.fromReadableStream(e,this.controller);for await(const a of i)ae(this,Wn,"m",Ky).call(this,a);if((r=i.controller.signal)!=null&&r.aborted)throw new Ra;ae(this,Wn,"m",Qy).call(this)}[(hr=new WeakMap,Ff=new WeakMap,Df=new WeakMap,hu=new WeakMap,du=new WeakMap,Of=new WeakMap,fu=new WeakMap,mi=new WeakMap,pu=new WeakMap,jf=new WeakMap,$f=new WeakMap,el=new WeakMap,Gy=new WeakMap,Wn=new WeakSet,qy=function(){if(this.receivedMessages.length===0)throw new dt("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},L1=function(){if(this.receivedMessages.length===0)throw new dt("stream ended without producing a Message with role=assistant");const t=this.receivedMessages.at(-1).content.filter(s=>s.type==="text").map(s=>s.text);if(t.length===0)throw new dt("stream ended without producing a content block with type=text");return t.join(" ")},Xy=function(){this.ended||an(this,hr,void 0,"f")},Ky=function(t){if(this.ended)return;const s=ae(this,Wn,"m",F1).call(this,t);switch(this._emit("streamEvent",t,s),t.type){case"content_block_delta":{t.delta.type==="text_delta"&&this._emit("text",t.delta.text,s.content.at(-1).text||"");break}case"message_stop":{this._addMessageParam(s),this._addMessage(s,!0);break}case"content_block_stop":{this._emit("contentBlock",s.content.at(-1));break}case"message_start":{an(this,hr,s,"f");break}}},Qy=function(){if(this.ended)throw new dt("stream has ended, this shouldn't happen");const t=ae(this,hr,"f");if(!t)throw new dt("request ended without sending any chunks");return an(this,hr,void 0,"f"),t},F1=function(t){let s=ae(this,hr,"f");if(t.type==="message_start"){if(s)throw new dt(`Unexpected event order, got ${t.type} before receiving "message_stop"`);return t.message}if(!s)throw new dt(`Unexpected event order, got ${t.type} before "message_start"`);switch(t.type){case"message_stop":return s;case"message_delta":return s.stop_reason=t.delta.stop_reason,s.stop_sequence=t.delta.stop_sequence,s;case"content_block_start":return s.content.push(t.content_block),s;case"content_block_delta":{const i=s.content.at(t.index);return(i==null?void 0:i.type)==="text"&&t.delta.type==="text_delta"&&(i.text+=t.delta.text),s}case"content_block_stop":return s}},Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("streamEvent",i=>{const r=t.shift();r?r.resolve(i):e.push(i)}),this.on("end",()=>{s=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{s=!0;for(const r of t)r.reject(i);t.length=0}),this.on("error",i=>{s=!0;for(const r of t)r.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((r,a)=>t.push({resolve:r,reject:a})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Kr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class Km extends QT{create(e,t){return this._client.post("/v1/messages",{body:e,timeout:6e5,...t,stream:e.stream??!1})}stream(e,t){return Xm.createMessage(this,e,t)}}Km||(Km={});var YT;class it extends _D{constructor({baseURL:e=Vy("ANTHROPIC_BASE_URL"),apiKey:t=Vy("ANTHROPIC_API_KEY")??null,authToken:s=Vy("ANTHROPIC_AUTH_TOKEN")??null,...i}={}){const r={apiKey:t,authToken:s,...i,baseURL:e||"https://api.anthropic.com"};super({baseURL:r.baseURL,timeout:r.timeout??6e5,httpAgent:r.httpAgent,maxRetries:r.maxRetries,fetch:r.fetch}),this.completions=new Gm(this),this.messages=new Km(this),this._options=r,this.apiKey=t,this.authToken=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"anthropic-version":"2023-06-01",...this._options.defaultHeaders}}validateHeaders(e,t){if(!(this.apiKey&&e["x-api-key"])&&t["x-api-key"]!==null&&!(this.authToken&&e.authorization)&&t.authorization!==null)throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(e){const t=this.apiKeyAuth(e),s=this.bearerAuth(e);return t!=null&&!Tw(t)?t:s!=null&&!Tw(s)?s:{}}apiKeyAuth(e){return this.apiKey==null?{}:{"X-Api-Key":this.apiKey}}bearerAuth(e){return this.authToken==null?{}:{Authorization:`Bearer ${this.authToken}`}}}YT=it;it.Anthropic=YT;it.HUMAN_PROMPT=`

Human:`;it.AI_PROMPT=`

Assistant:`;it.AnthropicError=dt;it.APIError=qt;it.APIConnectionError=qg;it.APIConnectionTimeoutError=jT;it.APIUserAbortError=Ra;it.NotFoundError=HT;it.ConflictError=UT;it.RateLimitError=VT;it.BadRequestError=$T;it.AuthenticationError=zT;it.InternalServerError=qT;it.PermissionDeniedError=BT;it.UnprocessableEntityError=WT;(function(n){n.toFile=yD,n.fileFromPath=OT,n.Completions=Gm,n.Messages=Km})(it||(it={}));function rb(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Ko=rb();function JT(n){Ko=n}const ZT=/[&<>"']/,ND=new RegExp(ZT.source,"g"),eR=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ID=new RegExp(eR.source,"g"),LD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},D1=n=>LD[n];function Fn(n,e){if(e){if(ZT.test(n))return n.replace(ND,D1)}else if(eR.test(n))return n.replace(ID,D1);return n}const FD=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function DD(n){return n.replace(FD,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const OD=/(^|[^\[])\^/g;function Ce(n,e){let t=typeof n=="string"?n:n.source;e=e||"";const s={replace:(i,r)=>{let a=typeof r=="string"?r:r.source;return a=a.replace(OD,"$1"),t=t.replace(i,a),s},getRegex:()=>new RegExp(t,e)};return s}function O1(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const th={exec:()=>null};function j1(n,e){const t=n.replace(/\|/g,(r,a,o)=>{let l=!1,u=a;for(;--u>=0&&o[u]==="\\";)l=!l;return l?"|":" |"}),s=t.split(/ \|/);let i=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;i<s.length;i++)s[i]=s[i].trim().replace(/\\\|/g,"|");return s}function zf(n,e,t){const s=n.length;if(s===0)return"";let i=0;for(;i<s;){const r=n.charAt(s-i-1);if(r===e&&!t)i++;else if(r!==e&&t)i++;else break}return n.slice(0,s-i)}function jD(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return-1}function $1(n,e,t,s){const i=e.href,r=e.title?Fn(e.title):null,a=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){s.state.inLink=!0;const o={type:"link",raw:t,href:i,title:r,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,o}return{type:"image",raw:t,href:i,title:r,text:Fn(a)}}function $D(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const s=t[1];return e.split(`
`).map(i=>{const r=i.match(/^\s+/);if(r===null)return i;const[a]=r;return a.length>=s.length?i.slice(s.length):i}).join(`
`)}class Qm{constructor(e){j(this,"options");j(this,"rules");j(this,"lexer");this.options=e||Ko}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const s=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?s:zf(s,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const s=t[0],i=$D(s,t[3]||"");return{type:"code",raw:s,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let s=t[2].trim();if(/#$/.test(s)){const i=zf(s,"#");(this.options.pedantic||!i||/ $/.test(i))&&(s=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let s=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);s=zf(s.replace(/^ *>[ \t]?/gm,""),`
`);const i=this.lexer.state.top;this.lexer.state.top=!0;const r=this.lexer.blockTokens(s);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:r,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let s=t[1].trim();const i=s.length>1,r={type:"list",raw:"",ordered:i,start:i?+s.slice(0,-1):"",loose:!1,items:[]};s=i?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=i?s:"[*+-]");const a=new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o="",l="",u=!1;for(;e;){let h=!1;if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;o=t[0],e=e.substring(o.length);let d=t[2].split(`
`,1)[0].replace(/^\t+/,y=>" ".repeat(3*y.length)),f=e.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,l=d.trimStart()):(p=t[2].search(/[^ ]/),p=p>4?1:p,l=d.slice(p),p+=t[1].length);let m=!1;if(!d&&/^ *$/.test(f)&&(o+=f+`
`,e=e.substring(f.length+1),h=!0),!h){const y=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),g=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),_=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),E=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){const C=e.split(`
`,1)[0];if(f=C,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),_.test(f)||E.test(f)||y.test(f)||g.test(e))break;if(f.search(/[^ ]/)>=p||!f.trim())l+=`
`+f.slice(p);else{if(m||d.search(/[^ ]/)>=4||_.test(d)||E.test(d)||g.test(d))break;l+=`
`+f}!m&&!f.trim()&&(m=!0),o+=C+`
`,e=e.substring(C.length+1),d=f.slice(p)}}r.loose||(u?r.loose=!0:/\n *\n *$/.test(o)&&(u=!0));let v=null,b;this.options.gfm&&(v=/^\[[ xX]\] /.exec(l),v&&(b=v[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:o,task:!!v,checked:b,loose:!1,text:l,tokens:[]}),r.raw+=o}r.items[r.items.length-1].raw=o.trimEnd(),r.items[r.items.length-1].text=l.trimEnd(),r.raw=r.raw.trimEnd();for(let h=0;h<r.items.length;h++)if(this.lexer.state.top=!1,r.items[h].tokens=this.lexer.blockTokens(r.items[h].text,[]),!r.loose){const d=r.items[h].tokens.filter(p=>p.type==="space"),f=d.length>0&&d.some(p=>/\n.*\n/.test(p.raw));r.loose=f}if(r.loose)for(let h=0;h<r.items.length;h++)r.items[h].loose=!0;return r}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const s=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:s,raw:t[0],href:i,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const s=j1(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),r=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(s.length===i.length){for(const o of i)/^ *-+: *$/.test(o)?a.align.push("right"):/^ *:-+: *$/.test(o)?a.align.push("center"):/^ *:-+ *$/.test(o)?a.align.push("left"):a.align.push(null);for(const o of s)a.header.push({text:o,tokens:this.lexer.inline(o)});for(const o of r)a.rows.push(j1(o,a.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return a}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const s=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:s,tokens:this.lexer.inline(s)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Fn(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const s=t[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const a=zf(s.slice(0,-1),"\\");if((s.length-a.length)%2===0)return}else{const a=jD(t[2],"()");if(a>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],r="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);a&&(i=a[1],r=a[3])}else r=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(s)?i=i.slice(1):i=i.slice(1,-1)),$1(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let s;if((s=this.rules.inline.reflink.exec(e))||(s=this.rules.inline.nolink.exec(e))){const i=(s[2]||s[1]).replace(/\s+/g," "),r=t[i.toLowerCase()];if(!r){const a=s[0].charAt(0);return{type:"text",raw:a,text:a}}return $1(s,r,s[0],this.lexer)}}emStrong(e,t,s=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&s.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const a=[...i[0]].length-1;let o,l,u=a,h=0;const d=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+a);(i=d.exec(t))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(l=[...o].length,i[3]||i[4]){u+=l;continue}else if((i[5]||i[6])&&a%3&&!((a+l)%3)){h+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+h);const f=[...i[0]][0].length,p=e.slice(0,a+i.index+f+l);if(Math.min(a,l)%2){const v=p.slice(1,-1);return{type:"em",raw:p,text:v,tokens:this.lexer.inlineTokens(v)}}const m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let s=t[2].replace(/\n/g," ");const i=/[^ ]/.test(s),r=/^ /.test(s)&&/ $/.test(s);return i&&r&&(s=s.substring(1,s.length-1)),s=Fn(s,!0),{type:"codespan",raw:t[0],text:s}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let s,i;return t[2]==="@"?(s=Fn(t[1]),i="mailto:"+s):(s=Fn(t[1]),i=s),{type:"link",raw:t[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}url(e){var s;let t;if(t=this.rules.inline.url.exec(e)){let i,r;if(t[2]==="@")i=Fn(t[0]),r="mailto:"+i;else{let a;do a=t[0],t[0]=((s=this.rules.inline._backpedal.exec(t[0]))==null?void 0:s[0])??"";while(a!==t[0]);i=Fn(t[0]),t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let s;return this.lexer.state.inRawBlock?s=t[0]:s=Fn(t[0]),{type:"text",raw:t[0],text:s}}}}const zD=/^(?: *(?:\n|$))+/,BD=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,HD=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,rf=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,UD=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,tR=/(?:[*+-]|\d{1,9}[.)])/,nR=Ce(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,tR).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),ab=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,WD=/^[^\n]+/,ob=/(?!\s*\])(?:\\.|[^\[\]\\])+/,VD=Ce(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ob).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),qD=Ce(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,tR).getRegex(),Xg="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",lb=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,GD=Ce("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",lb).replace("tag",Xg).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),sR=Ce(ab).replace("hr",rf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Xg).getRegex(),XD=Ce(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",sR).getRegex(),cb={blockquote:XD,code:BD,def:VD,fences:HD,heading:UD,hr:rf,html:GD,lheading:nR,list:qD,newline:zD,paragraph:sR,table:th,text:WD},z1=Ce("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",rf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Xg).getRegex(),KD={...cb,table:z1,paragraph:Ce(ab).replace("hr",rf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",z1).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Xg).getRegex()},QD={...cb,html:Ce(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",lb).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:th,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ce(ab).replace("hr",rf).replace("heading",` *#{1,6} *[^
]`).replace("lheading",nR).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},iR=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,YD=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,rR=/^( {2,}|\\)\n(?!\s*$)/,JD=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,af="\\p{P}\\p{S}",ZD=Ce(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,af).getRegex(),eO=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,tO=Ce(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,af).getRegex(),nO=Ce("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,af).getRegex(),sO=Ce("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,af).getRegex(),iO=Ce(/\\([punct])/,"gu").replace(/punct/g,af).getRegex(),rO=Ce(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),aO=Ce(lb).replace("(?:-->|$)","-->").getRegex(),oO=Ce("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",aO).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ym=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,lO=Ce(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ym).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),aR=Ce(/^!?\[(label)\]\[(ref)\]/).replace("label",Ym).replace("ref",ob).getRegex(),oR=Ce(/^!?\[(ref)\](?:\[\])?/).replace("ref",ob).getRegex(),cO=Ce("reflink|nolink(?!\\()","g").replace("reflink",aR).replace("nolink",oR).getRegex(),ub={_backpedal:th,anyPunctuation:iO,autolink:rO,blockSkip:eO,br:rR,code:YD,del:th,emStrongLDelim:tO,emStrongRDelimAst:nO,emStrongRDelimUnd:sO,escape:iR,link:lO,nolink:oR,punctuation:ZD,reflink:aR,reflinkSearch:cO,tag:oO,text:JD,url:th},uO={...ub,link:Ce(/^!?\[(label)\]\((.*?)\)/).replace("label",Ym).getRegex(),reflink:Ce(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ym).getRegex()},Rw={...ub,escape:Ce(iR).replace("])","~|])").getRegex(),url:Ce(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},hO={...Rw,br:Ce(rR).replace("{2,}","*").getRegex(),text:Ce(Rw.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Bf={normal:cb,gfm:KD,pedantic:QD},mu={normal:ub,gfm:Rw,breaks:hO,pedantic:uO};class ri{constructor(e){j(this,"tokens");j(this,"options");j(this,"state");j(this,"tokenizer");j(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ko,this.options.tokenizer=this.options.tokenizer||new Qm,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Bf.normal,inline:mu.normal};this.options.pedantic?(t.block=Bf.pedantic,t.inline=mu.pedantic):this.options.gfm&&(t.block=Bf.gfm,this.options.breaks?t.inline=mu.breaks:t.inline=mu.gfm),this.tokenizer.rules=t}static get rules(){return{block:Bf,inline:mu}}static lex(e,t){return new ri(t).lex(e)}static lexInline(e,t){return new ri(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(o,l,u)=>l+"    ".repeat(u.length));let s,i,r,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(s=o.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))){if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length),s.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(r=e,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const l=e.slice(1);let u;this.options.extensions.startBlock.forEach(h=>{u=h.call({lexer:this},l),typeof u=="number"&&u>=0&&(o=Math.min(o,u))}),o<1/0&&o>=0&&(r=e.substring(0,o+1))}if(this.state.top&&(s=this.tokenizer.paragraph(r))){i=t[t.length-1],a&&i.type==="paragraph"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(s),a=r.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(s);continue}if(e){const o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let s,i,r,a=e,o,l,u;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)h.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,o.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(h=>(s=h.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))){if(s=this.tokenizer.escape(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.tag(e)){e=e.substring(s.raw.length),i=t[t.length-1],i&&s.type==="text"&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):t.push(s);continue}if(s=this.tokenizer.link(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(s.raw.length),i=t[t.length-1],i&&s.type==="text"&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):t.push(s);continue}if(s=this.tokenizer.emStrong(e,a,u)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.codespan(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.br(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.del(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.autolink(e)){e=e.substring(s.raw.length),t.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(e))){e=e.substring(s.raw.length),t.push(s);continue}if(r=e,this.options.extensions&&this.options.extensions.startInline){let h=1/0;const d=e.slice(1);let f;this.options.extensions.startInline.forEach(p=>{f=p.call({lexer:this},d),typeof f=="number"&&f>=0&&(h=Math.min(h,f))}),h<1/0&&h>=0&&(r=e.substring(0,h+1))}if(s=this.tokenizer.inlineText(r)){e=e.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(u=s.raw.slice(-1)),l=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):t.push(s);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return t}}class Jm{constructor(e){j(this,"options");this.options=e||Ko}code(e,t,s){var r;const i=(r=(t||"").match(/^\S*/))==null?void 0:r[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+Fn(i)+'">'+(s?e:Fn(e,!0))+`</code></pre>
`:"<pre><code>"+(s?e:Fn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,s){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,s){const i=t?"ol":"ul",r=t&&s!==1?' start="'+s+'"':"";return"<"+i+r+`>
`+e+"</"+i+`>
`}listitem(e,t,s){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const s=t.header?"th":"td";return(t.align?`<${s} align="${t.align}">`:`<${s}>`)+e+`</${s}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,s){const i=O1(e);if(i===null)return s;e=i;let r='<a href="'+e+'"';return t&&(r+=' title="'+t+'"'),r+=">"+s+"</a>",r}image(e,t,s){const i=O1(e);if(i===null)return s;e=i;let r=`<img src="${e}" alt="${s}"`;return t&&(r+=` title="${t}"`),r+=">",r}text(e){return e}}class hb{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,s){return""+s}image(e,t,s){return""+s}br(){return""}}class ai{constructor(e){j(this,"options");j(this,"renderer");j(this,"textRenderer");this.options=e||Ko,this.options.renderer=this.options.renderer||new Jm,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new hb}static parse(e,t){return new ai(t).parse(e)}static parseInline(e,t){return new ai(t).parseInline(e)}parse(e,t=!0){let s="";for(let i=0;i<e.length;i++){const r=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const a=r,o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){s+=o||"";continue}}switch(r.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{const a=r;s+=this.renderer.heading(this.parseInline(a.tokens),a.depth,DD(this.parseInline(a.tokens,this.textRenderer)));continue}case"code":{const a=r;s+=this.renderer.code(a.text,a.lang,!!a.escaped);continue}case"table":{const a=r;let o="",l="";for(let h=0;h<a.header.length;h++)l+=this.renderer.tablecell(this.parseInline(a.header[h].tokens),{header:!0,align:a.align[h]});o+=this.renderer.tablerow(l);let u="";for(let h=0;h<a.rows.length;h++){const d=a.rows[h];l="";for(let f=0;f<d.length;f++)l+=this.renderer.tablecell(this.parseInline(d[f].tokens),{header:!1,align:a.align[f]});u+=this.renderer.tablerow(l)}s+=this.renderer.table(o,u);continue}case"blockquote":{const a=r,o=this.parse(a.tokens);s+=this.renderer.blockquote(o);continue}case"list":{const a=r,o=a.ordered,l=a.start,u=a.loose;let h="";for(let d=0;d<a.items.length;d++){const f=a.items[d],p=f.checked,m=f.task;let v="";if(f.task){const b=this.renderer.checkbox(!!p);u?f.tokens.length>0&&f.tokens[0].type==="paragraph"?(f.tokens[0].text=b+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&f.tokens[0].tokens[0].type==="text"&&(f.tokens[0].tokens[0].text=b+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:b+" "}):v+=b+" "}v+=this.parse(f.tokens,u),h+=this.renderer.listitem(v,m,!!p)}s+=this.renderer.list(h,o,l);continue}case"html":{const a=r;s+=this.renderer.html(a.text,a.block);continue}case"paragraph":{const a=r;s+=this.renderer.paragraph(this.parseInline(a.tokens));continue}case"text":{let a=r,o=a.tokens?this.parseInline(a.tokens):a.text;for(;i+1<e.length&&e[i+1].type==="text";)a=e[++i],o+=`
`+(a.tokens?this.parseInline(a.tokens):a.text);s+=t?this.renderer.paragraph(o):o;continue}default:{const a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return s}parseInline(e,t){t=t||this.renderer;let s="";for(let i=0;i<e.length;i++){const r=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const a=this.options.extensions.renderers[r.type].call({parser:this},r);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){s+=a||"";continue}}switch(r.type){case"escape":{const a=r;s+=t.text(a.text);break}case"html":{const a=r;s+=t.html(a.text);break}case"link":{const a=r;s+=t.link(a.href,a.title,this.parseInline(a.tokens,t));break}case"image":{const a=r;s+=t.image(a.href,a.title,a.text);break}case"strong":{const a=r;s+=t.strong(this.parseInline(a.tokens,t));break}case"em":{const a=r;s+=t.em(this.parseInline(a.tokens,t));break}case"codespan":{const a=r;s+=t.codespan(a.text);break}case"br":{s+=t.br();break}case"del":{const a=r;s+=t.del(this.parseInline(a.tokens,t));break}case"text":{const a=r;s+=t.text(a.text);break}default:{const a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return s}}class nh{constructor(e){j(this,"options");this.options=e||Ko}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}j(nh,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Uo,Pw,lR;class dO{constructor(...e){S(this,Uo);j(this,"defaults",rb());j(this,"options",this.setOptions);j(this,"parse",A(this,Uo,Pw).call(this,ri.lex,ai.parse));j(this,"parseInline",A(this,Uo,Pw).call(this,ri.lexInline,ai.parseInline));j(this,"Parser",ai);j(this,"Renderer",Jm);j(this,"TextRenderer",hb);j(this,"Lexer",ri);j(this,"Tokenizer",Qm);j(this,"Hooks",nh);this.use(...e)}walkTokens(e,t){var i,r;let s=[];for(const a of e)switch(s=s.concat(t.call(this,a)),a.type){case"table":{const o=a;for(const l of o.header)s=s.concat(this.walkTokens(l.tokens,t));for(const l of o.rows)for(const u of l)s=s.concat(this.walkTokens(u.tokens,t));break}case"list":{const o=a;s=s.concat(this.walkTokens(o.items,t));break}default:{const o=a;(r=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&r[o.type]?this.defaults.extensions.childTokens[o.type].forEach(l=>{const u=o[l].flat(1/0);s=s.concat(this.walkTokens(u,t))}):o.tokens&&(s=s.concat(this.walkTokens(o.tokens,t)))}}return s}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(s=>{const i={...s};if(i.async=this.defaults.async||i.async||!1,s.extensions&&(s.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const a=t.renderers[r.name];a?t.renderers[r.name]=function(...o){let l=r.renderer.apply(this,o);return l===!1&&(l=a.apply(this,o)),l}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=t[r.level];a?a.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),i.extensions=t),s.renderer){const r=this.defaults.renderer||new Jm(this.defaults);for(const a in s.renderer){if(!(a in r))throw new Error(`renderer '${a}' does not exist`);if(a==="options")continue;const o=a,l=s.renderer[o],u=r[o];r[o]=(...h)=>{let d=l.apply(r,h);return d===!1&&(d=u.apply(r,h)),d||""}}i.renderer=r}if(s.tokenizer){const r=this.defaults.tokenizer||new Qm(this.defaults);for(const a in s.tokenizer){if(!(a in r))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const o=a,l=s.tokenizer[o],u=r[o];r[o]=(...h)=>{let d=l.apply(r,h);return d===!1&&(d=u.apply(r,h)),d}}i.tokenizer=r}if(s.hooks){const r=this.defaults.hooks||new nh;for(const a in s.hooks){if(!(a in r))throw new Error(`hook '${a}' does not exist`);if(a==="options")continue;const o=a,l=s.hooks[o],u=r[o];nh.passThroughHooks.has(a)?r[o]=h=>{if(this.defaults.async)return Promise.resolve(l.call(r,h)).then(f=>u.call(r,f));const d=l.call(r,h);return u.call(r,d)}:r[o]=(...h)=>{let d=l.apply(r,h);return d===!1&&(d=u.apply(r,h)),d}}i.hooks=r}if(s.walkTokens){const r=this.defaults.walkTokens,a=s.walkTokens;i.walkTokens=function(o){let l=[];return l.push(a.call(this,o)),r&&(l=l.concat(r.call(this,o))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return ri.lex(e,t??this.defaults)}parser(e,t){return ai.parse(e,t??this.defaults)}}Uo=new WeakSet,Pw=function(e,t){return(s,i)=>{const r={...i},a={...this.defaults,...r};this.defaults.async===!0&&r.async===!1&&(a.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),a.async=!0);const o=A(this,Uo,lR).call(this,!!a.silent,!!a.async);if(typeof s>"u"||s===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(s):s).then(l=>e(l,a)).then(l=>a.hooks?a.hooks.processAllTokens(l):l).then(l=>a.walkTokens?Promise.all(this.walkTokens(l,a.walkTokens)).then(()=>l):l).then(l=>t(l,a)).then(l=>a.hooks?a.hooks.postprocess(l):l).catch(o);try{a.hooks&&(s=a.hooks.preprocess(s));let l=e(s,a);a.hooks&&(l=a.hooks.processAllTokens(l)),a.walkTokens&&this.walkTokens(l,a.walkTokens);let u=t(l,a);return a.hooks&&(u=a.hooks.postprocess(u)),u}catch(l){return o(l)}}},lR=function(e,t){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Fn(s.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(s);throw s}};const zo=new dO;function Ee(n,e){return zo.parse(n,e)}Ee.options=Ee.setOptions=function(n){return zo.setOptions(n),Ee.defaults=zo.defaults,JT(Ee.defaults),Ee};Ee.getDefaults=rb;Ee.defaults=Ko;Ee.use=function(...n){return zo.use(...n),Ee.defaults=zo.defaults,JT(Ee.defaults),Ee};Ee.walkTokens=function(n,e){return zo.walkTokens(n,e)};Ee.parseInline=zo.parseInline;Ee.Parser=ai;Ee.parser=ai.parse;Ee.Renderer=Jm;Ee.TextRenderer=hb;Ee.Lexer=ri;Ee.lexer=ri.lex;Ee.Tokenizer=Qm;Ee.Hooks=nh;Ee.parse=Ee;Ee.options;Ee.setOptions;Ee.use;Ee.walkTokens;Ee.parseInline;ai.parse;ri.lex;let Yy=null;function fO(n){try{n.provider==="openai"?Yy=new Ge({apiKey:n.apiKey,dangerouslyAllowBrowser:!0}):Yy=new it({apiKey:n.apiKey})}catch(e){throw Yy=null,e}}function pO(){const n="openai",e="sk-1234567890abcdef1234567890abcdef";return!["openai","anthropic"].includes(n)||e.length<10?null:{provider:n,apiKey:e}}function mO(){const n=pO();if(!n){console.info("Running in development mode without AI features");return}try{fO(n),console.info(`AI initialized successfully with ${n.provider}`)}catch(e){e instanceof Error?console.error("AI initialization failed:",e.message):console.error("AI initialization failed with unknown error")}}mO();tE(document.getElementById("root")).render(w.jsx(I.StrictMode,{children:w.jsx(cD,{})}));
